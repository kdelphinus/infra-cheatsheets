{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":[" "],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\ude80 Infra Cheatsheets","text":"<p>DevOps \uc2e4\ubb34\ub97c \uc704\ud55c \uac1c\uc778 \uc9c0\uc2dd \uc800\uc7a5\uc18c (Knowledge Base) &gt; \uc78a\uc5b4\ubc84\ub9ac\uae30 \uc26c\uc6b4 \uba85\ub839\uc5b4, \uc124\uce58 \uc808\ucc28, \ud2b8\ub7ec\ube14\uc288\ud305 \uac00\uc774\ub4dc\ub97c \ubaa8\uc544\ub450\uc5c8\uc2b5\ub2c8\ub2e4.</p>"},{"location":"#topics","title":"\ud83d\udcda Topics","text":"<p>\ucd94\ud6c4 \ucc44\uc6cc\uc9c8 \uc608\uc815\uc785\ub2c8\ub2e4.</p>"},{"location":"#quick-links","title":"\ud83d\udd25 Quick Links","text":"<p>\ucd94\ud6c4 \ucc44\uc6cc\uc9c8 \uc608\uc815\uc785\ub2c8\ub2e4.</p>"},{"location":"#tip","title":"Tip","text":"<p>\uc0c1\ub2e8 \uac80\uc0c9\ucc3d(Search)\uc744 \uc774\uc6a9\ud558\uba74 \uba85\ub839\uc5b4 \ub2e8\uc704\ub85c \uac80\uc0c9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. <code>Ctrl + K</code> (\ub610\ub294 <code>Cmd + K</code>)\ub97c \ub20c\ub7ec\ubcf4\uc138\uc694!</p>"},{"location":"git/cheatsheet/","title":"\ud83d\ude80 DevOps Git Cheat Sheet (Oh-My-Zsh Edition)","text":""},{"location":"git/cheatsheet/#1-the-one-pick","title":"1. \ud83c\udf1f The One Pick (\uac00\uc7a5 \ucd94\ucc9c\ud558\ub294 \uba85\ub839\uc5b4)","text":"<p>\ud300\uc758 \ucee4\ubc0b \ud788\uc2a4\ud1a0\ub9ac\ub97c \uae54\ub054\ud558\uac8c \uc720\uc9c0\ud558\ub294 \ube44\uacb0\uc785\ub2c8\ub2e4.</p> Alias \uc2e4\uc81c \uba85\ub839\uc5b4 \ud6a8\uacfc <code>gup</code> <code>git pull --rebase</code> \uc77c\ubc18 <code>pull</code>\uacfc \ub2ec\ub9ac, \ubd88\ud544\uc694\ud55c Merge \ucee4\ubc0b\uc744 \ub9cc\ub4e4\uc9c0 \uc54a\uace0 \ub0b4 \ucee4\ubc0b\uc744 \ucd5c\uc2e0 \ucf54\ub4dc \ub4a4\uc5d0 \uae54\ub054\ud558\uac8c \uc774\uc5b4 \ubd99\uc785\ub2c8\ub2e4."},{"location":"git/cheatsheet/#2","title":"2. \ud544\uc218 \uc124\uc815 &amp; \ud2b8\ub7ec\ube14\uc288\ud305","text":"<p>\ud658\uacbd \uc138\ud305\uacfc <code>.gitignore</code> \ubb38\uc81c \ud574\uacb0\uc6a9\uc785\ub2c8\ub2e4.</p> \uc0c1\ud669 \uba85\ub839\uc5b4 / \uc124\uba85 \uc720\uc800 \uc124\uc815 <code>git config --global user.name \"\ub0b4\uc774\ub984\"</code><code>git config --global user.email \"\uc774\uba54\uc77c\"</code> .gitignore\ubbf8\uc801\uc6a9 \ud574\uacb0 (\uce90\uc2dc \uc0ad\uc81c \ud6c4 \uc7ac\ucee4\ubc0b)1. <code>git rm -r --cached .</code>2. <code>git add .</code>3. <code>git commit -m \"Fix .gitignore\"</code>"},{"location":"git/cheatsheet/#3-alias","title":"3. \uc2e4\uc804 \ud575\uc2ec Alias (\ub2e8\ucd95\ud0a4)","text":"<p>\uc790\uc8fc \uc4f0\ub294 \uc21c\uc11c\ub300\ub85c \uc815\ub9ac\ud588\uc2b5\ub2c8\ub2e4.</p>"},{"location":"git/cheatsheet/#a-basic","title":"A. \uc791\uc5c5 \uc2dc\uc791 &amp; \uc800\uc7a5 (Basic)","text":"Alias \uc2e4\uc81c \uba85\ub839\uc5b4 \uc124\uba85 <code>gst</code> <code>git status</code> [\uc2b5\uad00] \ud604\uc7ac \ud30c\uc77c \uc0c1\ud0dc \ud655\uc778 (\uc218\uc2dc\ub85c \uc785\ub825) <code>gaa</code> <code>git add --all</code> \ubcc0\uacbd\ub41c \ubaa8\ub4e0 \ud30c\uc77c\uc744 \uc2a4\ud14c\uc774\uc9d5 <code>gcmsg</code> <code>git commit -m</code> \uba54\uc2dc\uc9c0\uc640 \ud568\uaed8 \ucee4\ubc0b (<code>gcmsg \"\uba54\uc2dc\uc9c0\"</code>) <code>gc!</code> <code>git commit --amend</code> [\uc218\uc815] \ubc29\uae08 \uc62c\ub9b0 \ucee4\ubc0b \ub0b4\uc6a9/\uba54\uc2dc\uc9c0 \uace0\uce58\uae30 <code>gd</code> <code>git diff</code> \ucf54\ub4dc \ubcc0\uacbd\uc810 \ud655\uc778 (<code>add</code> \ud558\uae30 \uc804)"},{"location":"git/cheatsheet/#b-sync","title":"B. \uc5c5\ub85c\ub4dc &amp; \ub3d9\uae30\ud654 (Sync)","text":"Alias \uc2e4\uc81c \uba85\ub839\uc5b4 \uc124\uba85 <code>gp</code> <code>git push</code> \uc6d0\uaca9 \uc800\uc7a5\uc18c\ub85c \uc5c5\ub85c\ub4dc <code>gl</code> <code>git pull</code> \uc6d0\uaca9 \uc800\uc7a5\uc18c \ub0b4\uc6a9 \uac00\uc838\uc624\uae30 (\uc77c\ubc18) <code>gup</code> <code>git pull --rebase</code> [\u2b50\ucd94\ucc9c] \uae54\ub054\ud558\uac8c \ub2f9\uaca8\uc624\uae30 (Merge bubble \ubc29\uc9c0)"},{"location":"git/cheatsheet/#c-branch","title":"C. \ube0c\ub79c\uce58 \uad00\ub9ac (Branch)","text":"Alias \uc2e4\uc81c \uba85\ub839\uc5b4 \uc124\uba85 <code>gsw</code> <code>git switch</code> \ube0c\ub79c\uce58 \uc774\ub3d9 (<code>gsw [\ube0c\ub79c\uce58\uba85]</code>) <code>gswc</code> <code>git switch -c</code> \uc0c8 \ube0c\ub79c\uce58 \uc0dd\uc131 \ud6c4 \uc774\ub3d9 (<code>gswc [\uc0c8\ube0c\ub79c\uce58\uba85]</code>) <code>gb</code> <code>git branch</code> \ub85c\uceec \ube0c\ub79c\uce58 \ubaa9\ub85d \ubcf4\uae30 <code>gbD</code> <code>git branch -D</code> \ube0c\ub79c\uce58 \uac15\uc81c \uc0ad\uc81c <code>gm</code> <code>git merge</code> \ube0c\ub79c\uce58 \ud569\uce58\uae30"},{"location":"git/cheatsheet/#d-stash","title":"D. \uc784\uc2dc \uc800\uc7a5 (Stash)","text":"<p>\uc791\uc5c5 \uc911 \uae09\ud558\uac8c \ub2e4\ub978 \uc77c\uc744 \ud574\uc57c \ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> Alias \uc2e4\uc81c \uba85\ub839\uc5b4 \uc124\uba85 <code>gsta</code> <code>git stash push</code> \uc791\uc5c5 \ucf54\ub4dc \uc784\uc2dc \ubcf4\uad00\ud568\uc5d0 \uc228\uae30\uae30 <code>gstp</code> <code>git stash pop</code> \uc228\uaca8\ub454 \ucf54\ub4dc \ub2e4\uc2dc \uaebc\ub0b4\uc624\uae30 <code>gstl</code> <code>git stash list</code> \ubcf4\uad00\ub41c \ubaa9\ub85d \ud655\uc778"},{"location":"git/cheatsheet/#e-undoreset","title":"E. \ub418\ub3cc\ub9ac\uae30 (Undo/Reset)","text":"<p>\u26a0\ufe0f \uc8fc\uc758\ud574\uc11c \uc0ac\uc6a9\ud558\uc138\uc694.</p> Alias \uc2e4\uc81c \uba85\ub839\uc5b4 \uc124\uba85 <code>grh</code> <code>git reset --hard</code> \ud2b9\uc815 \uc2dc\uc810\uc73c\ub85c \uc644\uc804 \ucd08\uae30\ud654 (\ubcf5\uad6c \ubd88\uac00) <code>grs</code> <code>git reset --soft</code> \ucee4\ubc0b\ub9cc \ucde8\uc18c\ud558\uace0, \ud30c\uc77c \ubcc0\uacbd\ubd84\uc740 \ub0a8\uae40"},{"location":"git/cheatsheet/#f-log","title":"F. \uc774\ub825 \uc870\ud68c (Log)","text":"Alias \uc2e4\uc81c \uba85\ub839\uc5b4 \uc124\uba85 <code>glo</code> <code>git log --oneline --graph</code> \ucee4\ubc0b \ud788\uc2a4\ud1a0\ub9ac\ub97c \uadf8\ub798\ud504\ub85c \uae54\ub054\ud558\uac8c \ubcf4\uae30"},{"location":"ide/vscode_shortcut/","title":"\ud83d\ude80 VS Code \ud575\uc2ec \ub2e8\ucd95\ud0a4","text":""},{"location":"ide/vscode_shortcut/#_1","title":"\ud83d\udda5\ufe0f \ud658\uacbd \uc124\uc815 \ubc0f \uae30\ubcf8 \uc2e4\ud589","text":"\uae30\ub2a5 Windows macOS \uc124\uba85 \ud604\uc7ac \ud3f4\ub354 \uc5f4\uae30 <code>code .</code> <code>code .</code> \ud130\ubbf8\ub110\uc5d0\uc11c \ud604\uc7ac \ub514\ub809\ud1a0\ub9ac\ub97c VS Code\ub85c \uc5f4\uae30 (\ub2e8\ucd95\ud0a4 \uc544\ub2d8) \uc561\uc158 \uac80\uc0c9 (Command Palette) Ctrl + Shift + P Cmd + Shift + P \ubaa8\ub4e0 VS Code \uba85\ub839 \uc2e4\ud589 (\uac00\uc7a5 \uc911\uc694) \ud30c\uc77c \ucc3e\uae30 (Go to File) Ctrl + P Cmd + P \ud504\ub85c\uc81d\ud2b8 \ub0b4 \ud30c\uc77c \uc774\ub984\uc744 \uac80\uc0c9\ud558\uc5ec \uc5f4\uae30 \ud1b5\ud569 \ud130\ubbf8\ub110 \ud1a0\uae00 Ctrl + ` Ctrl + ` \ub0b4\uc7a5 \ud130\ubbf8\ub110 \uc5f4\uae30/\ub2eb\uae30"},{"location":"ide/vscode_shortcut/#editing-multi-cursor","title":"\u270f\ufe0f \ud3b8\uc9d1 \ubc0f \ub2e4\uc911 \ucee4\uc11c (Editing &amp; Multi-Cursor)","text":"\uae30\ub2a5 Windows macOS \uc124\uba85 \ub2e4\uc74c \ub3d9\uc77c \ub2e8\uc5b4 \uc120\ud0dd Ctrl + D Cmd + D \uc120\ud0dd\ud55c \ub2e8\uc5b4\uc758 \ub2e4\uc74c \uc77c\uce58 \ud56d\ubaa9\uc5d0 \ucee4\uc11c \ud558\ub098 \ucd94\uac00 \ubaa8\ub4e0 \ub3d9\uc77c \ub2e8\uc5b4 \uc120\ud0dd Ctrl + Shift + L Cmd + Shift + L \ud30c\uc77c \ub0b4 \ubaa8\ub4e0 \uc77c\uce58 \ud56d\ubaa9\uc5d0 \ubaa8\ub4e0 \ucee4\uc11c \ucd94\uac00 \uc717\uc904/\uc544\ub7ab\uc904\uc5d0 \ucee4\uc11c \ucd94\uac00 Ctrl + Alt + Up/Down Option + Cmd + Up/Down \ubc29\ud5a5\ud0a4\ub97c \uc774\uc6a9\ud55c \ucee4\uc11c \ubcf5\uc81c \uc904 \uc774\ub3d9 (\uc704/\uc544\ub798) Alt + Up/Down Option + Up/Down \ud604\uc7ac \uc904 \uc804\uccb4\ub97c \uc704/\uc544\ub798\ub85c \uc774\ub3d9 \uc904 \ubcf5\uc0ac (\uc704/\uc544\ub798) Shift + Alt + Up/Down Shift + Option + Up/Down \ud604\uc7ac \uc904\uc744 \ubcf5\uc0ac\ud558\uc5ec \ucd94\uac00 \uc904 \uc0ad\uc81c Ctrl + Shift + K Cmd + Shift + K \ud604\uc7ac \uc904 \uc804\uccb4 \uc0ad\uc81c \uc8fc\uc11d \ucc98\ub9ac/\ud574\uc81c Ctrl + / Cmd + / \ud604\uc7ac \uc904\uc744 \uc8fc\uc11d\uc73c\ub85c \ucc98\ub9ac/\ud574\uc81c \ucf54\ub4dc \ud3ec\ub9f7\ud305 Shift + Alt + F Shift + Option + F \ubb38\uc11c \uc804\uccb4\uc758 \ucf54\ub4dc \uc2a4\ud0c0\uc77c \uc815\ub9ac"},{"location":"ide/vscode_shortcut/#navigation-analysis","title":"\ud83d\udee0\ufe0f \ud0d0\uc0c9 \ubc0f \ucf54\ub4dc \ubd84\uc11d (Navigation &amp; Analysis)","text":"\uae30\ub2a5 Windows macOS \uc124\uba85 \uc120\uc5b8\uc73c\ub85c \uc774\ub3d9 F12 F12 \ud568\uc218/\ubcc0\uc218\uc758 \uc815\uc758\ub41c \uc704\uce58\ub85c \uc774\ub3d9 \uc815\uc758 \ucc38\uc870 \ucc3e\uae30 Shift + F12 Shift + F12 \ud574\ub2f9 \uae30\ud638\uac00 \uc0ac\uc6a9\ub41c \ubaa8\ub4e0 \uc704\uce58\ub97c \ud655\uc778 \uc2ec\ubcfc \uc774\ub984 \ubcc0\uacbd (Rename) F2 F2 \ubcc0\uc218/\ud568\uc218 \ub4f1\uc758 \uc774\ub984\uc744 \ud504\ub85c\uc81d\ud2b8 \uc804\uccb4\uc5d0\uc11c \uc548\uc804\ud558\uac8c \ubcc0\uacbd \uc774\uc804 \ucee4\uc11c \uc704\uce58\ub85c Alt + Left Ctrl + - \ucee4\uc11c\uc758 \uc774\uc804 \uc791\uc5c5 \uc704\uce58\ub85c \ub418\ub3cc\uc544\uac00\uae30 \ud30c\uc77c \ub0b4 \uae30\ud638 \ucc3e\uae30 Ctrl + Shift + O Cmd + Shift + O \ud604\uc7ac \ud30c\uc77c \ub0b4 \uae30\ud638(\ud568\uc218, \ud074\ub798\uc2a4) \ubaa9\ub85d \uac80\uc0c9"},{"location":"ide/vscode_shortcut/#git-source-control","title":"\ud83d\udcc2 Git \ubc0f \uc18c\uc2a4 \uc81c\uc5b4 (Source Control)","text":"\uae30\ub2a5 Windows macOS \uc124\uba85 \uc18c\uc2a4 \uc81c\uc5b4 \uc5f4\uae30 Ctrl + Shift + G Ctrl + Shift + G \uc18c\uc2a4 \uc81c\uc5b4(Git) \uc0ac\uc774\ub4dc\ubc14 \uc5f4\uae30 \ub2e4\uc74c \ubcc0\uacbd \uc0ac\ud56d F7 F7 \ud30c\uc77c \ub0b4\uc5d0\uc11c \ub2e4\uc74c Diff(\ubcc0\uacbd\ub41c \ub0b4\uc6a9)\ub85c \uc774\ub3d9 \uc774\uc804 \ubcc0\uacbd \uc0ac\ud56d Shift + F7 Shift + F7 \ud30c\uc77c \ub0b4\uc5d0\uc11c \uc774\uc804 Diff(\ubcc0\uacbd\ub41c \ub0b4\uc6a9)\ub85c \uc774\ub3d9 \uc2a4\ud14c\uc774\uc9d5\ub41c \ud30c\uc77c \ucee4\ubc0b (\ubcc4\ub3c4 \uc124\uc815) (\ubcc4\ub3c4 \uc124\uc815) \uc18c\uc2a4 \uc81c\uc5b4 \uc0ac\uc774\ub4dc\ubc14\uc5d0\uc11c \ucee4\ubc0b \uba54\uc2dc\uc9c0 \uc785\ub825 \ud6c4 Ctrl + Enter\ub85c \ucee4\ubc0b"},{"location":"ide/vscode_shortcut/#debugging","title":"\ud83d\udc1e \ub514\ubc84\uae45 (Debugging)","text":"\uae30\ub2a5 Windows macOS \uc124\uba85 \ub514\ubc84\uae45 \uc2dc\uc791/\uacc4\uc18d F5 F5 \ub514\ubc84\uae45 \uc2dc\uc791 \ub610\ub294 \uc911\ub2e8\uc810\uc5d0\uc11c \uacc4\uc18d \uc9c4\ud589 \uc911\ub2e8\uc810 \uc124\uc815/\ud574\uc81c F9 F9 \ud604\uc7ac \uc904\uc5d0 \uc911\ub2e8\uc810(Breakpoint) \uc124\uc815/\ud574\uc81c \ud55c \ub2e8\uacc4\uc529 \uc2e4\ud589 (Step Over) F10 F10 \ud568\uc218 \ub0b4\ubd80\ub85c \uc9c4\uc785\ud558\uc9c0 \uc54a\uace0 \ub2e4\uc74c \uc904\ub85c \uc774\ub3d9 \ud568\uc218 \ub0b4\ubd80\ub85c \uc9c4\uc785 (Step Into) F11 F11 \ud568\uc218 \ud638\ucd9c \ub0b4\ubd80\ub85c \uc9c4\uc785"},{"location":"k8s/cheatsheet/","title":"\u2638\ufe0f Kubernetes Cheat Sheet","text":""},{"location":"k8s/cheatsheet/#1-shell-autocomplete","title":"\ud83d\ude80 1. \uc258 \uc790\ub3d9\uc644\uc131 \uc124\uc815 (Shell Autocomplete)","text":"<p>\uac00\uc7a5 \uba3c\uc800 \uc124\uc815\ud574\uc57c \ud560 \ud544\uc218 \uae30\ub2a5\uc785\ub2c8\ub2e4.</p>"},{"location":"k8s/cheatsheet/#bash","title":"bash","text":"<pre><code>source &lt;(kubectl completion bash) # \ud604\uc7ac \uc138\uc158\uc5d0 \uc801\uc6a9\necho \"source &lt;(kubectl completion bash)\" &gt;&gt; ~/.bashrc # \uc601\uad6c \uc801\uc6a9\nalias k=kubectl # 'k' \ub2e8\ucd95\ud0a4 \uc124\uc815\ncomplete -o default -F __start_kubectl k # 'k' \ub2e8\ucd95\ud0a4\uc5d0\ub3c4 \uc790\ub3d9\uc644\uc131 \uc801\uc6a9\n</code></pre>"},{"location":"k8s/cheatsheet/#zsh","title":"zsh","text":"<pre><code>source &lt;(kubectl completion zsh)  # set up autocomplete in zsh into the current shell\necho '[[ $commands[kubectl] ]] &amp;&amp; source &lt;(kubectl completion zsh)' &gt;&gt; ~/.zshrc # add autocomplete permanently to your zsh shell\nalias k=kubectl\ncomplete -o default -F __start_kubectl k\n</code></pre>"},{"location":"k8s/cheatsheet/#2-config-context","title":"\ud83d\udcc2 2. \ud074\ub7ec\uc2a4\ud130 \ubc0f \ucee8\ud14d\uc2a4\ud2b8 \uad00\ub9ac (Config &amp; Context)","text":"<p>\uc5ec\ub7ec \ud074\ub7ec\uc2a4\ud130\uc640 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uad00\ub9ac\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>kubectl config view                        # \uc804\uccb4 kubeconfig \uc124\uc815 \ud655\uc778\nkubectl config get-contexts                # \ucee8\ud14d\uc2a4\ud2b8 \ubaa9\ub85d \ud655\uc778\nkubectl config current-context             # \ud604\uc7ac \ucee8\ud14d\uc2a4\ud2b8 \ud655\uc778\nkubectl config use-context &lt;name&gt;          # \ucee8\ud14d\uc2a4\ud2b8 \ubcc0\uacbd\nkubectl config set-context --current --namespace=&lt;ns&gt;  # \uae30\ubcf8 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \ubcc0\uacbd (\ub9e4\ubc88 -n \uc785\ub825 \uc0dd\ub7b5)\nkubectl api-resources                      # \uc0ac\uc6a9 \uac00\ub2a5\ud55c \ub9ac\uc18c\uc2a4 \uc885\ub958 \ubc0f \ub2e8\ucd95\uc5b4(Shortnames) \ud655\uc778\nkubectl api-versions                       # \uc0ac\uc6a9 \uac00\ub2a5\ud55c API \uadf8\ub8f9 \ubc84\uc804 \ud655\uc778\n</code></pre>"},{"location":"k8s/cheatsheet/#3-create-dry-run","title":"\ud83d\udee0 3. \ub9ac\uc18c\uc2a4 \uc0dd\uc131 (Create &amp; Dry Run)","text":"<p>Best Practice: YAML \ud30c\uc77c\uc744 \uc9c1\uc811 \uc9dc\uc9c0 \ub9d0\uace0, \uba85\ub839\uc5b4\ub85c \ubf08\ub300\ub97c \ub9cc\ub4e0 \ud6c4 \uc218\uc815\ud558\uc138\uc694. (<code>--dry-run=client -o yaml</code>)</p> \ub9ac\uc18c\uc2a4 \uba85\ub839\uc5b4 \ud15c\ud50c\ub9bf Pod <code>k run nginx --image=nginx --restart=Never --dry-run=client -o yaml &gt; pod.yaml</code> Deployment <code>k create deploy web --image=nginx --replicas=3 --dry-run=client -o yaml &gt; deploy.yaml</code> Service <code>k expose deploy web --port=80 --target-port=8080 --type=NodePort --dry-run=client -o yaml &gt; svc.yaml</code> CronJob <code>k create cronjob my-job --image=busybox --schedule=\"*/1 * * * *\" --dry-run=client -o yaml &gt; cron.yaml</code> Job <code>k create job my-job --image=busybox --dry-run=client -o yaml &gt; job.yaml</code> Secret <code>k create secret generic my-pass --from-literal=pwd=123 --dry-run=client -o yaml &gt; sec.yaml</code> ConfigMap <code>k create cm my-config --from-file=config.txt --dry-run=client -o yaml &gt; cm.yaml</code>"},{"location":"k8s/cheatsheet/#4-get-inspect","title":"\ud83d\udd0d 4. \uc870\ud68c \ubc0f \ud544\ud130\ub9c1 (Get &amp; Inspect)","text":""},{"location":"k8s/cheatsheet/#_1","title":"\uae30\ubcf8 \uc870\ud68c","text":"<pre><code>kubectl get all -n &lt;namespace&gt;   # \ud2b9\uc815 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc804\uccb4 \ub9ac\uc18c\uc2a4 \uc870\ud68c\nkubectl get po,svc,deploy        # \uc8fc\uc694 \ub9ac\uc18c\uc2a4\ub9cc \uace8\ub77c\uc11c \uc870\ud68c\nkubectl get po -A                # \ubaa8\ub4e0 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc758 Pod \uc870\ud68c\nkubectl get nodes -o wide        # \ub178\ub4dc OS, \ucee4\ub110 \ubc84\uc804, \ub0b4\ubd80 IP \ud655\uc778\nkubectl get events --sort-by=.metadata.creationTimestamp # \uc2dc\uac04\uc21c \uc774\ubca4\ud2b8 \uc870\ud68c (\ub514\ubc84\uae45\uc6a9)\n</code></pre>"},{"location":"k8s/cheatsheet/#formatting","title":"\ucd9c\ub825 \ud615\uc2dd (Formatting) &amp; \uc815\ub82c","text":"<pre><code>kubectl get po -o wide                       # IP, Node \uc815\ubcf4 \ud3ec\ud568\nkubectl get po --show-labels                 # \ub77c\ubca8 \uc815\ubcf4 \ud3ec\ud568\nkubectl get po -l app=nginx                  # \ud2b9\uc815 \ub77c\ubca8 \ud544\ud130\ub9c1\nkubectl get po --sort-by=.status.startTime   # \uc2e4\ud589 \uc2dc\uac04\uc21c \uc815\ub82c\nkubectl get po -o yaml &gt; backup.yaml         # YAML\ub85c \uc804\uccb4 \uc2a4\ud399 \ucd94\ucd9c\n</code></pre>"},{"location":"k8s/cheatsheet/#jsonpath","title":"JSONPath (\ub370\uc774\ud130 \ucd94\ucd9c)","text":"<pre><code># \ubaa8\ub4e0 \ub178\ub4dc\uc758 \uc774\ub984\ub9cc \ucd94\ucd9c\nkubectl get nodes -o jsonpath='{.items[*].metadata.name}'\n# \ud2b9\uc815 Pod\uc758 \ud658\uacbd\ubcc0\uc218 \ud655\uc778\nkubectl get po &lt;pod&gt; -o jsonpath='{.spec.containers[0].env}'\n</code></pre>"},{"location":"k8s/cheatsheet/#5-troubleshoot-logs","title":"\ud83e\ude7a 5. \ub514\ubc84\uae45 \ubc0f \ub85c\uadf8 (Troubleshoot &amp; Logs)","text":""},{"location":"k8s/cheatsheet/#_2","title":"\ub85c\uadf8 \ubd84\uc11d","text":"<pre><code>kubectl logs &lt;pod&gt;                           # \ub85c\uadf8 \ud655\uc778\nkubectl logs -f &lt;pod&gt;                        # \uc2e4\uc2dc\uac04 \ub85c\uadf8 (tail -f)\nkubectl logs &lt;pod&gt; -c &lt;container&gt;            # \ud2b9\uc815 \ucee8\ud14c\uc774\ub108 \ub85c\uadf8 (Multi-container)\nkubectl logs &lt;pod&gt; --previous                # \uc774\uc804 \ucee8\ud14c\uc774\ub108(Crash\ub09c \uc9c1\ud6c4) \ub85c\uadf8 \ud655\uc778\nkubectl logs -l app=backend --all-containers=true # \ud574\ub2f9 \ub77c\ubca8\uc744 \uac00\uc9c4 \ubaa8\ub4e0 Pod \ub85c\uadf8\n</code></pre>"},{"location":"k8s/cheatsheet/#_3","title":"\uc0c1\ud0dc \uc9c4\ub2e8","text":"<pre><code>kubectl describe pod &lt;pod&gt;                   # Pod \uc0c1\uc138 \uc0c1\ud0dc \ubc0f \uc774\ubca4\ud2b8(Events) \ud655\uc778 (\u2605\ud544\uc218)\nkubectl describe node &lt;node&gt;                 # \ub178\ub4dc \ub9ac\uc18c\uc2a4 \ubd80\uc871/\uc0c1\ud0dc \ud655\uc778\nkubectl top pods                             # Pod\ubcc4 CPU/Memory \uc0ac\uc6a9\ub7c9 (Metrics Server \ud544\uc694)\nkubectl top nodes                            # \ub178\ub4dc\ubcc4 \ub9ac\uc18c\uc2a4 \uc0ac\uc6a9\ub7c9\n</code></pre>"},{"location":"k8s/cheatsheet/#_4","title":"\uc811\uc18d \ubc0f \uc2e4\ud589","text":"<pre><code>kubectl exec -it &lt;pod&gt; -- /bin/bash          # \ucee8\ud14c\uc774\ub108 \uc258 \uc811\uc18d\nkubectl exec -it &lt;pod&gt; -- ls -F /app         # \uc811\uc18d \uc5c6\uc774 \uba85\ub839\uc5b4\ub9cc \uc2e4\ud589\nkubectl cp &lt;pod&gt;:/path/file ./local_file     # \ud30c\uc77c \ubcf5\uc0ac (Pod -&gt; Local)\nkubectl cp ./local_file &lt;pod&gt;:/path/file     # \ud30c\uc77c \ubcf5\uc0ac (Local -&gt; Pod)\n</code></pre>"},{"location":"k8s/cheatsheet/#pod","title":"\uc784\uc2dc \ub514\ubc84\uae45 Pod \uc2e4\ud589","text":"<pre><code># \ub124\ud2b8\uc6cc\ud06c \ud14c\uc2a4\ud2b8\uc6a9(curl, nslookup \ub4f1) \uc784\uc2dc Pod \uc2e4\ud589 \ud6c4 \uc0ad\uc81c\nkubectl run -it --rm debug --image=busybox --restart=Never -- sh\n</code></pre>"},{"location":"k8s/cheatsheet/#6-deploy-scale","title":"\ud83d\udd04 6. \uc571 \uad00\ub9ac \ubc0f \uc2a4\ucf00\uc77c\ub9c1 (Deploy &amp; Scale)","text":""},{"location":"k8s/cheatsheet/#_5","title":"\uc5c5\ub370\uc774\ud2b8 \ubc0f \ub864\ubc31","text":"<pre><code>kubectl set image deploy/&lt;name&gt; nginx=nginx:1.19 # \uc774\ubbf8\uc9c0 \ubc84\uc804 \uc5c5\ub370\uc774\ud2b8 (\ub864\ub9c1 \uc5c5\ub370\uc774\ud2b8)\nkubectl rollout status deploy/&lt;name&gt;         # \ubc30\ud3ec \uc9c4\ud589 \uc0c1\ud0dc \ud655\uc778\nkubectl rollout history deploy/&lt;name&gt;        # \ubc30\ud3ec \uc774\ub825(Revision) \ud655\uc778\nkubectl rollout undo deploy/&lt;name&gt;           # \ubc14\ub85c \uc774\uc804 \ubc84\uc804\uc73c\ub85c \ub864\ubc31\nkubectl rollout undo deploy/&lt;name&gt; --to-revision=2 # \ud2b9\uc815 \ubc84\uc804\uc73c\ub85c \ub864\ubc31\nkubectl rollout pause deploy/&lt;name&gt;          # \ubc30\ud3ec \uc77c\uc2dc \uc815\uc9c0\nkubectl rollout resume deploy/&lt;name&gt;         # \ubc30\ud3ec \uc7ac\uac1c\n</code></pre>"},{"location":"k8s/cheatsheet/#scaling","title":"\uc2a4\ucf00\uc77c\ub9c1 (Scaling)","text":"<pre><code>kubectl scale deploy/&lt;name&gt; --replicas=5     # \uc218\ub3d9 \uc2a4\ucf00\uc77c\ub9c1\nkubectl autoscale deploy/&lt;name&gt; --min=2 --max=10 --cpu-percent=80 # HPA(Auto Scaling) \uc124\uc815\n</code></pre>"},{"location":"k8s/cheatsheet/#7-networking","title":"\ud83c\udf10 7. \ub124\ud2b8\uc6cc\ud06c (Networking)","text":"<pre><code>kubectl get svc -o wide                      # \uc11c\ube44\uc2a4 ClusterIP, Selector \ud655\uc778\nkubectl get ing                              # \uc778\uadf8\ub808\uc2a4(Ingress) \uc8fc\uc18c \ud655\uc778\nkubectl get endpoints &lt;svc-name&gt;             # \uc11c\ube44\uc2a4\uc640 \uc5f0\uacb0\ub41c \uc2e4\uc81c Pod IP(Endpoint) \ud655\uc778\nkubectl port-forward &lt;pod&gt; 8080:80           # \ub85c\uceec \ud3ec\ud2b8 \ud3ec\uc6cc\ub529 (Pod)\nkubectl port-forward svc/&lt;name&gt; 8080:80      # \ub85c\uceec \ud3ec\ud2b8 \ud3ec\uc6cc\ub529 (Service)\n</code></pre>"},{"location":"k8s/cheatsheet/#8-delete-clean-up","title":"\ud83d\uddd1 8. \uc0ad\uc81c \ubc0f \uc815\ub9ac (Delete &amp; Clean up)","text":"<pre><code>kubectl delete -f filename.yaml              # \ud30c\uc77c \uae30\uc900 \uc0ad\uc81c\nkubectl delete po &lt;pod&gt;                      # Pod \uc0ad\uc81c\nkubectl delete po -l app=nginx               # \ub77c\ubca8 \uae30\uc900 \uc77c\uad04 \uc0ad\uc81c\nkubectl delete ns &lt;name&gt;                     # \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc0ad\uc81c (\ub0b4\ubd80 \ub9ac\uc18c\uc2a4 \uc804\uccb4 \uc0ad\uc81c\ub428)\n# [\uac15\uc81c \uc0ad\uc81c] \uc885\ub8cc(Terminating) \uc0c1\ud0dc\uc5d0\uc11c \uba48\ucd98 Pod \uc0ad\uc81c\nkubectl delete pod &lt;pod&gt; --grace-period=0 --force\n</code></pre>"},{"location":"k8s/cheatsheet/#9-node-maintenance-","title":"\ud83c\udfd7 9. \ub178\ub4dc \uc720\uc9c0\ubcf4\uc218 (Node Maintenance) - \uad00\ub9ac\uc790\uc6a9","text":"<pre><code>kubectl cordon &lt;node&gt;                        # \uc2a4\ucf00\uc904\ub9c1 \uc911\ub2e8 (\uc2e0\uaddc Pod \ubc30\uce58 \uae08\uc9c0)\nkubectl uncordon &lt;node&gt;                      # \uc2a4\ucf00\uc904\ub9c1 \uc7ac\uac1c\nkubectl drain &lt;node&gt; --ignore-daemonsets     # \ub178\ub4dc \ube44\uc6b0\uae30 (\uae30\uc874 Pod\ub97c \ub2e4\ub978 \ub178\ub4dc\ub85c \uc774\ub3d9)\nkubectl taint nodes &lt;node&gt; key=value:NoSchedule # \ud14c\uc778\ud2b8 \uc124\uc815 (\ud2b9\uc815 Pod\ub9cc \uc624\uac8c \ud568)\n</code></pre>"},{"location":"k8s/cheatsheet/#10-security-auth-tokens","title":"\ud83d\udd10 10. \ubcf4\uc548, \uad8c\ud55c \ubc0f \ud1a0\ud070 \uad00\ub9ac (Security, Auth &amp; Tokens)","text":"<p>\ub0b4\ubd80 \uad8c\ud55c \ud655\uc778(RBAC)\uacfc \ub9cc\ub8cc\ub41c \ud074\ub77c\uc6b0\ub4dc(CSP) \uc778\uc99d \ud1a0\ud070\uc744 \uac31\uc2e0\ud558\ub294 \ud544\uc218 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4.</p>"},{"location":"k8s/cheatsheet/#_6","title":"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 \uc5ed\ud560 \ud655\uc778","text":"<pre><code>kubectl get serviceaccounts                  # \uc11c\ube44\uc2a4 \uc5b4\uce74\uc6b4\ud2b8 \ubaa9\ub85d\nkubectl get clusterroles                     # \ud074\ub7ec\uc2a4\ud130 \uad8c\ud55c \ubaa9\ub85d\n</code></pre>"},{"location":"k8s/cheatsheet/#csp-token-expired","title":"\u2601\ufe0f \ud074\ub77c\uc6b0\ub4dc(CSP) \uc778\uc99d \ud1a0\ud070 \uac31\uc2e0 (Token Expired \ud574\uacb0)","text":"<p>\"You must be logged in to the server\" \uc5d0\ub7ec\uac00 \ub730 \ub54c, \uac01 \ud074\ub77c\uc6b0\ub4dc CLI\ub85c <code>kubeconfig</code>\ub97c \uac31\uc2e0\ud569\ub2c8\ub2e4.</p> <pre><code># AWS EKS (Amazon)\naws eks update-kubeconfig --name &lt;cluster-name&gt; --region &lt;region&gt;\n\n# GCP GKE (Google)\ngcloud container clusters get-credentials &lt;cluster-name&gt; --region &lt;region&gt;\n\n# Azure AKS (Microsoft)\naz aks get-credentials --resource-group &lt;rg-name&gt; --name &lt;cluster-name&gt;\n</code></pre>"},{"location":"k8s/cheatsheet/#service-account","title":"\ud83d\udd11 \uc11c\ube44\uc2a4 \uc5b4\uce74\uc6b4\ud2b8 \ud1a0\ud070 \uad00\ub9ac (Service Account)","text":"<p>CI/CD \uc5f0\ub3d9\uc774\ub098 \ub300\uc2dc\ubcf4\ub4dc \ub85c\uadf8\uc778\uc6a9 \ud1a0\ud070\uc744 \ubc1c\uae09\ud569\ub2c8\ub2e4. (K8s v1.24+ \ud544\uc218)</p> <pre><code># [Modern] \ud1a0\ud070 \uc989\uc2dc \ubc1c\uae09 (\uc720\ud6a8\uae30\uac04 \uc124\uc815 \uac00\ub2a5)\nkubectl create token &lt;service-account-name&gt; --duration=24h\n\n# [Legacy] \uae30\uc874 Secret \uae30\ubc18 \ud1a0\ud070 \ucd94\ucd9c (Base64 \ub514\ucf54\ub529)\nkubectl get secret &lt;secret-name&gt; -o jsonpath='{.data.token}' | base64 --decode\n</code></pre>"},{"location":"k8s/cheatsheet/#rbac-check","title":"\ud83d\udee1\ufe0f \uad8c\ud55c \ud655\uc778 (RBAC Check)","text":"<p>\ud604\uc7ac \uc0ac\uc6a9\uc790\ub098 \ud2b9\uc815 \uacc4\uc815\uc774 \uc791\uc5c5\uc744 \uc218\ud589\ud560 \uad8c\ud55c\uc774 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p> <pre><code># \"\ub0b4\uac00 \ubc30\ud3ec(Deployment)\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub098?\" (Yes/No \ubc18\ud658)\nkubectl auth can-i create deployments\n\n# \ud2b9\uc815 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c \uad8c\ud55c \ud655\uc778\nkubectl auth can-i delete pods -n &lt;namespace&gt;\n\n# [\uad00\ub9ac\uc790\uc6a9] \ud2b9\uc815 \uc11c\ube44\uc2a4 \uc5b4\uce74\uc6b4\ud2b8(sa)\uac00 \uad8c\ud55c\uc774 \uc788\ub294\uc9c0 \ud655\uc778 (impersonate)\nkubectl auth can-i get nodes --as=system:serviceaccount:&lt;ns&gt;:&lt;sa-name&gt;\n</code></pre>"},{"location":"k8s/cheatsheet/#kubeadm","title":"\ud83c\udfab \ud074\ub7ec\uc2a4\ud130 \uc870\uc778 \ud1a0\ud070 (Kubeadm \uc804\uc6a9)","text":"<p>\uc628\ud504\ub808\ubbf8\uc2a4(On-premise) \ud658\uacbd\uc5d0\uc11c \ub178\ub4dc\ub97c \ucd94\uac00\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code># \uc720\ud6a8\ud55c \uc870\uc778 \ud1a0\ud070 \ubaa9\ub85d \ud655\uc778\nkubeadm token list\n\n# \ud1a0\ud070\uc774 \ub9cc\ub8cc\ub418\uc5c8\uc744 \ub54c \uc7ac\uc0dd\uc131 (\uc870\uc778 \uba85\ub839\uc5b4 \uc804\uccb4 \ucd9c\ub825)\nkubeadm token create --print-join-command\n</code></pre>"},{"location":"k8s/cheatsheet/#tips","title":"\ud83d\udca1 \ud301 (Tips)","text":"<ul> <li>\ub9ac\uc18c\uc2a4\uac00 \uc548 \uc9c0\uc6cc\uc9c8 \ub54c: <code>finalizers</code> \uc124\uc815 \ub54c\ubb38\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4. <code>kubectl edit</code>\uc73c\ub85c <code>finalizers</code> \ud56d\ubaa9\uc744 \uc9c0\uc6b0\uba74 \uc0ad\uc81c\ub429\ub2c8\ub2e4.</li> <li>YAML \ucd94\ucd9c \uc2b5\uad00: \uc6b4\uc601 \uc911\uc778 \ub9ac\uc18c\uc2a4\ub97c \uc218\uc815\ud558\uae30 \uc804\uc5d0 \ubc18\ub4dc\uc2dc <code>kubectl get &lt;resource&gt; -o yaml &gt; backup.yaml</code>\ub85c \ubc31\uc5c5\ud558\uc138\uc694.</li> <li>Watch \ubaa8\ub4dc: \ubc30\ud3ec \ud6c4 <code>kubectl get pods -w</code>\ub97c \ucf1c\ub450\uba74 \uc0c1\ud0dc \ubcc0\ud654\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \ubcfc \uc218 \uc788\uc5b4 \ub2f5\ub2f5\ud568\uc774 \uc904\uc5b4\ub4ed\ub2c8\ub2e4.</li> </ul>"},{"location":"k8s/cheatsheet/#helm-essential-cheat-sheet-bonus","title":"\u2693 Helm Essential Cheat Sheet (Bonus)","text":"<p>Kubernetes\uc758 <code>apt</code>\ub098 <code>yum</code> \uac19\uc740 \ud328\ud0a4\uc9c0 \ub9e4\ub2c8\uc800, Helm\uc758 \ud544\uc218 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4.</p>"},{"location":"k8s/cheatsheet/#1-repo","title":"1. \uc800\uc7a5\uc18c(Repo) \uad00\ub9ac","text":"<p>\ucc28\ud2b8(\ud328\ud0a4\uc9c0)\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud560 \uc800\uc7a5\uc18c\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4.</p> <pre><code>helm repo add &lt;name&gt; &lt;url&gt;       # \uc800\uc7a5\uc18c \ucd94\uac00 (\uc608: bitnami https://charts.bitnami.com/bitnami)\nhelm repo update                 # \uc800\uc7a5\uc18c \ucd5c\uc2e0 \uc815\ubcf4 \uac31\uc2e0 (apt update\uc640 \ub3d9\uc77c)\nhelm repo list                   # \ub4f1\ub85d\ub41c \uc800\uc7a5\uc18c \ubaa9\ub85d \ud655\uc778\nhelm search repo &lt;keyword&gt;       # \ucc28\ud2b8 \uac80\uc0c9 (\uc608: helm search repo nginx)\n</code></pre>"},{"location":"k8s/cheatsheet/#2-install-manage","title":"2. \uc124\uce58 \ubc0f \uad00\ub9ac (Install &amp; Manage)","text":"<p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158(Release)\uc744 \uc124\uce58\ud558\uace0 \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4.</p> <pre><code># \ucc28\ud2b8 \uc124\uce58 (\uae30\ubcf8)\nhelm install &lt;release-name&gt; &lt;repo/chart&gt;\n# \uc608: helm install my-nginx bitnami/nginx\n\n# \ud2b9\uc815 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \uc124\uce58\ud558\uba70 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc790\ub3d9 \uc0dd\uc131\nhelm install &lt;release-name&gt; &lt;repo/chart&gt; -n &lt;ns&gt; --create-namespace\n\n# \uc124\uc815 \uac12(values.yaml)\uc744 \ubcc0\uacbd\ud558\uba70 \uc124\uce58\nhelm install &lt;release-name&gt; &lt;repo/chart&gt; --set replicaCount=3\n\n# \uc0ac\uc6a9\uc790 \uc815\uc758 values \ud30c\uc77c\ub85c \uc124\uce58\nhelm install &lt;release-name&gt; &lt;repo/chart&gt; -f values.yaml\n\n# \ubc30\ud3ec\ub41c \uc571 \ubaa9\ub85d \ud655\uc778\nhelm list -A  # \ubaa8\ub4e0 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc870\ud68c\n</code></pre>"},{"location":"k8s/cheatsheet/#3-upgrade-uninstall","title":"3. \uc5c5\uadf8\ub808\uc774\ub4dc \ubc0f \uc0ad\uc81c (Upgrade &amp; Uninstall)","text":"<pre><code># \ucc28\ud2b8 \ubc84\uc804 \uc5c5\uadf8\ub808\uc774\ub4dc \ub610\ub294 \uc124\uc815 \ubcc0\uacbd\nhelm upgrade &lt;release-name&gt; &lt;repo/chart&gt; -f new-values.yaml\n\n# \ubc30\ud3ec\ub41c \uc571 \uc0ad\uc81c\nhelm uninstall &lt;release-name&gt;\n</code></pre>"},{"location":"k8s/cheatsheet/#4-debug-verify","title":"4. \ub514\ubc84\uae45 \ubc0f \uac80\uc99d (Debug &amp; Verify)","text":"<p>Pro Tip: <code>helm template</code>\uc740 \uc2e4\uc81c\ub85c \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc124\uce58\ud558\uc9c0 \uc54a\uace0, \uc0dd\uc131\ub420 YAML \ud30c\uc77c\ub9cc \ubbf8\ub9ac \ubcf4\uc5ec\uc90d\ub2c8\ub2e4. (<code>--dry-run</code>\uacfc \uc720\uc0ac)</p> <pre><code># \ub80c\ub354\ub9c1\ub420 YAML \ubbf8\ub9ac\ubcf4\uae30 (\uc124\uce58 \uc804 \uac80\uc99d \ud544\uc218 \ub2e8\uacc4)\nhelm template &lt;release-name&gt; &lt;repo/chart&gt; -f values.yaml &gt; result.yaml\n\n# \ud604\uc7ac \uc2e4\ud589 \uc911\uc778 \ub9b4\ub9ac\uc988\uc758 \uc801\uc6a9\ub41c values \uac12 \ud655\uc778\nhelm get values &lt;release-name&gt;\n\n# \ud604\uc7ac \uc2e4\ud589 \uc911\uc778 \ub9b4\ub9ac\uc988\uc758 \uc804\uccb4 Manifest \ud655\uc778\nhelm get manifest &lt;release-name&gt;\n\n# \ub9b4\ub9ac\uc988\uc758 \ubc30\ud3ec \uc774\ub825 \ubc0f \uc0c1\ud0dc \ud655\uc778\nhelm status &lt;release-name&gt;\n</code></pre>"},{"location":"network/tip/check-domain-ip/","title":"\ub3c4\uba54\uc778(URL)\uc758 \uc2e4\uc81c IP \uc8fc\uc18c \ud655\uc778","text":"<p>\uc0ac\ub0b4 \uc11c\ubc84 \ub3c4\uba54\uc778\uc774 \uc2e4\uc81c \uc5b4\ub5a4 IP\ub97c \uac00\ub9ac\ud0a4\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"network/tip/check-domain-ip/#a-nslookup","title":"\ubc29\ubc95 A: nslookup (\uac00\uc7a5 \uc815\ud655\ud568)","text":"<pre><code># DNS \uc11c\ubc84\uc5d0 \ub4f1\ub85d\ub41c \uc815\uc2dd IP \uc870\ud68c\nnslookup harbor.internal.company.com\n</code></pre>"},{"location":"network/tip/check-domain-ip/#b-ping","title":"\ubc29\ubc95 B: ping (\uac04\ub2e8 \ud655\uc778)","text":"<pre><code># \uc5f0\uacb0 \ud655\uc778\uacfc \ub3d9\uc2dc\uc5d0 IP \ud655\uc778 \uac00\ub2a5\nping harbor.internal.company.com\n</code></pre>"},{"location":"network/tip/check-domain-ip/#check-point","title":"Check Point","text":"<ul> <li>\uc0ac\ub0b4 \ub3c4\uba54\uc778(internal \ub4f1)\uc740 \ubc18\ub4dc\uc2dc \uc0ac\ub0b4\ub9dd(VPN)\uc5d0 \uc5f0\uacb0\ub41c \uc0c1\ud0dc\uc5ec\uc57c IP\uac00 \ubcf4\uc785\ub2c8\ub2e4.</li> <li>\uc870\ud68c\ub41c IP\ub294 \uc2e4\uc81c \uc11c\ubc84\uac00 \uc544\ub2c8\ub77c \uc55e\ub2e8\uc758 \ub85c\ub4dc \ubc38\ub7f0\uc11c(L4) IP\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4 (\ubc29\ud654\ubcbd \uc2e0\uccad \uc2dc \uc774 IP \uc0ac\uc6a9)</li> </ul>"},{"location":"openstack/cheatsheet/","title":"\ud83d\udcd8 OpenStack CLI \uce58\ud2b8\uc2dc\ud2b8 (Cheat Sheet)","text":"<p>OpenStack \uc6b4\uc601 \ubc0f \uad00\ub9ac\ub97c \uc704\ud55c \ud544\uc218 \uba85\ub839\uc5b4 \ubaa8\uc74c\uc785\ub2c8\ub2e4.</p> <p>\ubc94\ub840:</p> <ul> <li><code>&lt;\uac12&gt;</code> : \ud544\uc218 \uc785\ub825 \uac12 (\uc608: ID, \uc774\ub984)</li> <li><code>[\uc635\uc158]</code> : \uc120\ud0dd \uc785\ub825 \uac12</li> </ul>"},{"location":"openstack/cheatsheet/#0","title":"0. \ud658\uacbd \uc124\uc815 (\ud544\uc218)","text":"<p>\uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uae30 \uc804, \ubc18\ub4dc\uc2dc \uc778\uc99d \uc815\ubcf4\ub97c \ub85c\ub4dc\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code># \uc778\uc99d \ud30c\uc77c \ub85c\ub4dc\nsource admin-openrc.sh\n\n# \ud1a0\ud070 \uc798 \ubc1b\uc544\uc84c\ub294\uc9c0 \ud655\uc778\nopenstack token issue\n</code></pre>"},{"location":"openstack/cheatsheet/#1-server","title":"1. \uc778\uc2a4\ud134\uc2a4 (Server) \uad00\ub9ac","text":"<p>\uac00\uc0c1\uba38\uc2e0(VM)\uc758 \uc0dd\uba85\uc8fc\uae30\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4.</p> \uc791\uc5c5 \uba85\ub839\uc5b4 \uc124\uba85 \ubaa9\ub85d \uc870\ud68c <code>openstack server list --all-projects</code> \ubaa8\ub4e0 \ud504\ub85c\uc81d\ud2b8\uc758 VM \ubaa9\ub85d \uc870\ud68c \uc0c1\uc138 \uc870\ud68c <code>openstack server show &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt;</code> \ud2b9\uc815 VM\uc758 \uc0c1\uc138 \uc815\ubcf4(IP, \ud638\uc2a4\ud2b8, \uc0c1\ud0dc) \uc870\ud68c \ub85c\uadf8 \ud655\uc778 <code>openstack console log show &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt;</code> \ubd80\ud305 \ub85c\uadf8(Console Log) \ud655\uc778 (\ub514\ubc84\uae45\uc6a9) \ucf58\uc194 URL <code>openstack console url show &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt;</code> \uc6f9 VNC \uc811\uc18d \uc8fc\uc18c \ud655\uc778 \uc0dd\uc131 <code>openstack server create --image &lt;\uc774\ubbf8\uc9c0&gt; --flavor &lt;\ud50c\ub808\uc774\ubc84&gt; --network &lt;\ub124\ud2b8\uc6cc\ud06c&gt; &lt;VM\uc774\ub984&gt;</code> \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 \uc0ad\uc81c <code>openstack server delete &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt;</code> \uc778\uc2a4\ud134\uc2a4 \uc0ad\uc81c"},{"location":"openstack/cheatsheet/#_1","title":"\u26a1 \uc804\uc6d0 \uad00\ub9ac (\uc911\uc694)","text":"<pre><code># \ubd80\ub4dc\ub7ec\uc6b4 \uc7ac\ubd80\ud305 (OS \ub808\ubca8 \uc7ac\ubd80\ud305)\nopenstack server reboot &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt;\n\n# \uac15\uc81c \uc7ac\ubd80\ud305 (\uc804\uc6d0 \uaed0\ub2e4 \ucf1c\uae30 - GPU \uc624\ub958 \uc2dc \ud544\uc218)\nopenstack server reboot --hard &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt;\n\n# \uc778\uc2a4\ud134\uc2a4 \uc77c\uc2dc \uc815\uc9c0 \ud574\uc81c (Paused \uc0c1\ud0dc \ud480\uae30)\nopenstack server unpause &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt;\n</code></pre>"},{"location":"openstack/cheatsheet/#2-image","title":"2. \uc774\ubbf8\uc9c0 (Image) \uad00\ub9ac","text":"<p>Glance \uc11c\ube44\uc2a4 \uad00\ub828 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4.</p> \uc791\uc5c5 \uba85\ub839\uc5b4 \ubaa9\ub85d \uc870\ud68c <code>openstack image list</code> \uc0c1\uc138 \uc870\ud68c <code>openstack image show &lt;\uc774\ubbf8\uc9c0_ID&gt;</code> \uc774\ubbf8\uc9c0 \ub4f1\ub85d <code>openstack image create \"&lt;\uc774\ub984&gt;\" --file &lt;\ud30c\uc77c\uacbd\ub85c&gt; --disk-format qcow2 --container-format bare --public</code> \uc18d\uc131 \uc218\uc815 <code>openstack image set --property &lt;\ud0a4&gt;=&lt;\uac12&gt; &lt;\uc774\ubbf8\uc9c0_ID&gt;</code> \uc0ad\uc81c <code>openstack image delete &lt;\uc774\ubbf8\uc9c0_ID&gt;</code>"},{"location":"openstack/cheatsheet/#gpu","title":"\ud83d\udd27 GPU/\uac00\uc0c1\ud654 \uad00\ub828 \uc18d\uc131 \uc124\uc815 (\ud544\uc218)","text":"<pre><code># \uba38\uc2e0 \ud0c0\uc785 Q35 \uc124\uc815 (PCIe Passthrough \ud544\uc218)\nopenstack image set --property hw_machine_type=q35 &lt;\uc774\ubbf8\uc9c0_ID&gt;\n\n# \ud558\uc774\ud37c\ubc14\uc774\uc800 \uc228\uae30\uae30 (RTX \uacc4\uc5f4 \ud544\uc218)\nopenstack image set --property hw:kvm_hidden=true &lt;\uc774\ubbf8\uc9c0_ID&gt;\n\n# Guest Agent \ud65c\uc131\ud654 (IP \ud655\uc778\uc6a9)\nopenstack image set --property hw_qemu_guest_agent=yes &lt;\uc774\ubbf8\uc9c0_ID&gt;\n</code></pre>"},{"location":"openstack/cheatsheet/#3-flavor","title":"3. \ud50c\ub808\uc774\ubc84 (Flavor) \uad00\ub9ac","text":"<p>\uc778\uc2a4\ud134\uc2a4\uc758 \uc0ac\uc591(CPU, RAM, Disk)\uc744 \uc815\uc758\ud569\ub2c8\ub2e4.</p> \uc791\uc5c5 \uba85\ub839\uc5b4 \ubaa9\ub85d \uc870\ud68c <code>openstack flavor list</code> \uc0dd\uc131 <code>openstack flavor create --ram &lt;MB&gt; --disk &lt;GB&gt; --vcpus &lt;\uac1c\uc218&gt; &lt;\ud50c\ub808\uc774\ubc84_\uc774\ub984&gt;</code> \uc0ad\uc81c <code>openstack flavor delete &lt;\ud50c\ub808\uc774\ubc84_ID&gt;</code>"},{"location":"openstack/cheatsheet/#extra-specs","title":"\ud83d\udd27 \ud50c\ub808\uc774\ubc84 \uc18d\uc131 (Extra Specs)","text":"<pre><code># \uc18d\uc131 \uc124\uc815 (GPU\uc6a9)\nopenstack flavor set --property hw:pci_numa_affinity_policy=required &lt;\ud50c\ub808\uc774\ubc84_ID&gt;\n\n# \uc18d\uc131 \ud655\uc778\nopenstack flavor show &lt;\ud50c\ub808\uc774\ubc84_ID&gt;\n</code></pre>"},{"location":"openstack/cheatsheet/#4-network","title":"4. \ub124\ud2b8\uc6cc\ud06c (Network) \uad00\ub9ac","text":"<p>Neutron \uc11c\ube44\uc2a4 \uad00\ub828 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4.</p> \uc791\uc5c5 \uba85\ub839\uc5b4 \uc124\uba85 \ub124\ud2b8\uc6cc\ud06c \ubaa9\ub85d <code>openstack network list</code> \ub0b4\ubd80/\uc678\ubd80 \ub124\ud2b8\uc6cc\ud06c \ubaa9\ub85d \uc11c\ube0c\ub137 \ubaa9\ub85d <code>openstack subnet list</code> IP \ub300\uc5ed \ud655\uc778 \ubcf4\uc548\uadf8\ub8f9 \ubaa9\ub85d <code>openstack security group list</code> \ubc29\ud654\ubcbd \uadf8\ub8f9 \ud655\uc778 \uaddc\uce59 \ucd94\uac00 <code>openstack security group rule create --proto tcp --dst-port &lt;\ud3ec\ud2b8&gt; &lt;\uadf8\ub8f9ID&gt;</code> \ud3ec\ud2b8 \uac1c\ubc29 (\uc608: 22, 80)"},{"location":"openstack/cheatsheet/#floating-ip-ip","title":"\ud83c\udf10 Floating IP (\uacf5\uc778 IP)","text":"<pre><code># Floating IP \ubaa9\ub85d \uc870\ud68c\nopenstack floating ip list\n\n# \uc0c8 IP \uc0dd\uc131 (\ud560\ub2f9)\nopenstack floating ip create &lt;\uc678\ubd80_\ub124\ud2b8\uc6cc\ud06c_\uc774\ub984&gt;\n\n# \uc778\uc2a4\ud134\uc2a4\uc5d0 \uc5f0\uacb0\nopenstack server add floating ip &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt; &lt;IP\uc8fc\uc18c&gt;\n</code></pre>"},{"location":"openstack/cheatsheet/#5-admin","title":"5. \uc2dc\uc2a4\ud15c \ubc0f \ud558\uc774\ud37c\ubc14\uc774\uc800 \uad00\ub9ac (Admin \uc804\uc6a9)","text":"<p>\uc6b4\uc601\uc790(Operator)\uac00 \ud074\ub7ec\uc2a4\ud130 \uc0c1\ud0dc\ub97c \uc810\uac80\ud560 \ub54c \uc501\ub2c8\ub2e4.</p> \uc791\uc5c5 \uba85\ub839\uc5b4 \uc124\uba85 \ud558\uc774\ud37c\ubc14\uc774\uc800 \uc0c1\ud0dc <code>openstack hypervisor list</code> \uac01 \ub178\ub4dc\uc758 UP/DOWN \uc0c1\ud0dc \ud655\uc778 \ucef4\ud4e8\ud2b8 \uc11c\ube44\uc2a4 <code>openstack compute service list</code> nova-compute \uc11c\ube44\uc2a4 \uc0c1\ud0dc \ud655\uc778 \uc790\uc6d0 \uc0ac\uc6a9\ub7c9 <code>openstack hypervisor stats show</code> \uc804\uccb4 \ud074\ub7ec\uc2a4\ud130 \uc790\uc6d0 \ud1b5\uacc4 \ub178\ub4dc \uc0c1\uc138 \uc815\ubcf4 <code>openstack hypervisor show &lt;\ud638\uc2a4\ud2b8\uba85&gt;</code> \ud2b9\uc815 \ub178\ub4dc\uc758 CPU/RAM \uc0c1\uc138 \uc2a4\ud399"},{"location":"openstack/cheatsheet/#6-volume","title":"6. \ubcfc\ub968 (Volume) \uad00\ub9ac","text":"<p>Cinder \uc11c\ube44\uc2a4 \uad00\ub828 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4.</p> \uc791\uc5c5 \uba85\ub839\uc5b4 \ubaa9\ub85d \uc870\ud68c <code>openstack volume list</code> \uc0dd\uc131 <code>openstack volume create --size &lt;GB&gt; &lt;\ubcfc\ub968\uc774\ub984&gt;</code> \uc5f0\uacb0 <code>openstack server add volume &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt; &lt;\ubcfc\ub968_ID&gt;</code> \ud574\uc81c <code>openstack server remove volume &lt;\uc778\uc2a4\ud134\uc2a4_ID&gt; &lt;\ubcfc\ub968_ID&gt;</code>"},{"location":"openstack/cheatsheet/#7-placement-resource","title":"7. Placement (Resource) \uad00\ub9ac","text":"<p>Placement \uc11c\ube44\uc2a4 \uad00\ub828 \uba85\ub839\uc5b4\ub85c, \ubb3c\ub9ac \ub178\ub4dc \ubc0f GPU \uac19\uc740 \ud2b9\uc218 \uc790\uc6d0\uc758 \uc7ac\uace0(Inventory)\uc640 \ud560\ub2f9(Allocation) \uc0c1\ud0dc\ub97c \ud655\uc778\ud569\ub2c8\ub2e4.</p> \uc791\uc5c5 \uba85\ub839\uc5b4 \uc124\uba85 RP \ubaa9\ub85d \uc870\ud68c <code>openstack resource provider list</code> \ub4f1\ub85d\ub41c \ubaa8\ub4e0 \uc790\uc6d0 \uc81c\uacf5\uc790(Compute Node, GPU \ub4f1) \ubaa9\ub85d \uc7ac\uace0(Inventory) \ud655\uc778 <code>openstack resource provider inventory list &lt;RP_UUID&gt;</code> \ud2b9\uc815 \ub178\ub4dc\uc758 CPU, RAM, GPU \ucd1d\ub7c9 \ubc0f \uc5ec\uc720\ubd84 \uc870\ud68c \uc0ac\uc6a9\ub7c9(Usage) \ud655\uc778 <code>openstack resource provider usage show &lt;RP_UUID&gt;</code> \ud2b9\uc815 \ub178\ub4dc\uc758 \uc790\uc6d0\ubcc4 \uc2e4\uc81c \uc0ac\uc6a9\ub7c9 \uc870\ud68c \ud560\ub2f9(Allocation) \ud655\uc778 <code>openstack resource provider allocation show &lt;RP_UUID&gt;</code> \uc5b4\ub5a4 \uc778\uc2a4\ud134\uc2a4\uac00 \uc774 \ub178\ub4dc\uc758 \uc790\uc6d0\uc744 \uc810\uc720 \uc911\uc778\uc9c0 \ud655\uc778 \ud2b8\ub808\uc774\ud2b8(Trait) \uc870\ud68c <code>openstack resource provider trait list &lt;RP_UUID&gt;</code> \ub178\ub4dc\uc758 \ud2b9\uc131 \ud0dc\uadf8(\uc608: <code>HW_CPU_X86_AVX512</code>) \uc870\ud68c \uc774\ub984 \ubcc0\uacbd <code>openstack resource provider set --name &lt;\uc0c8\uc774\ub984&gt; &lt;RP_UUID&gt;</code> \ub9ac\uc18c\uc2a4 \ud504\ub85c\ubc14\uc774\ub354 \uc774\ub984 \ubcc0\uacbd RP \uc0ad\uc81c <code>openstack resource provider delete &lt;RP_UUID&gt;</code> (\uc8fc\uc758) \uc790\uc6d0 \uc81c\uacf5\uc790 \uc0ad\uc81c (\uc880\ube44 \ub808\ucf54\ub4dc \uc815\ub9ac \uc2dc \uc0ac\uc6a9)"},{"location":"openstack/cheatsheet/#allocation-candidates","title":"\ud83d\udd0d \uc790\uc6d0 \uc2a4\ucf00\uc904\ub9c1 \ub514\ubc84\uae45 (Allocation Candidates)","text":"<p>\"\ub0b4 VM\uc774 \uc65c \uc0dd\uc131\uc774 \uc548 \ub418\uc9c0? (No Valid Host)\" \uc5d0\ub7ec\uac00 \ub0a0 \ub54c, \uc2a4\ucf00\uc904\ub7ec \uc785\uc7a5\uc5d0\uc11c **\"\ubc30\ud3ec \uac00\ub2a5\ud55c \ud6c4\ubcf4\uc9c0\"**\uac00 \uc788\ub294\uc9c0 \ubbf8\ub9ac \uc870\ud68c\ud574\ubcf4\ub294 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4.</p> <pre><code># \uc2a4\ud399\uc5d0 \ub9de\ub294 \ud6c4\ubcf4 \ud638\uc2a4\ud2b8 \uc870\ud68c (\uc608: CPU 1\uac1c, \uba54\ubaa8\ub9ac 512MB)\nopenstack allocation candidate list --resource VCPU=1 --resource MEMORY_MB=512\n\n# GPU\uac00 \ud3ec\ud568\ub41c \ud6c4\ubcf4 \ud638\uc2a4\ud2b8 \uc870\ud68c (\uc608: GPU 1\uac1c \ud544\uc694)\n# (\uc0ac\uc6a9\uc790 \ud658\uacbd\uc5d0 \ub530\ub77c \ud074\ub798\uc2a4 \uc774\ub984\uc774 VGPU \ub610\ub294 PCI_DEVICE \ub4f1\uc73c\ub85c \ub2e4\ub97c \uc218 \uc788\uc74c)\nopenstack allocation candidate list --resource VCPU=4 --resource CUSTOM_GPU_RTX3060=1\n</code></pre>"},{"location":"openstack/cheatsheet/#resource-class","title":"\ud83d\udca1 Resource Class (\uc790\uc6d0 \ud074\ub798\uc2a4) \ucc38\uace0","text":"<p>\uba85\ub839\uc5b4 \uc0ac\uc6a9 \uc2dc \uc790\uc8fc \ubcf4\uc774\ub294 \uc790\uc6d0 \uc774\ub984(Class)\ub4e4\uc785\ub2c8\ub2e4.</p> <ul> <li><code>VCPU</code>: \uac00\uc0c1 CPU \ucf54\uc5b4 \uc218</li> <li><code>MEMORY_MB</code>: \uba54\ubaa8\ub9ac \uc6a9\ub7c9 (MB)</li> <li><code>DISK_GB</code>: \ub85c\uceec \ub514\uc2a4\ud06c \uc6a9\ub7c9 (GB)</li> <li><code>PCI_DEVICE</code> \ub610\ub294 <code>CUSTOM_...</code>: GPU \uac19\uc740 \ud2b9\uc218 \uc7a5\uce58</li> </ul> <p>\uc608\uc2dc: \ud2b9\uc815 \ucef4\ud4e8\ud2b8 \ub178\ub4dc(<code>openstack22</code>)\uc758 GPU \uc7ac\uace0 \ud655\uc778\ud558\uae30</p> <pre><code># 1. \ubaa9\ub85d\uc5d0\uc11c openstack22\uc758 UUID \ucc3e\uae30\nopenstack resource provider list --name openstack22\n\n# 2. \ud574\ub2f9 UUID\ub85c \uc7ac\uace0 \ud655\uc778 (GPU \uac1c\uc218 \ud655\uc778\uc6a9)\nopenstack resource provider inventory list &lt;openstack22_UUID&gt;\n</code></pre>"},{"location":"openstack/cheatsheet/#_2","title":"\ud83d\udca1 \ud301: \ucd9c\ub825 \ud3ec\ub9f7 \uc608\uc058\uac8c \ubcf4\uae30","text":"<p>\uba85\ub839\uc5b4 \ub4a4\uc5d0 <code>-c</code> (\uceec\ub7fc \uc120\ud0dd)\uc640 <code>-f</code> (\ud3ec\ub9f7) \uc635\uc158\uc744 \uc4f0\uba74 \ud544\uc694\ud55c \uc815\ubcf4\ub9cc \uae54\ub054\ud558\uac8c \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code># ID\uc640 \uc774\ub984, \uc0c1\ud0dc\ub9cc \ubcf4\uace0 \uc2f6\uc744 \ub54c (\ud14c\uc774\ube14 \ud615\uc2dd)\nopenstack server list -c ID -c Name -c Status\n\n# \uac12\ub9cc \ubf51\uc544\uc11c \uc2a4\ud06c\ub9bd\ud2b8\uc5d0 \uc4f0\uace0 \uc2f6\uc744 \ub54c (Value \ud615\uc2dd)\nopenstack server show &lt;ID&gt; -c status -f value\n</code></pre>"},{"location":"openstack/base/api/","title":"Openstack API Basic","text":""},{"location":"openstack/base/api/#1-url","title":"1. \ubca0\uc774\uc2a4 URL \ud655\uc778 (\uc804\uc81c \uc870\uac74)","text":"<p>\uba3c\uc800 \uac01 \uc11c\ube44\uc2a4\uc758 \ud3ec\ud2b8\uc640 \uc8fc\uc18c\ub97c \uc54c\uc544\uc57c \ud569\ub2c8\ub2e4. (\ubcf4\ud1b5 <code>cstation</code> \ub178\ub4dc IP)</p> <ul> <li>Keystone (Identity): <code>http://&lt;IP&gt;:5000/v3</code></li> <li>Neutron (Network): <code>http://&lt;IP&gt;:9696</code></li> <li>Nova (Compute): <code>http://&lt;IP&gt;:8774/v2.1</code></li> <li>Glance (Image): <code>http://&lt;IP&gt;:9292</code></li> <li>Placement: <code>http://&lt;IP&gt;:8778</code></li> </ul>"},{"location":"openstack/base/api/#2-api","title":"2. \ud575\uc2ec \uc11c\ube44\uc2a4 \uc870\ud68c API \ubaa9\ub85d","text":""},{"location":"openstack/base/api/#neutron-vpc-subnet","title":"\ud83c\udf10 \ub124\ud2b8\uc6cc\ud06c (Neutron) - VPC, Subnet \uad00\ub828","text":"<p>\uac00\uc7a5 \uad81\uae08\ud574\ud558\uc2dc\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4. \ubca0\uc774\uc2a4 URL(<code>:9696</code>) \ub4a4\uc5d0 \ubd99\uc2b5\ub2c8\ub2e4.</p> \ub9ac\uc18c\uc2a4 API \uacbd\ub85c (URI) \uc124\uba85 (AWS \ub300\uc751) Network <code>GET /v2.0/networks</code> VPC \uc804\uccb4 \ubaa9\ub85d \uc870\ud68c Subnet <code>GET /v2.0/subnets</code> \uc11c\ube0c\ub137 \uc804\uccb4 \ubaa9\ub85d \uc870\ud68c Router <code>GET /v2.0/routers</code> \ub77c\uc6b0\ud130(Gateway) \ubaa9\ub85d \uc870\ud68c Port <code>GET /v2.0/ports</code> \uc778\ud130\ud398\uc774\uc2a4(ENI) \ubaa9\ub85d \uc870\ud68c Sec Group <code>GET /v2.0/security-groups</code> \ubcf4\uc548 \uadf8\ub8f9 \ubaa9\ub85d \uc870\ud68c Floating IP <code>GET /v2.0/floatingips</code> \uacf5\uc778 IP \ubaa9\ub85d \uc870\ud68c"},{"location":"openstack/base/api/#nova-","title":"\ud83d\udcbb \ucef4\ud4e8\ud2b8 (Nova) - \uc778\uc2a4\ud134\uc2a4, \ud558\uc774\ud37c\ubc14\uc774\uc800","text":"<p>\ubca0\uc774\uc2a4 URL(<code>:8774/v2.1</code>) \ub4a4\uc5d0 \ubd99\uc2b5\ub2c8\ub2e4.</p> \ub9ac\uc18c\uc2a4 API \uacbd\ub85c (URI) \uc124\uba85 Server <code>GET /servers/detail</code> \uc778\uc2a4\ud134\uc2a4(VM) \uc804\uccb4 \uc0c1\uc138 \uc870\ud68c Flavor <code>GET /flavors/detail</code> \uc778\uc2a4\ud134\uc2a4 \ud0c0\uc785(\uc2a4\ud399) \uc870\ud68c Hypervisor <code>GET /os-hypervisors/detail</code> \ubb3c\ub9ac \ub178\ub4dc(Compute Node) \uc0c1\ud0dc \uc870\ud68c Usage <code>GET /os-simple-tenant-usage</code> \ud504\ub85c\uc81d\ud2b8\ubcc4 \uc790\uc6d0 \uc0ac\uc6a9\ub7c9 \uc870\ud68c"},{"location":"openstack/base/api/#glance","title":"\ud83d\udcbf \uc774\ubbf8\uc9c0 (Glance)","text":"<p>\ubca0\uc774\uc2a4 URL(<code>:9292</code>) \ub4a4\uc5d0 \ubd99\uc2b5\ub2c8\ub2e4.</p> \ub9ac\uc18c\uc2a4 API \uacbd\ub85c (URI) \uc124\uba85 Image <code>GET /v2/images</code> \uc774\ubbf8\uc9c0(AMI) \ubaa9\ub85d \uc870\ud68c"},{"location":"openstack/base/api/#placement-gpu","title":"\ud83d\udd11 \uc790\uc6d0 \uad00\ub9ac (Placement) - GPU \ub514\ubc84\uae45\uc6a9","text":"<p>\ubca0\uc774\uc2a4 URL(<code>:8778</code>) \ub4a4\uc5d0 \ubd99\uc2b5\ub2c8\ub2e4.</p> \ub9ac\uc18c\uc2a4 API \uacbd\ub85c (URI) \uc124\uba85 Res Provider <code>GET /resource_providers</code> \uc790\uc6d0 \uc81c\uacf5\uc790(Compute Node) \ubaa9\ub85d Inventory <code>GET /resource_providers/{uuid}/inventories</code> \ud2b9\uc815 \ub178\ub4dc\uc758 \uc790\uc6d0(GPU, vCPU) \uc7ac\uace0 Usage <code>GET /resource_providers/{uuid}/usages</code> \ud2b9\uc815 \ub178\ub4dc\uc758 \uc790\uc6d0 \uc0ac\uc6a9\ub7c9"},{"location":"openstack/base/api/#curl","title":"\ud83d\ude80 <code>curl</code>\ub85c \uc870\ud68c\ud558\uae30 (\uc608\uc2dc)","text":"<p>CLI\uc5d0\uc11c \ud1a0\ud070\uc744 \ubf51\uc544\uc11c \ubc14\ub85c <code>curl</code>\ub85c \ub0a0\ub9ac\ub294 \uc2a4\ud06c\ub9bd\ud2b8\uc785\ub2c8\ub2e4.</p> <p>1. \ud658\uacbd\ubcc0\uc218 \uc138\ud305 (Controller Node\uc5d0\uc11c):</p> <pre><code># \uad00\ub9ac\uc790 \ud1a0\ud070 \ucd94\ucd9c\nexport OS_TOKEN=$(openstack token issue -f value -c id)\n\n# Neutron(\ub124\ud2b8\uc6cc\ud06c) URL \ucd94\ucd9c\nexport NET_URL=$(openstack endpoint list --service network --interface public -f value -c URL)\n</code></pre> <p>2. API \ud638\ucd9c \ud14c\uc2a4\ud2b8:</p> <pre><code># 1. VPC (Network) \uc804\uccb4 \uc870\ud68c\ncurl -s -X GET \"$NET_URL/v2.0/networks\" -H \"X-Auth-Token: $OS_TOKEN\" | python3 -m json.tool\n\n# 2. Subnet \uc804\uccb4 \uc870\ud68c\ncurl -s -X GET \"$NET_URL/v2.0/subnets\" -H \"X-Auth-Token: $OS_TOKEN\" | python3 -m json.tool\n\n# 3. Router \uc804\uccb4 \uc870\ud68c\ncurl -s -X GET \"$NET_URL/v2.0/routers\" -H \"X-Auth-Token: $OS_TOKEN\" | python3 -m json.tool\n</code></pre> <p>\uc774 \uc8fc\uc18c\ub4e4\ub85c \ud638\ucd9c\ud588\uc744 \ub54c \uc751\ub2f5\uc774 \uc798 \uc624\uba74 \ubc31\uc5d4\ub4dc\ub294 \uac74\uac15\ud55c \uac83\uc785\ub2c8\ub2e4. Horizon \uc5d0\ub7ec\ub294 \uc544\uae4c \uc870\uce58(Memoized Patch)\ub85c \ud574\uacb0\ub418\uc5c8\uc744 \ud14c\ub2c8, API\ub3c4 \uc815\uc0c1\uc801\uc73c\ub85c \ub098\uc62c \uac81\ub2c8\ub2e4.</p>"},{"location":"openstack/base/install/","title":"\ud83d\ude80 OpenStack Flamingo (2025.2) \ud1b5\ud569 \uc124\uce58 \uac00\uc774\ub4dc","text":""},{"location":"openstack/base/install/#0-os","title":"\u2699\ufe0f 0. OS \uc0ac\uc804 \uc900\ube44","text":""},{"location":"openstack/base/install/#00","title":"\ud83d\udcdd 0.0 \uc635\uc158: \uae30\uc874 \uc124\uc815 \ubc31\uc5c5","text":"<p>\ub9cc\uc57d \uae30\uc874 \ud658\uacbd\uc744 \uc5c5\uadf8\ub808\uc774\ub4dc \ud55c\ub2e4\uba74 \uc544\ub798 \ub0b4\uc6a9\uc740 \ubc31\uc5c5\ud574\ub450\uba74 \uc88b\uc2b5\ub2c8\ub2e4.</p> <pre><code>echo \"=== HOSTNAME ===\" &gt; server_info.txt\nhostname &gt;&gt; server_info.txt\n\necho -e \"\\n=== IP &amp; MAC ===\" &gt;&gt; server_info.txt\nip -c addr &gt;&gt; server_info.txt\n\necho -e \"\\n=== ROUTE ===\" &gt;&gt; server_info.txt\nip route &gt;&gt; server_info.txt\n\necho -e \"\\n=== DISK INFO (Serial Check) ===\" &gt;&gt; server_info.txt\nlsblk -o NAME,MODEL,SERIAL,SIZE,TYPE,FSTYPE &gt;&gt; server_info.txt\n\necho -e \"\\n=== LVM INFO ===\" &gt;&gt; server_info.txt\nsudo vgs &gt;&gt; server_info.txt\n\necho -e \"\\n=== PCI (GPU) ===\" &gt;&gt; server_info.txt\nlspci -nn | grep NVIDIA &gt;&gt; server_info.txt\n\necho -e \"\\n=== KERNEL BOOT PARAM ===\" &gt;&gt; server_info.txt\ncat /proc/cmdline &gt;&gt; server_info.txt\n\necho \"Done. Check server_info.txt\"\n</code></pre>"},{"location":"openstack/base/install/#01-cinder","title":"\ud83d\udcbe 0.1 Cinder \uad00\ub828 \ubcfc\ub968 \uc124\uc815","text":"<p><code>multinode</code> \uc5d0\uc11c <code>[Storage]</code> \ud56d\ubaa9\uc5d0 \uc788\ub294 \ub178\ub4dc\ub4e4\uc740 \uc544\ub798 \uc791\uc5c5\uc744 \uc218\ud589\ud574\uc57c \ud569\ub2c8\ub2e4. \ub9cc\uc57d <code>/dev/sdb</code> \ub97c cinder\ub85c \uc0ac\uc6a9\ud55c\ub2e4\uba74 os \uc124\uce58 \uc2dc <code>/dev/sdb</code> \ub294 Leave unformatted \uc0c1\ud0dc\ub85c \ub0a8\uc544\uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code># 1. \ubb3c\ub9ac \ubcfc\ub968(PV) \uc0dd\uc131\n# \uc8fc\uc758: /dev/sdb\uc758 \ubaa8\ub4e0 \ub370\uc774\ud130\uac00 \ub0a0\uc544\uac11\ub2c8\ub2e4.\nsudo pvcreate /dev/sdb\n\n# 2. \ubcfc\ub968 \uadf8\ub8f9(VG) \uc0dd\uc131 \u2605\uc774\ub984 \uc911\uc694\u2605\n# globals.yml\uc5d0 \uc801\uc740 \uc774\ub984(cinder-volumes)\uacfc \ucca0\uc790 \ud558\ub098\ub77c\ub3c4 \ud2c0\ub9ac\uba74 \uc548 \ub429\ub2c8\ub2e4.\nsudo vgcreate cinder-volumes /dev/sdb\n\n# 3. \ud655\uc778\nsudo vgs\n# \uacb0\uacfc\uc5d0 cinder-volumes\uac00 \ubcf4\uc774\uace0 Free \uc0ac\uc774\uc988\uac00 \ub109\ub109\ud558\uba74 \uc131\uacf5!\n</code></pre>"},{"location":"openstack/base/install/#02","title":"\ud83c\udf10 0.2 \ub124\ud2b8\uc6cc\ud06c \uad00\ub828 \uc124\uc815","text":"<pre><code># /etc/netplan/00-installer-config.yaml\nnetwork:\n  version: 2\n  ethernets:\n    eno1:  # \uad00\ub9ac\ub9dd (Management &amp; VXLAN Tunnel)\n      dhcp4: false\n      addresses:\n        - 10.10.10.XX/24  # &lt;--- [\uc911\uc694] \uac01 \uc11c\ubc84\uc758 \uc6d0\ub798 IP\ub85c \ubcc0\uacbd (\uc608: 60, 62 \ub4f1)\n      routes:\n        - to: default\n          via: 10.10.10.1 # &lt;--- [\uc911\uc694] ip \ub300\uc5ed\ubcf4\uace0 \ubcc0\uacbd \ud544\uc694(172.16.11.243 \uc11c\ubc84\ub294 172.16.11.1\ub85c \uc124\uc815)\n      nameservers:\n        addresses: [8.8.8.8] # \ub610\ub294 \uc0ac\ub0b4 DNS\n    eno2:  # \uc678\ubd80\ub9dd (Provider Network)\n      dhcp4: false\n      # IP\ub97c \ub123\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. OpenStack(OVS)\uc774 \ube0c\ub9ac\uc9c0\ub85c \uac00\uc838\uac00\uc11c \uc4f8 \uac83\uc785\ub2c8\ub2e4.\n      # \ub9c1\ud06c\ub9cc Up \uc0c1\ud0dc\ub85c \ub9cc\ub4ed\ub2c8\ub2e4.\n      optional: true\n</code></pre> <pre><code>sudo netplan apply\nip addr  # IP\uac00 \uc81c\ub300\ub85c \ub4e4\uc5b4\uc654\ub294\uc9c0 \ud655\uc778\n</code></pre>"},{"location":"openstack/base/install/#03","title":"\ud83d\udd5b 0.3 \uc11c\ubc84 \uc2dc\uac04 \uc124\uc815","text":"<p>\ud55c\uad6d \ud45c\uc900\uc2dc(KST) \uc124\uc815\uc740 \ubaa8\ub4e0 \ub178\ub4dc\uc5d0\uc11c \uc218\ud589\ud569\ub2c8\ub2e4.</p> <pre><code># \ud55c\uad6d \uc2dc\uac04\uc73c\ub85c \ubcc0\uacbd\nsudo timedatectl set-timezone Asia/Seoul\n</code></pre>"},{"location":"openstack/base/install/#rocky-linux-selinux","title":"\ud83d\udfe0 [Rocky Linux] \ud544\uc218 \uc124\uc815 (SELinux \ud574\uc81c)","text":"<p>RedHat \uacc4\uc5f4\uc740 SELinux\uac00 \ucf1c\uc838 \uc788\uc73c\uba74 Kolla \ubc30\ud3ec \uc2dc \uad8c\ud55c \ubb38\uc81c\ub85c \uc2e4\ud328\ud569\ub2c8\ub2e4.</p> <p>\ubcf4\uc548 \uc815\ucc45 \uc0c1 SELinux \ube44\ud65c\uc131\ud654\uac00 \ubd88\uac00\ub2a5\ud55c \ud658\uacbd\uc5d0\uc11c\ub294, Kolla-Ansible SELinux \ub300\uc751 \uac00\uc774\ub4dc\ub97c \ubcc4\ub3c4\ub85c \ucc38\uace0\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code># 1. SELinux\ub97c Permissive \ubaa8\ub4dc\ub85c \ubcc0\uacbd (\uc77c\uc2dc\uc801)\nsudo setenforce 0\n\n# 2. \uc601\uad6c \uc124\uc815 (\uc7ac\ubd80\ud305 \ud6c4\uc5d0\ub3c4 \uc720\uc9c0\ub418\ub3c4\ub85d)\nsudo sed -i 's/^SELINUX=.*/SELINUX=disabled/g' /etc/selinux/config\n\n# 3. EPEL \uc800\uc7a5\uc18c \ucd94\uac00 (\ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58\uc6a9)\nsudo dnf install -y epel-release\nsudo dnf update -y\n</code></pre>"},{"location":"openstack/base/install/#ubuntu","title":"\ud83d\udfe3 [Ubuntu] \ud544\uc218 \uc124\uc815","text":"<p>Ubuntu\ub294 \ud328\ud0a4\uc9c0 \uc5c5\ub370\uc774\ud2b8\ub9cc \ud558\uba74 \ub429\ub2c8\ub2e4.</p> <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre>"},{"location":"openstack/base/install/#1-install-dependencies","title":"\ud83d\udee0\ufe0f 1. \uc758\uc874\uc131 \ud328\ud0a4\uc9c0 \uc124\uce58 (Install Dependencies)","text":"<p>Python \uac00\uc0c1\ud658\uacbd\uc744 \ub9cc\ub4e4\uae30 \uc704\ud55c \uae30\ucd08 \ub3c4\uad6c\ub4e4\uc744 \uc124\uce58\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/base/install/#rocky-linux","title":"\ud83d\udfe0 [Rocky Linux]","text":"<pre><code># \uac1c\ubc1c \ub3c4\uad6c \ubc0f \ud30c\uc774\uc36c \ub77c\uc774\ube0c\ub7ec\ub9ac \uc124\uce58\nsudo dnf install -y git python3-devel libffi-devel gcc openssl-devel python3-libselinux python3-pip python3-libselinux-devel\n</code></pre>"},{"location":"openstack/base/install/#ubuntu_1","title":"\ud83d\udfe3 [Ubuntu]","text":"<pre><code># \uac1c\ubc1c \ub3c4\uad6c \ubc0f \ud30c\uc774\uc36c \ub77c\uc774\ube0c\ub7ec\ub9ac \uc124\uce58\nsudo apt install -y git python3-dev libffi-dev gcc libssl-dev python3-venv libdbus-glib-1-dev python3-dbus\n</code></pre>"},{"location":"openstack/base/install/#2-virtual-environment-","title":"\ud83d\udc0d 2. \uac00\uc0c1\ud658\uacbd \uad6c\uc131 (Virtual Environment) - [\uacf5\ud1b5]","text":"<p>\uc5ec\uae30\uc11c\ubd80\ud130\ub294 OS \uc0c1\uad00\uc5c6\uc774 \ub3d9\uc77c\ud569\ub2c8\ub2e4. \uc2dc\uc2a4\ud15c \ud30c\uc774\uc36c\uc744 \ub354\ub7fd\ud788\uc9c0 \uc54a\uae30 \uc704\ud574 \uac00\uc0c1\ud658\uacbd \uc0ac\uc6a9\uc774 \ud544\uc218\uc785\ub2c8\ub2e4.</p> <pre><code># 1. \uac00\uc0c1\ud658\uacbd \uc0dd\uc131 (\ud648 \ub514\ub809\ud130\ub9ac\uc5d0 venv \uc0dd\uc131)\npython3 -m venv ~/venv\n\n# 2. \uac00\uc0c1\ud658\uacbd \ud65c\uc131\ud654 \u2605(\uc791\uc5c5\ud560 \ub54c\ub9c8\ub2e4 \ub9e4\ubc88 \uc2e4\ud589 \ud544\uc218)\u2605\nsource ~/venv/bin/activate\n\n# (\ud504\ub86c\ud504\ud2b8 \uc55e\uc5d0 (venv)\uac00 \ub5b4\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694)\n\n# 3. pip \ucd5c\uc2e0\ud654 (\uc624\ub958 \ubc29\uc9c0)\npip install -U pip\n</code></pre>"},{"location":"openstack/base/install/#3-kolla-ansible-install-","title":"\ud83d\udce6 3. Kolla-Ansible \uc124\uce58 (Install) - [\uacf5\ud1b5]","text":"<pre><code># 1. Kolla-Ansible Flamingo \ubc84\uc804 \uc124\uce58 (master \ube0c\ub79c\uce58)\npip install git+https://opendev.org/openstack/kolla-ansible@master\n\n# \ubc84\uc804 \uc9c0\uc815\npip install git+https://opendev.org/openstack/kolla-ansible@stable/2025.2\n\n# 2. \uc124\uc815 \ub514\ub809\ud130\ub9ac \uc0dd\uc131 \ubc0f \uad8c\ud55c \ubd80\uc5ec\nsudo mkdir -p /etc/kolla\nsudo chown $USER:$USER /etc/kolla\n\n# 3. \uc124\uc815 \ud30c\uc77c \ubcf5\uc0ac (globals.yml, passwords.yml)\ncp -r ~/venv/share/kolla-ansible/etc_examples/kolla/* /etc/kolla/\n\n# 4. \uc778\ubca4\ud1a0\ub9ac \ud30c\uc77c \ubcf5\uc0ac (\uba40\ud2f0\ub178\ub4dc\uc6a9)\ncp ~/venv/share/kolla-ansible/ansible/inventory/multinode .\n</code></pre>"},{"location":"openstack/base/install/#4-globalsyml-os","title":"\u2699\ufe0f 4. \uc124\uc815 \ud30c\uc77c \uc218\uc815 (<code>globals.yml</code>) - [OS\ubcc4 \ucc28\uc774\uc810]","text":"<p><code>vi /etc/kolla/globals.yml</code>\uc744 \uc5f4\uc5b4\uc11c \uc218\uc815\ud569\ub2c8\ub2e4. OS\uc5d0 \ub530\ub77c <code>kolla_base_distro</code> \uac12\uc744 \ub2e4\ub974\uac8c \uc918\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>---\n# [\uc911\uc694] OS\uc5d0 \ub530\ub77c \uc120\ud0dd\ud558\uc138\uc694\n# Ubuntu \uc0ac\uc6a9 \uc2dc:\nkolla_base_distro: \"ubuntu\"\n# Rocky Linux \uc0ac\uc6a9 \uc2dc:\n# kolla_base_distro: \"rocky\"\n\n# [\uacf5\ud1b5] \uc624\ud508\uc2a4\ud0dd \ubc84\uc804 (Flamingo \ub300\uc751)\n# openstack_release: \"master\"  &lt;-- \uc8fc\uc11d \uadf8\ub300\ub85c \ub450\uac70\ub098, Docker \ud0dc\uadf8 \uba85\uc2dc\n\n# [\uacf5\ud1b5] \ub124\ud2b8\uc6cc\ud06c \uc124\uc815 (\uc0ac\uc6a9\uc790 \ud658\uacbd\uc5d0 \ub9de\ucdb0\uc11c \uc218\uc815\ud560 \uac83)\n# eno2\uc5d0\ub294 IP\ub97c \uc124\uc815\ud558\uc9c0 \ub9d0\uace0, \uc2a4\uc704\uce58\uc5d0 \uc678\ubd80\ub9dd VLAN/Untaged \uc5f0\uacb0 \ud544\uc218\nnetwork_interface: \"eno1\"           # \uad00\ub9ac\ub9dd (IP 10.10.10.60)\nneutron_external_interface: \"eno2\"  # \uc678\ubd80\ub9dd (IP \uc5c6\uc74c)\n\n# [\uacf5\ud1b5] MTU \uc124\uc815 \ubcc0\uacbd\n# \uc2a4\uc704\uce58\ub97c Jumbo Frame(9000)\uc73c\ub85c \ubc14\uafc0 \uc218 \uc788\ub2e4\uba74 9000\uc73c\ub85c \uc124\uc815\n# \uc2a4\uc704\uce58\uc640 \uc11c\ubc84 \ubaa8\ub450 9000\uc73c\ub85c \ub9de\ucdb0\uc57c \uc815\uc0c1 \ub3d9\uc791\nnetwork_mtu: 1450 # VXLAN \ud5e4\ub354 \ud06c\uae30\uc778 50 byte \uc790\ub9ac \ud655\ubcf4\n\n# [\uacf5\ud1b5] VIP \uc8fc\uc18c (\uad00\ub9ac\ub9dd \ub300\uc5ed \ub0b4 \ubbf8\uc0ac\uc6a9 IP, \uac19\uc740 IP \uc0ac\uc6a9 \uc2dc HAProxy \ucda9\ub3cc \ubc1c\uc0dd \uac00\ub2a5\uc131 \ub192\uc74c)\nkolla_internal_vip_address: \"10.10.10.60\"  # HAProxy\ub97c \uc0ac\uc6a9\ud560 \uacbd\uc6b0, \ube48 IP \ud560\ub2f9 \ud544\uc694\n\n# [\uacf5\ud1b5] \uc8fc\uc694 \uc11c\ube44\uc2a4 \ud65c\uc131\ud654\nenable_cinder: \"yes\"\nenable_cinder_backend_lvm: \"yes\"\ncinder_volume_group: \"cinder-volumes\" # Cinder volume group \uc774\ub984 \ud655\uc778 \ud544\uc694\nenable_heat: \"yes\"\nenable_horizon: \"yes\"\n# enable_prometheus: \"yes\" # \ubaa8\ub2c8\ud130\ub9c1 \ud544\uc694 \uc2dc\n</code></pre> <p>\uc704 \uc124\uc815\uc740 <code>vip_address</code> \ub294 \uae30\ubcf8\uc801\uc73c\ub85c \ud604\uc7ac ip\uc640 \ub2e4\ub978 ip\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc815\uc11d\uc774\uc9c0\ub9cc, \ube48 ip\uac00 \uc5c6\uac70\ub098 \ub3d9\uc77c\ud55c ip\ub97c \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4\uba74 <code>haproxy</code> , <code>keepalived</code> \uc640 <code>tls</code> \uc124\uc815\uc744 \uaebc\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>kolla_internal_vip_address: \"10.10.10.60\"  # Control \ub178\ub4dc\uc758 \uc2e4\uc81c IP\nenable_haproxy: \"no\"                       # HAProxy \ub054\nenable_keepalived: \"no\"                    # Keepalived \ub054\n\nkolla_enable_tls_internal: \"no\" \nkolla_enable_tls_external: \"no\"\n</code></pre>"},{"location":"openstack/base/install/#mtu","title":"MTU \uad00\ub828 \uc18d\ub3c4 \uc9c0\uc5f0\uc774 \uc0dd\uae30\ub294 \uc774\uc720","text":"<p>1) \uae30\ubcf8 \ud328\ud0b7 \ud06c\uae30 \uc81c\ud55c\uc774 1500 byte, \uc624\ud508\uc2a4\ud0dd \ub0b4\ubd80\uc5d0\uc11c\ub294 \ud328\ud0b7\uc5d0 \uc624\ubc84\ud5e4\ub4dc(VXLAN, UDP, IP, Ethernet \ud5e4\ub354 -&gt; \ucd1d 50 byte)\ub97c \ubd99\uc5ec\uc11c \ud3ec\uc7a5 \ud6c4 \uc804\uc1a1 2) \ub530\ub77c\uc11c vm\uc774 1500 byte \ub370\uc774\ud130\ub97c \uc804\uc1a1 \uc2dc, vm\uc5d0\uc11c 50 byte\ucd94\uac00\ub418\uc5b4 1550 byte \uc804\uc1a1 \uc694\uccad 3) \ubb3c\ub9ac \ub79c\uce74\ub4dc\uc5d0\uc11c \ud328\ud0b7 \ud06c\uae30 \ucd08\uacfc \uc778\uc9c0 -&gt; \ud328\ud0b7 \ud3d0\uae30 \ub610\ub294 \ucabc\uac1c\uae30 4) \ud328\ud0b7 \uc190\uc2e4 \ud639\uc740 \uc7ac\uc804\uc1a1\uc774 \ubc1c\uc0dd\ud558\uba70 \ub124\ud2b8\uc6cc\ud06c \uc18d\ub3c4 \uc800\ud558(\ud2b9\ud788 HTTPS \uc811\uc18d\uc774\ub098 \ub300\uc6a9\ub7c9 \ub2e4\uc6b4\ub85c\ub4dc \uc2dc)  </p>"},{"location":"openstack/base/install/#5-","title":"\ud83d\udcdd 5. \uc778\ubca4\ud1a0\ub9ac \ubc0f \ube44\ubc00\ubc88\ud638 \uc124\uc815 - [\uacf5\ud1b5]","text":""},{"location":"openstack/base/install/#51","title":"5.1 \ube44\ubc00\ubc88\ud638 \uc0dd\uc131","text":"<pre><code>kolla-genpwd\n# \uc0dd\uc131 \ud6c4 Horizon Admin \ube44\ubc00\ubc88\ud638 \ud655\uc778\ud574\ub450\uae30\ngrep keystone_admin_password /etc/kolla/passwords.yml\n</code></pre>"},{"location":"openstack/base/install/#52-ssh","title":"5.2 SSH \uc811\uc18d \ud5c8\uc6a9","text":"<p>Master \ub178\ub4dc\uc5d0\uc11c Compute \ub178\ub4dc \ub4f1\uc73c\ub85c \ube44\ubc00\ubc88\ud638 \uc5c6\uc774 SSH \uc811\uc18d\uc774 \uac00\ub2a5\ud558\ub3c4\ub85d \uc124\uc815\ud569\ub2c8\ub2e4.</p> <pre><code># 1. SSH \uacf5\uac1c \ud0a4\ub97c \ubc30\ud3ec \ub300\uc0c1 \uc11c\ubc84\uc5d0 \ubcf5\uc0ac (\uac01 \ub178\ub4dc IP\ubcc4\ub85c \ubc18\ubcf5 \uc218\ud589)\nssh-copy-id -i ~/.ssh/id_rsa.pub &lt;USER_ID&gt;@&lt;TARGET_NODE_IP&gt;\n\n# 2. \uc811\uc18d \ud14c\uc2a4\ud2b8 (\uc554\ud638 \uc5c6\uc774 \ub85c\uadf8\uc778 \ub418\uba74 \uc131\uacf5)\nssh &lt;USER_ID&gt;@&lt;TARGET_NODE_IP&gt;\n</code></pre>"},{"location":"openstack/base/install/#53-vi-multinode","title":"5.3 \uc778\ubca4\ud1a0\ub9ac \uc218\uc815 (<code>vi multinode</code>)","text":"<p><code>multinode</code> \ud30c\uc77c\uc744 \uc5f4\uc5b4 \ubc30\ud3ec \ub300\uc0c1 \uc11c\ubc84 \uc815\ubcf4\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.</p> <pre><code># 3. \uc778\ubca4\ud1a0\ub9ac \uc218\uc815\nsudo vi multinode\n</code></pre> <p>\ud30c\uc77c \ub0b4\uc6a9 \uc218\uc815 \uc608\uc2dc:</p> <pre><code>[control]\n&lt;MASTER_IP&gt;\n\n[network]\n&lt;MASTER_IP&gt;\n\n[compute]\n# Compute \ub178\ub4dc IP\uc640 \uacc4\uc815 \uc815\ubcf4\ub97c \uae30\uc785\n&lt;TARGET_NODE_IP&gt; ansible_user=&lt;USER_ID&gt; ansible_become=true\n</code></pre> <p>\ud0c0\ucf13 IP\uc5d0 \uc785\ub825\ud55c ID\ub85c \uc811\uc18d\ud558\uc5ec sudo \uad8c\ud55c\uc744 \uc5bb\uaca0\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4.</p>"},{"location":"openstack/base/install/#54","title":"5.4 \ud1b5\uc2e0 \ud655\uc778","text":"<pre><code># 4. Ansible Ping \ud14c\uc2a4\ud2b8\nansible -i multinode all -m ping\n</code></pre>"},{"location":"openstack/base/install/#55-ansible","title":"5.5 Ansible \uc758\uc874\uc131 \uc124\uce58 (\ud544\uc218)","text":"<pre><code>kolla-ansible install-deps\n</code></pre>"},{"location":"openstack/base/install/#56","title":"5.6 \uadf8 \uc678","text":"<pre><code># \ud0c0\uc784\uc2f1\ud06c \ud655\uc778\ntimedatectl\n\n# \ud638\uc2a4\ud2b8\uba85 \ud655\uc778\nhostname\n\n# /etc/hosts\uc5d0 \ubaa8\ub4e0 \ub178\ub4dc \ub4f1\ub85d \uad8c\uc7a5\nvi /etc/hosts\n</code></pre>"},{"location":"openstack/base/install/#6-deploy-","title":"\ud83d\ude80 6. \ubc30\ud3ec \uc2e4\ud589 (Deploy) - [\uacf5\ud1b5]","text":"<p>\uc774\uc81c \uc2e4\uc81c \uc124\uce58\ub97c \uc9c4\ud589\ud569\ub2c8\ub2e4.</p> <pre><code># 1. Bootstrap (\uae30\ucd08 \uacf5\uc0ac: Docker \uc124\uce58 \ub4f1)\nkolla-ansible bootstrap-servers -i ./multinode\n\n# 2. Prechecks (\uc0ac\uc804 \uac80\uc0ac: \uc124\uc815 \uc624\ub958 \ud655\uc778)\nkolla-ansible prechecks -i ./multinode\n# -&gt; \uc5ec\uae30\uc11c \"SUCCESS\"\uac00 \ub5a0\uc57c\ub9cc \ub2e4\uc74c\uc73c\ub85c \ub118\uc5b4\uac11\ub2c8\ub2e4.\n\n# 3. Deploy (\ubcf8 \uac8c\uc784: \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec)\nkolla-ansible deploy -i ./multinode\n</code></pre>"},{"location":"openstack/base/install/#7-post-deploy-","title":"\u2705 7. \ud074\ub77c\uc774\uc5b8\ud2b8 \uc124\uc815 (Post-Deploy) - [\uacf5\ud1b5]","text":"<p>\ubc30\ud3ec\uac00 \ub05d\ub098\uba74 OpenStack \uba85\ub839\uc5b4\ub97c \uc4f0\uae30 \uc704\ud55c \ub3c4\uad6c\ub97c \uc138\ud305\ud569\ub2c8\ub2e4.</p> <pre><code># 1. OpenStack \ud074\ub77c\uc774\uc5b8\ud2b8 \uc124\uce58\npip install python-openstackclient\n\n# 2. \uad00\ub9ac\uc790 \uc778\uc99d \ud30c\uc77c \uc0dd\uc131 (admin-openrc.sh)\nkolla-ansible post-deploy -i multinode\n\n# 3. \uc778\uc99d \ub85c\ub4dc \ubc0f \ud14c\uc2a4\ud2b8\nsource /etc/kolla/admin-openrc.sh\nopenstack service list\n\n# 4. Nova\uc640 Compute \ub4f1\ub85d \ud655\uc778\nopenstack hypervisor list\nopenstack compute service list\n</code></pre>"},{"location":"openstack/base/install/#8","title":"\ud83c\udf10 8. \ub124\ud2b8\uc6cc\ud06c \uc0dd\uc131","text":""},{"location":"openstack/base/install/#init-runonce","title":"<code>init-runonce</code> \uc0ac\uc6a9(\uc790\ub3d9)","text":"<p>\uc544\ub798 \ud56d\ubaa9\uc744 \uc218\uc815 \ud6c4, \ubc30\ud3ec\ud569\ub2c8\ub2e4.</p> <pre><code># 1. \ud30c\uc77c \uc5f4\uae30\nvi ~/venv/share/kolla-ansible/init-runonce\n\n# 2. \uc544\ub798 \ubcc0\uc218\ub4e4\uc744 \ucc3e\uc544 \uc0ac\ub0b4\ub9dd \ud658\uacbd\uc5d0 \ub9de\uac8c \uc218\uc815\nEXT_NET_CIDR='10.10.10.0/24'       # \uc678\ubd80\ub9dd \uc804\uccb4 \ub300\uc5ed (\uc608\uc2dc)\nEXT_NET_RANGE='start=10.10.10.100,end=10.10.10.200' # Floating IP\ub85c \uc4f8 \ubc94\uc704\nEXT_NET_GATEWAY='10.10.10.1'       # \uc678\ubd80\ub9dd \uac8c\uc774\ud2b8\uc6e8\uc774\n</code></pre> <p>\ubc30\ud3ec\uac00 \ub05d\ub098\uba74 \ud574\ub2f9 \ud30c\uc77c\uc744 \uc2e4\ud589\ud558\uc5ec \ub124\ud2b8\uc6cc\ud06c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p> <pre><code># home \ud3f4\ub354 \uae30\uc900\n./venv/share/kolla-ansible/init-runonce\n</code></pre>"},{"location":"openstack/base/install/#cli","title":"<code>CLI</code> \uc0ac\uc6a9(\uc218\ub3d9)","text":"<p>\ub124\ud2b8\uc6cc\ud06c \uc0dd\uc131\uc740 \uc544\ub798\uc640 \uac19\uc774 \uc9c4\ud589\ud569\ub2c8\ub2e4. IP \ub300\uc5ed \ub4f1\uc740 \uc2e4\uc81c \ud658\uacbd\uc5d0 \ub9de\ucdb0 \uc218\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/base/install/#_1","title":"\ub0b4\ubd80\ub9dd \uc0dd\uc131","text":"<pre><code># 1. \ub0b4\ubd80\ub9dd \uc0dd\uc131\nopenstack network create --provider-network-type vxlan internal\n\n# 2. \ub0b4\ubd80\ub9dd \uc11c\ube0c\ub137 \uc0dd\uc131\nopenstack subnet create --network internal \\\n  --subnet-range 1.1.1.0/24 \\\n  --gateway 1.1.1.1 \\\n  --dns-nameserver 8.8.8.8 \\\n  --dhcp \\\n  internal_subnet\n</code></pre>"},{"location":"openstack/base/install/#_2","title":"\uc678\ubd80\ub9dd \uc0dd\uc131","text":"<pre><code># 1. \uc678\ubd80\ub9dd(provider network) \uc0dd\uc131\n# \uc774\ub984: external (\uc0ac\uc9c4\uacfc \uc77c\uce58)\nopenstack network create --external \\\n  --provider-physical-network physnet1 \\\n  --provider-network-type flat \\\n  external\n\n# 2. \uc11c\ube0c\ub137 \uc0dd\uc131\n# \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0: external (\uc704\uc5d0\uc11c \ub9cc\ub4e0 \ub124\ud2b8\uc6cc\ud06c)\n# DHCP: \ub044\uae30 (\uc0ac\uc9c4\uacfc \uc77c\uce58)\nopenstack subnet create --network external \\\n  --allocation-pool start=10.10.10.70,end=10.10.10.108 \\\n  --dns-nameserver 8.8.8.8 \\\n  --gateway 10.10.10.1 \\\n  --subnet-range 10.10.10.0/24 \\\n  --no-dhcp \\\n  external_subnet\n</code></pre>"},{"location":"openstack/base/install/#_3","title":"\ub77c\uc6b0\ud130 \uc0dd\uc131","text":"<pre><code># 1. \ub77c\uc6b0\ud130 \uc774\ub984: route\nopenstack router create route\n\n# 2. \uc678\ubd80\ub9dd \uc5f0\uacb0\nopenstack router set --external-gateway external --enable-snat route\n\n# 3. \ub0b4\ubd80\ub9dd \uc5f0\uacb0\nopenstack router add subnet route internal_subnet\n</code></pre>"},{"location":"openstack/base/install/#octavia","title":"Octavia \ub85c\ub4dc\ubc38\ub7f0\uc11c \uad00\ub9ac\ub9dd \uc0dd\uc131 \ubc0f \uc5f0\uacb0","text":"<pre><code># 1. \ub124\ud2b8\uc6cc\ud06c \uc0dd\uc131\nopenstack network create lb-mgmt-net\n\n# 2. \uc11c\ube0c\ub137 \uc0dd\uc131 (20.0.0.0/24 \ub300\uc5ed, \uac8c\uc774\ud2b8\uc6e8\uc774 20.0.0.1)\n# globals.yml \uc124\uc815\uacfc 100% \uc77c\uce58\uc2dc\ud0b4\nopenstack subnet create --network lb-mgmt-net \\\n  --subnet-range 20.0.0.0/24 \\\n  --gateway 20.0.0.1 \\\n  --dns-nameserver 8.8.8.8 \\\n  --dhcp \\\n  lb-mgmt-subnet\n\n# 3. \ub77c\uc6b0\ud130\uc5d0 \uc5f0\uacb0 (\uc774\uac78 \uc218\ud589\ud558\uba74 \uc0ac\uc9c4\ucc98\ub7fc 20.0.0.1 \ud3ec\ud2b8\uac00 \uc0dd\uae41\ub2c8\ub2e4)\nopenstack router add subnet route lb-mgmt-subnet\n</code></pre>"},{"location":"openstack/base/install/#devops-ubuntu-vs-rocky","title":"\ud83d\udca1 DevOps \uc5d4\uc9c0\ub2c8\uc5b4\uc758 \uc870\uc5b8: Ubuntu vs Rocky \uc120\ud0dd \uac00\uc774\ub4dc","text":"<ul> <li>Ubuntu 24.04:</li> <li>\uc7a5\uc810: OpenStack \ucee4\ubba4\ub2c8\ud2f0\uc758 \ud45c\uc900(De-facto) \uc785\ub2c8\ub2e4. \ud2b8\ub7ec\ube14\uc288\ud305 \uc790\ub8cc\uac00 \uc81c\uc77c \ub9ce\uace0, <code>apt</code>\uac00 \ube60\ub985\ub2c8\ub2e4.</li> <li>\ucd94\ucc9c: \ud2b9\ubcc4\ud55c \uc774\uc720\uac00 \uc5c6\ub2e4\uba74 Ubuntu\ub85c \uac00\uc138\uc694.</li> <li>Rocky Linux 9/10:</li> <li>\uc7a5\uc810: RHEL(RedHat) \uae30\ubc18\uc774\ub77c \uc5d4\ud130\ud504\ub77c\uc774\uc988 \ud658\uacbd\uc5d0\uc11c \uc120\ud638\ub429\ub2c8\ub2e4. \uc548\uc815\uc131\uc774 \ub192\uc2b5\ub2c8\ub2e4.</li> <li>\ub2e8\uc810: SELinux \ub54c\ubb38\uc5d0 \ucd08\uae30 \uc124\uc815\uc774 \uadc0\ucc2e\uace0, \ud328\ud0a4\uc9c0 \uc774\ub984\uc774 Ubuntu\ub791 \ub2ec\ub77c\uc11c \uac00\ub054 \ud5f7\uac08\ub9bd\ub2c8\ub2e4.</li> <li>\ucd94\ucc9c: \uc0ac\ub0b4 \uc815\ucc45\uc0c1 RHEL \uacc4\uc5f4\uc744 \uc368\uc57c\ub9cc \ud560 \ub54c \uc120\ud0dd\ud558\uc138\uc694.</li> </ul>"},{"location":"openstack/gpu/init-gpu-node/","title":"\ud83d\udda5\ufe0f GPU Passthrough\ub97c \uc704\ud55c OS \uc0ac\uc804 \uc124\uc815 \uac00\uc774\ub4dc","text":"<p>\uc774 \uac00\uc774\ub4dc\ub294 OpenStack Compute \ub178\ub4dc\uc5d0\uc11c GPU\ub97c \uac00\uc0c1 \uba38\uc2e0(VM)\uc5d0 \uc9c1\uc811 \ud560\ub2f9(Passthrough)\ud558\uae30 \uc704\ud574 \ud544\uc694\ud55c \ucee4\ub110 \ubc0f \ub4dc\ub77c\uc774\ubc84 \uc124\uc815 \uc808\ucc28\uc785\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/init-gpu-node/#_1","title":"\ud83d\udcdd \ubcc0\uc218 \uc815\uc758 (\uce58\ud658 \ud544\uc694)","text":"<ul> <li><code>&lt;VENDOR_ID&gt;</code> : GPU \uc81c\uc870\uc0ac ID (\uc608: NVIDIA\uc758 \uacbd\uc6b0 <code>10de</code>)</li> <li><code>&lt;PRODUCT_ID&gt;</code> : GPU \ubaa8\ub378 ID (\uc608: <code>20b7</code>)</li> </ul>"},{"location":"openstack/gpu/init-gpu-node/#1-iommu-grub","title":"1\ub2e8\uacc4: IOMMU \ud65c\uc131\ud654 (Grub \uc124\uc815)","text":"<p>CPU\uc758 \uac00\uc0c1\ud654 \uae30\ub2a5\uc744 \ud65c\uc131\ud654\ud558\uace0, \ud638\uc2a4\ud2b8 OS\uac00 GPU\ub97c \uc810\uc720\ud558\uc9c0 \uc54a\ub3c4\ub85d \uc124\uc815\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/init-gpu-node/#1","title":"1. \uc124\uc815 \ud30c\uc77c \uc218\uc815 (\uacf5\ud1b5)","text":"<p><code>/etc/default/grub</code> \ud30c\uc77c\uc744 \uc5f4\uc5b4 <code>GRUB_CMDLINE_LINUX</code> \ub77c\uc778\uc744 \uc218\uc815\ud569\ub2c8\ub2e4.</p> <pre><code># \uc778\ud154 CPU \uae30\uc900 \uc124\uc815 (AMD\uc758 \uacbd\uc6b0 intel_iommu \ub300\uc2e0 amd_iommu=on \uc0ac\uc6a9)\n# \uae30\uc874 \ub77c\uc778 \ub4a4\uc5d0 \uc544\ub798 \uc635\uc158\ub4e4\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\n# nouveau, nvidia \ub4dc\ub77c\uc774\ubc84\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\ub3c4\ub85d blacklist \ucc98\ub9ac\ud569\ub2c8\ub2e4.\nGRUB_CMDLINE_LINUX=\"... intel_iommu=on iommu=pt modprobe.blacklist=nouveau,nvidia,nvidia_drm vfio-pci.ids=&lt;VENDOR_ID&gt;:&lt;PRODUCT_ID&gt;\"\n</code></pre>"},{"location":"openstack/gpu/init-gpu-node/#2-grub-os","title":"2. Grub \uc801\uc6a9 \ubc0f \uc7ac\ubd80\ud305 (OS\ubcc4 \uc120\ud0dd)","text":"<p>\ud83c\udd70\ufe0f Ubuntu 22.04:</p> <pre><code>sudo update-grub\nsudo reboot\n</code></pre> <p>\ud83c\udd71\ufe0f Rocky Linux:</p> <pre><code># BIOS \ubaa8\ub4dc\uc77c \uacbd\uc6b0\nsudo grub2-mkconfig -o /boot/grub2/grub.cfg\n# UEFI \ubaa8\ub4dc\uc77c \uacbd\uc6b0 (\ub300\ubd80\ubd84\uc758 \ucd5c\uc2e0 \uc11c\ubc84)\nsudo grub2-mkconfig -o /boot/efi/EFI/rocky/grub.cfg\n\nsudo reboot\n</code></pre>"},{"location":"openstack/gpu/init-gpu-node/#3-iommu","title":"3. IOMMU \ud65c\uc131\ud654 \ud655\uc778","text":"<p>\uc7ac\ubd80\ud305 \ud6c4 \uc124\uc815\uc774 \uc801\uc6a9\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p> <pre><code>cat /proc/cmdline\n# \ucd9c\ub825 \uacb0\uacfc\uc5d0 intel_iommu=on \ub4f1\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc5b4\uc57c \ud568\n</code></pre>"},{"location":"openstack/gpu/init-gpu-node/#2-gpu-id","title":"2\ub2e8\uacc4: GPU \uc7a5\uce58 ID \ud655\uc778 \ubc0f \ubcc0\uc218 \ud655\ubcf4","text":"<p>\uc2dc\uc2a4\ud15c\uc5d0 \uc7a5\ucc29\ub41c GPU\uc758 PCI ID\ub97c \uc2dd\ubcc4\ud569\ub2c8\ub2e4.</p> <pre><code># NVIDIA GPU \uac80\uc0c9 \uc608\uc2dc\nlspci -nn | grep -i NVIDIA\n</code></pre> <p>\ucd9c\ub825 \uc608\uc2dc: <code>03:00.0 3D controller [0302]: NVIDIA Corporation ... [10de:20b7] ...</code></p> <ul> <li>\uc704 \uc608\uc2dc\uc5d0\uc11c <code>&lt;VENDOR_ID&gt;</code>\ub294 <code>10de</code>, <code>&lt;PRODUCT_ID&gt;</code>\ub294 <code>20b7</code>\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"openstack/gpu/init-gpu-node/#3-vfio","title":"3\ub2e8\uacc4: VFIO \ubaa8\ub4c8 \ub85c\ub4dc \uc124\uc815","text":"<p>GPU\ub97c \ud638\uc2a4\ud2b8 OS \ub300\uc2e0 VM\uc774 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d VFIO \ub4dc\ub77c\uc774\ubc84\ub97c \ub85c\ub4dc\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/init-gpu-node/#1_1","title":"1. \uc218\ub3d9 \ub85c\ub4dc (\ud14c\uc2a4\ud2b8\uc6a9)","text":"<pre><code>sudo modprobe vfio\nsudo modprobe vfio_iommu_type1\nsudo modprobe vfio-pci\n</code></pre>"},{"location":"openstack/gpu/init-gpu-node/#2-os","title":"2. \uc601\uad6c \uc801\uc6a9 \uc124\uc815 (OS\ubcc4 \uc120\ud0dd)","text":"<p>\ubd80\ud305 \uc2dc \uc790\ub3d9\uc73c\ub85c \ubaa8\ub4c8\uc774 \ub85c\ub4dc\ub418\ub3c4\ub85d \uc124\uc815\ud569\ub2c8\ub2e4.</p> <p>\ud83c\udd70\ufe0f Ubuntu 22.04:</p> <pre><code># /etc/modules \ud30c\uc77c \ud3b8\uc9d1\nsudo vi /etc/modules\n\n# \uc544\ub798 \ub0b4\uc6a9 \ucd94\uac00\nvfio\nvfio_iommu_type1\nvfio_pci\n</code></pre> <p>\ud83c\udd71\ufe0f Rocky Linux:</p> <pre><code># /etc/modules-load.d/vfio.conf \ud30c\uc77c \uc0dd\uc131\nsudo vi /etc/modules-load.d/vfio.conf\n\n# \uc544\ub798 \ub0b4\uc6a9 \ucd94\uac00\nvfio\nvfio_iommu_type1\nvfio-pci\n</code></pre>"},{"location":"openstack/gpu/init-gpu-node/#4-gpu-driver-binding","title":"4\ub2e8\uacc4: GPU \uc7a5\uce58 \ubc14\uc778\ub529 (Driver Binding)","text":"<p>\uc2dd\ubcc4\ud55c GPU ID\ub97c VFIO \ub4dc\ub77c\uc774\ubc84\uc5d0 \ubc14\uc778\ub529\ud558\uc5ec \ud638\uc2a4\ud2b8\uac00 \uc0ac\uc6a9\ud558\uc9c0 \ubabb\ud558\uac8c \ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/init-gpu-node/#1_2","title":"1. \ubc14\uc778\ub529 \uc124\uc815 \ud30c\uc77c \uc0dd\uc131 (\uacf5\ud1b5)","text":"<pre><code># /etc/modprobe.d/vfio.conf \ud30c\uc77c \uc0dd\uc131 \ub610\ub294 \uc218\uc815\nsudo vi /etc/modprobe.d/vfio.conf\n\n# \uc544\ub798 \ub0b4\uc6a9 \ucd94\uac00 (\ubcc0\uc218 \uce58\ud658 \ud544\uc694)\noptions vfio-pci ids=&lt;VENDOR_ID&gt;:&lt;PRODUCT_ID&gt;\n</code></pre>"},{"location":"openstack/gpu/init-gpu-node/#2-ramdisk-os","title":"2. \ub7a8\ub514\uc2a4\ud06c(Ramdisk) \uc5c5\ub370\uc774\ud2b8 \ubc0f \uc7ac\ubd80\ud305 (OS\ubcc4 \uc120\ud0dd)","text":"<p>\uc124\uc815 \ub0b4\uc6a9\uc744 \ucd08\uae30 \ubd80\ud305 \uc774\ubbf8\uc9c0\uc5d0 \ubc18\uc601\ud569\ub2c8\ub2e4.</p> <p>\ud83c\udd70\ufe0f Ubuntu 22.04:</p> <pre><code>sudo update-initramfs -u\nsudo reboot\n</code></pre> <p>\ud83c\udd71\ufe0f Rocky Linux:</p> <pre><code>sudo dracut -f\nsudo reboot\n</code></pre>"},{"location":"openstack/gpu/init-gpu-node/#5","title":"5\ub2e8\uacc4: \ucd5c\uc885 \uac80\uc99d","text":"<p>\uc7ac\ubd80\ud305 \ud6c4 GPU\uac00 <code>vfio-pci</code> \ub4dc\ub77c\uc774\ubc84\ub97c \uc0ac\uc6a9 \uc911\uc778\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/init-gpu-node/#1_3","title":"1. \ub4dc\ub77c\uc774\ubc84 \ud655\uc778","text":"<pre><code># Kernel driver in use\uac00 vfio-pci\ub85c \ub418\uc5b4 \uc788\uc5b4\uc57c \uc131\uacf5\nlspci -nnk -d &lt;VENDOR_ID&gt;:&lt;PRODUCT_ID&gt;\n</code></pre>"},{"location":"openstack/gpu/init-gpu-node/#2","title":"2. (\ud2b8\ub7ec\ube14\uc288\ud305) \ubc14\uc778\ub529\uc774 \uc548 \ub41c \uacbd\uc6b0 \uac15\uc81c \uc801\uc6a9","text":"<p>\ub9cc\uc57d \uc704 \ub2e8\uacc4 \ud6c4\uc5d0\ub3c4 \ub4dc\ub77c\uc774\ubc84\uac00 \uc7a1\ud788\uc9c0 \uc54a\ub294\ub2e4\uba74 \uc544\ub798 \uba85\ub839\uc5b4\ub85c \uac15\uc81c \ubc14\uc778\ub529\uc744 \uc2dc\ub3c4\ud569\ub2c8\ub2e4.</p> <pre><code>echo \"&lt;VENDOR_ID&gt; &lt;PRODUCT_ID&gt;\" | sudo tee /sys/bus/pci/drivers/vfio-pci/new_id\n</code></pre> <p>\uc774\ud6c4 \ub2e4\uc2dc <code>lspci -nnk</code> \uba85\ub839\uc5b4\ub85c \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/init-gpu-node/#rtx-gpu","title":"RTX \uacc4\uc5f4\uc758 GPU \uc0ac\uc6a9 \uc2dc","text":"<p>RTX \uacc4\uc5f4\uacfc \uac19\uc740 \uc18c\ube44\uc790\uc6a9 GPU\ub294 \uac00\uc0c1\ud654 \ud658\uacbd\uc744 \uace0\ub824\ud558\uc9c0 \uc54a\uae30\uc5d0 FLR(Function Level Reset) \uae30\ub2a5\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub530\ub77c\uc11c GPU \uc778\uc2a4\ud134\uc2a4\ub97c \uc885\ub8cc\ud558\uac70\ub098 \uc7ac\ubd80\ud305\ud558\uba74, GPU \ud558\ub4dc\uc6e8\uc5b4\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uace0 Stuck \uc0c1\ud0dc\ub85c \ub0a8\uc544 \ub370\uc774\ud130 \ucc0c\uaebc\uae30\ub97c \uac00\uc9c0\uace0 \uc788\ub2e4\uac00 VM\uc758 \ub2e4\uc74c \ub3d9\uc791\uc744 \ubc29\ud574\ud558\uace0, \uc774\ub97c \ud638\uc2a4\ud2b8\uac00 \uc751\ub2f5\uc774 \uc5c6\ub294 \uac83\uc73c\ub85c \uc778\uc2dd\ud558\uace0 \uc778\uc2a4\ud134\uc2a4\ub97c PAUSED \uc0c1\ud0dc\ub85c \uac15\uc81c \uc815\uc9c0\uc2dc\ucf1c\ubc84\ub9bd\ub2c8\ub2e4.</p> <p>\uc774\ub97c \ub9c9\uae30 \uc704\ud574 <code>vendor-reset</code> \ub4f1\uc758 \ud504\ub85c\uadf8\ub7a8\uc744 \uc0ac\uc6a9\ud558\uac70\ub098 \uc784\uc2dc\ub85c \uc258 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\ub294 \ubc29\ubc95\uc774 \uc788\uc2b5\ub2c8\ub2e4. \uc544\ub798\ub294 \uc258 \uc2a4\ud06c\ub9bd\ud2b8\ub85c FLR \uae30\ub2a5\uc744 \uc784\uc2dc \uc870\uce58\ud558\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4. \ubaa8\ub4e0 \uba85\ub839\uc740 GPU \ud638\uc2a4\ud2b8 \ub178\ub4dc\uc5d0\uc11c \uc2e4\ud589\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>cat &lt;&lt; 'EOF' &gt; qemu-hook.sh\n#!/bin/bash\n# GPU reset hook for RTX Passthrough VMs\n\nVM_NAME=\"$1\"\nACTION=\"$2\"\nPHASE=\"$3\"\n\n# \uc2e4\uc81c ID\ub294 lspci\ub85c \ud655\uc778 \ud6c4 \uc218\uc815 \ud544\uc694\nGPU_PCI=\"0000:01:00.0\"\nAUDIO_PCI=\"0000:01:00.1\" # \uc624\ub514\uc624 \uc7a5\uce58\uac00 \uc788\ub2e4\uba74 \uac19\uc774 \ub9ac\uc14b\ud574\uc57c \uc548\uc804\ud568\n\n# \ub85c\uadf8 \ud30c\uc77c \uc704\uce58 (Kolla \ub85c\uadf8 \ud3f4\ub354\ub85c \uc9c0\uc815\ud558\uc5ec \ud638\uc2a4\ud2b8\uc5d0\uc11c\ub3c4 \ubcfc \uc218 \uc788\uac8c \ud568)\nLOGFILE=\"/var/log/libvirt/gpu-reset.log\"\n\nif [[ \"$ACTION\" == \"stopped\" &amp;&amp; \"$PHASE\" == \"end\" ]]; then\n    echo \"[$(date)] VM $VM_NAME stopped. Resetting GPU...\" &gt;&gt; $LOGFILE\n\n    # 1. Remove (\uc7a5\uce58 \uc81c\uac70)\n    echo 1 &gt; /sys/bus/pci/devices/$GPU_PCI/remove\n    echo 1 &gt; /sys/bus/pci/devices/$AUDIO_PCI/remove 2&gt;/dev/null\n\n    # \uc7a0\uc2dc \ub300\uae30\n    sleep 2\n\n    # 2. Rescan (\uc7a5\uce58 \uc7ac\uc778\uc2dd)\n    echo 1 &gt; /sys/bus/pci/rescan\n\n    echo \"[$(date)] GPU Reset done.\" &gt;&gt; $LOGFILE\nfi\nEOF\n</code></pre> <p>\uc704 \uc258 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0 \ubcf5\uc0ac\ud558\uace0, \uad8c\ud55c\uc744 \ubd80\uc5ec\ud569\ub2c8\ub2e4.</p> <pre><code># 1. \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131\nsudo docker exec -u root nova_libvirt mkdir -p /etc/libvirt/hooks\n\n# 2. \ud30c\uc77c \ubcf5\uc0ac (docker cp \uc0ac\uc6a9)\nsudo docker cp qemu-hook.sh nova_libvirt:/etc/libvirt/hooks/qemu\n\n# 3. \uad8c\ud55c \uc124\uc815 (\uc2e4\ud589 \uad8c\ud55c \ud544\uc218)\nsudo docker exec -u root nova_libvirt chmod +x /etc/libvirt/hooks/qemu\nsudo docker exec -u root nova_libvirt chown root:root /etc/libvirt/hooks/qemu\n\n# 4. \ucee8\ud14c\uc774\ub108 \uc7ac\uc2dc\uc791\nsudo docker restart nova_libvirt\n</code></pre> <p>\uc124\uc815\uc774 \uc798 \uc801\uc6a9\ub418\uc5c8\ub2e4\uba74, gpu \uc778\uc2a4\ud134\uc2a4\uac00 \uc0ad\uc81c\ub418\uc5c8\uc744 \ub54c\ub9c8\ub2e4 \uc544\ub798 \ub85c\uadf8\uac00 \ucc0d\ud788\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>sudo docker exec -it nova_libvirt cat /var/log/libvirt/gpu-reset.log\n</code></pre> <pre><code>[Wed Nov 26 09:44:01 KST 2025] VM instance-0000001a stopped. Resetting GPU...\n[Wed Nov 26 09:44:03 KST 2025] GPU Reset done.\n[Wed Nov 26 09:49:32 KST 2025] VM instance-0000001b stopped. Resetting GPU...\n[Wed Nov 26 09:49:34 KST 2025] GPU Reset done.\n[Wed Nov 26 09:51:46 KST 2025] VM instance-0000001b stopped. Resetting GPU...\n[Wed Nov 26 09:51:49 KST 2025] GPU Reset done.\n[Wed Nov 26 09:56:32 KST 2025] VM instance-0000001c stopped. Resetting GPU...\n[Wed Nov 26 09:56:35 KST 2025] GPU Reset done.\n[Wed Nov 26 10:02:11 KST 2025] VM instance-0000001d stopped. Resetting GPU...\n[Wed Nov 26 10:02:13 KST 2025] GPU Reset done.\n[Wed Nov 26 10:03:10 KST 2025] VM instance-0000001d stopped. Resetting GPU...\n[Wed Nov 26 10:03:12 KST 2025] GPU Reset done.\n</code></pre>"},{"location":"openstack/gpu/pci-placement/","title":"PCI Passthrougu + Placement API \uc801\uc6a9","text":""},{"location":"openstack/gpu/pci-placement/#0","title":"0. \uc0ac\uc804 \ud655\uc778 \uc0ac\ud56d","text":"<ul> <li>Ubuntu 24.04 + Openstack 2025.2 \ud658\uacbd\uc5d0\uc11c \uc9c4\ud589</li> <li>GPU \ub178\ub4dc\uc5d0 IOMMU \ucee4\ub110 \uc124\uc815 \ud655\uc778</li> <li>GPU \uad00\ub9ac\uc790\uac00 VFIO\uc778\uc9c0 \ud655\uc778</li> </ul>"},{"location":"openstack/gpu/pci-placement/#1-nova-gpu","title":"1. Nova \uc124\uc815 \uc624\ubc84\ub77c\uc774\ub529 (GPU \uc778\uc2dd\uc2dc\ud0a4\uae30)","text":"<p>Kolla-Ansible\uc740 <code>/etc/kolla/config/nova/nova.conf</code> \ud30c\uc77c\uc744 \uc6b0\uc120\uc21c\uc704\ub85c \uc801\uc6a9\ud569\ub2c8\ub2e4. \uc5ec\uae30\uc5d0 GPU \uc815\ubcf4\ub97c \ubc15\uc81c\ud569\ub2c8\ub2e4.</p> <pre><code># \uc0ac\uc6a9\ud560 PCI \uc7a5\ube44\uc758 \uc774\ub984 \uc0dd\uc131\n# CUSTOM_ \uc811\ub450\uc0ac\ub294 \ud544\uc218\ub85c \ub4e4\uc5b4\uac00\uc57c \ud568\nopenstack resource class create CUSTOM_&lt;RESOURCE_NAME&gt;\n</code></pre> <pre><code># \uc124\uc815 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131\nsudo mkdir -p /etc/kolla/config/nova\n\n# \uc124\uc815 \ud30c\uc77c \uc791\uc131\nsudo vi /etc/kolla/config/nova/nova.conf\n</code></pre> <pre><code>[pci]\n# 1. [Compute \ub178\ub4dc\uc6a9] \ubb3c\ub9ac \uc11c\ubc84\uc758 PCI \uc7a5\uce58 \ud654\uc774\ud2b8\ub9ac\uc2a4\ud2b8\ndevice_spec = [{\"vendor_id\": \"&lt;VENDOR_ID&gt;\", \"product_id\": \"&lt;PRODUCT_ID&gt;\"}]\n\n# 2. [API \ub178\ub4dc\uc6a9] Flavor\uc5d0\uc11c \uc0ac\uc6a9\ud560 \ubcc4\uce6d(Alias) \uc815\uc758\n# name\uc740 \ub098\uc911\uc5d0 Flavor \ub9cc\ub4e4 \ub54c \uc501\ub2c8\ub2e4. (\uc5ec\uae30\uc11c\ub294 'nvidia-gpu'\ub85c \uc815\ud568)\n# nova\uac00 \uc7a5\uce58\ub97c \ubabb \ucc3e\uaca0\ub2e4 \ud560 \ub54c, type-PCI \ubcc0\uacbd \ud544\uc694\nalias = {\"vendor_id\": \"&lt;VENDOR_ID&gt;\", \"product_id\": \"&lt;PRODUCT_ID&gt;\", \"device_type\": \"type-PCI\", \"name\": \"&lt;RESOURCE_NAME&gt;\"}\n\n# 3. PCI\ub97c placement\uc5d0 \ud1b5\ud569\nreport_in_placement = true\n\n[filter_scheduler]\n# 3. [Scheduler \ub178\ub4dc\uc6a9] PCI \ud544\ud130 \ud65c\uc131\ud654 (\uae30\uc874 \ud544\ud130 \ub4a4\uc5d0 \ucd94\uac00)\navailable_filters = nova.scheduler.filters.all_filters\nenabled_filters = ComputeFilter,ImagePropertiesFilter,PciPassthroughFilter\n\npci_in_placement = true\n</code></pre> <p>\ucc38\uace0\ub85c <code>device_type</code> \uc740 \uc544\ub798\uc640 \uac19\uc740 \uc635\uc158\uc774 \uc788\uc2b5\ub2c8\ub2e4. <code>SR-IOV</code> \uae30\ub2a5\uc774 \uc788\ub2e4\uba74 <code>type-PF</code> \ub85c \ud574\uc57c \uc778\uc2dd\ud569\ub2c8\ub2e4.</p> \ud0c0\uc785 \uba85\uce6d \uc124\uba85 \ube44\uc720 \uc6a9\ub3c4 type-PCI \uc77c\ubc18 PCI \uc7a5\uce58 \"SR-IOV \uae30\ub2a5\uc774 \uc5c6\uac70\ub098, \uc548 \uc4f0\ub294 \uc77c\ubc18 \uc7a5\uce58.\" \"\ub2e8\ub3c5\uc8fc\ud0dd (\ucabc\uac24 \uc218 \uc5c6\uc74c, \ud1b5\uc9f8\ub85c \uc368\uc57c \ud568)\" \"\uc77c\ubc18\uc801\uc778 GPU Passthrough (RTX, T4 \ub4f1\uc744 \ud1b5\uc73c\ub85c \uc4f8 \ub54c)\" type-PF Physical Function SR-IOV\ub97c \uc9c0\uc6d0\ud558\ub294 \ubd80\ubaa8 \uc7a5\uce58. \uc790\uc2dd(VF)\uc744 \uc0dd\uc131\ud560 \ub2a5\ub825\uc774 \uc788\uc74c. \uc544\ud30c\ud2b8 \uc8fc\uc778 (\uc138\ub97c \ub193\uc744 \uc218 \uc788\uc74c) \ud638\uc2a4\ud2b8 OS\uac00 VF\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud574 \ubd99\ub4e4\uace0 \uc788\ub294 \uc6a9\ub3c4. (VM\uc5d0 \uc798 \uc548 \uc90c) type-VF Virtual Function \ubd80\ubaa8(PF)\ub85c\ubd80\ud130 \ud30c\uc0dd\ub41c \uc790\uc2dd \uc7a5\uce58. \uc544\ud30c\ud2b8 \uc138\uc785\uc790 (\ud55c \ud638\uc2e4\ub9cc \ube4c\ub824 \uc500) \uace0\uc131\ub2a5 \ub124\ud2b8\uc6cc\ud06c(SR-IOV)\ub098 vGPU\ub97c VM\uc5d0 \ud560\ub2f9\ud560 \ub54c \uc0ac\uc6a9. <p>SR-IOV\ub97c \uc9c0\uc6d0\ud558\ub294\uc9c0\ub294 \uc544\ub798\uc640 \uac19\uc740 \uba85\ub839\uc73c\ub85c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code># 1. \uba3c\uc800 GPU\uc758 PCI \uc8fc\uc18c\ub97c \ucc3e\uc2b5\ub2c8\ub2e4.\nlspci | grep -i nvidia\n# \uc608: 41:00.0 3D controller: NVIDIA Corporation ...\n\n# 2. \ud574\ub2f9 \uc8fc\uc18c(-s)\uc758 \uc0c1\uc138 \uc815\ubcf4(-vvv)\uc5d0\uc11c SR-IOV \ud0a4\uc6cc\ub4dc\ub97c \uac80\uc0c9\ud569\ub2c8\ub2e4.\nsudo lspci -s &lt;PCI_ADDRESS&gt; -vvv | grep -i \"Single Root I/O Virtualization\"\n</code></pre>"},{"location":"openstack/gpu/pci-placement/#11-20252","title":"1.1 2025.2 \ubc84\uc804\uc5d0 \ucd94\uac00\ub41c \ud56d\ubaa9","text":""},{"location":"openstack/gpu/pci-placement/#gpu","title":"GPU \ubcf4\uc548 \uad00\ub828","text":"<p><code>device_spec</code> \uc5d0\uc11c <code>one_time_use</code> \ud56d\ubaa9\uc744 \ucd94\uac00 \uc2dc, \uc0ac\uc6a9\uc790\uac00 \uc4f0\uace0 \ubc18\ub0a9\ud55c GPU\ub294 <code>reserved</code> \uc0c1\ud0dc\uac00 \ub418\uc5b4 \ub2e4\ub978 \uc0ac\uc6a9\uc790\uac00 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \uc0c1\ud0dc\uac00 \ub429\ub2c8\ub2e4.</p> <p>\uc774\ub97c \uad00\ub9ac\uc790\uac00 \uc2a4\ud06c\ub9bd\ud2b8\ub85c GPU \ucd08\uae30\ud654 \ud6c4, <code>openstack resource provider inventory set --reserved 0 ...</code> \uba85\ub839\uc744 \uc2e4\ud589\ud574\uc57c \ub2e4\uc2dc \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4.</p> <pre><code>[pci]\ndevice_spec = [{\"vendor_id\": \"&lt;VENDOR_ID&gt;\", \"product_id\": \"&lt;PRODUCT_ID&gt;\", \"one_time_use\": \"true\"}]\n</code></pre>"},{"location":"openstack/gpu/pci-placement/#live-migration","title":"Live Migration","text":"<p>live_migratable\uc740 \"GPU\ub97c \ub2ec\uace0 \uc788\ub294 VM\ub3c4 \ub044\uc9c0 \uc54a\uace0 \ub2e4\ub978 \uc11c\ubc84\ub85c \uc774\uc0ac(Live Migration)\uac08 \uc218 \uc788\uac8c \ud574\uc8fc\ub294 \uc2a4\uc704\uce58\"\uc785\ub2c8\ub2e4.</p> <p>\uc774\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc120 \uc544\ub798\uc640 \uac19\uc740 \uc870\uac74\uc744 \ucda9\uc871\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <ol> <li>SR-IOV \uc0ac\uc6a9 \uac00\ub2a5 \uc5ec\ubd80</li> <li>NVIDIA vGPU \ub77c\uc774\uc120\uc2a4</li> </ol> <pre><code>[pci]\ndevice_spec = [{ \"vendor_id\": \"&lt;VENDOR_ID&gt;\", \"product_id\": \"&lt;PRODUCT_ID&gt;\", \"live_migratable\": \"true\" }]\nalias = { \"name\": \"&lt;RESOURCE_NAME&gt;\", ... \"live_migratable\": \"true\" }\n</code></pre>"},{"location":"openstack/gpu/pci-placement/#2-reconfigure","title":"2. \uc124\uc815 \uc801\uc6a9 (Reconfigure)","text":"<p>\uae30\uc874 \uc624\ud508\uc2a4\ud0dd\uc744 \ub044\uc9c0 \uc54a\uace0 \uc124\uc815\ub9cc \uc5c5\ub370\uc774\ud2b8\ud569\ub2c8\ub2e4.</p> <pre><code># \uac00\uc0c1\ud658\uacbd \ud65c\uc131\ud654 \ud544\uc218\nsource ~/kolla-venv/bin/activate\n\n# \uc7ac\uc124\uc815 \uc801\uc6a9 (Nova \uc11c\ube44\uc2a4\ub4e4\ub9cc \uc7ac\uc2dc\uc791\ub428)\nkolla-ansible reconfigure -i multinode --tags nova\n</code></pre> <p>(\uc804\uccb4\ub97c \ub2e4 \ub3cc\ub9ac\uba74 \uc624\ub798 \uac78\ub9ac\ub2c8 <code>--tags nova</code>\ub85c \uc2dc\uac04 \ub2e8\ucd95 \uac00\ub2a5\ud569\ub2c8\ub2e4.)</p>"},{"location":"openstack/gpu/pci-placement/#3-placement","title":"3. Placement \ub4f1\ub85d \uac80\uc99d","text":"<p>Nova\uac00 GPU\ub97c \uac10\uc9c0\ud558\uace0 Placement\uc5d0 \"\ub098 GPU \uc788\uc5b4!\"\ub77c\uace0 \ubcf4\uace0\ud588\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/pci-placement/#31-compute-node-uuid","title":"3.1. \ubb3c\ub9ac \uc11c\ubc84(Compute Node) UUID \ud655\uc778","text":"<pre><code>openstack resource provider list\n</code></pre> <ul> <li>\uc5ec\uae30\uc11c GPU \ub178\ub4dc\uc758 \uc790\uc2dd <code>ID</code> (UUID)\ub97c \ubcf5\uc0ac\ud558\uc138\uc694.</li> </ul>"},{"location":"openstack/gpu/pci-placement/#32","title":"3.2. \uc778\ubca4\ud1a0\ub9ac \uc870\ud68c","text":"<pre><code># [UUID] \uc790\ub9ac\uc5d0 \ubcf5\uc0ac\ud55c ID\ub97c \ub123\uc73c\uc138\uc694\nopenstack resource provider inventory list [UUID]\n</code></pre> <p>[\uc131\uacf5 \ud310\ub3c5] \ucd9c\ub825 \uacb0\uacfc\uc5d0 \uc544\ub798\uc640 \ube44\uc2b7\ud55c \ud56d\ubaa9\uc774 \ubcf4\uc5ec\uc57c \ud569\ub2c8\ub2e4.</p> <ul> <li><code>PCI_DEVICE</code>: <code>total: 1</code> (\ub610\ub294 GPU \uac1c\uc218\ub9cc\ud07c)</li> <li>\ub610\ub294 <code>CUSTOM_PCI_10DE_20B7</code>: <code>total: ...</code></li> </ul>"},{"location":"openstack/gpu/pci-placement/#4","title":"4. \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 \ud14c\uc2a4\ud2b8","text":"<p>\uc774\uc81c \"GPU\uac00 \ub2ec\ub9b0 + \uc778\ud130\ub137\uc774 \ub418\ub294\" \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4ed\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/pci-placement/#41-gpu-flavor","title":"4.1. GPU Flavor \uc0dd\uc131","text":"<p>\uc544\uae4c <code>nova.conf</code>\uc5d0\uc11c \uc815\ud55c alias \uc774\ub984(<code>nvidia-gpu</code>)\uc744 \uc501\ub2c8\ub2e4.</p> <pre><code>openstack flavor create --ram 8192 --disk 50 --vcpus 4 &lt;FLAVOR_NAME&gt;\nopenstack flavor set \\\n  --property \"pci_passthrough:alias\"=\"&lt;RESOURCE_NAME&gt;:1\" \\\n  --property \"resources:&lt;CUSTOM_RESOURCE_CLASS&gt;=1\" \\\n  --property \"hw:pci_numa_affinity_policy\"=\"preferred\" \\\n  --property hw_machine_type=q35 \\\n  &lt;FLAVOR_NAME&gt;\n</code></pre> <p>\ub9cc\uc57d RTX \uacc4\uc5f4\uc758 \uac1c\uc778\uc6a9 GPU\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 <code>--property hw:kvm_hidden=true</code> \uc635\uc158\ub3c4 \ud568\uaed8 \uc801\uc6a9\ud569\ub2c8\ub2e4.</p> <p>\u203b \uc77c\ubd80 \ud658\uacbd\uc5d0\uc11c\ub294 alias + resources\ub97c \ub3d9\uc2dc\uc5d0 \uc4f8 \uacbd\uc6b0 \uc774\uc911 \ucc28\uac10\ub428. \uc774 \uacbd\uc6b0 resources \ud56d\ubaa9\ub9cc \uc81c\uac70\ud558\uace0 alias\ub9cc \uc0ac\uc6a9 \uad8c\uc7a5.</p>"},{"location":"openstack/gpu/pci-placement/#42","title":"4.2. \uc778\uc2a4\ud134\uc2a4 \uc2dc\uc791","text":"<pre><code>openstack server create --flavor gpu.flavor \\\n  --image \"Ubuntu 24.04\" \\\n  --network internal \\\n  my-gpu-vm\n</code></pre>"},{"location":"openstack/gpu/pci-placement/#43","title":"4.3. \ucd5c\uc885 \ud655\uc778","text":"<p>VM \uc811\uc18d \ud6c4:</p> <ul> <li><code>lspci</code>: NVIDIA \uc7a5\uce58\uac00 \ubcf4\uc774\ub294\uc9c0?</li> <li><code>ping 8.8.8.8</code>: \uc778\ud130\ub137\uc774 \ub418\ub294\uc9c0?</li> <li><code>nvidia-smi</code>: \ub4dc\ub77c\uc774\ubc84 \uc124\uce58 \ud6c4 GPU\uac00 \uc7a1\ud788\ub294\uc9c0?</li> </ul>"},{"location":"openstack/gpu/pci-placement/#5-api-advanced-verification","title":"5. API \uae30\ubc18 \ud560\ub2f9 \uac80\uc99d (Advanced Verification)","text":"<p>CLI\ub098 \ub300\uc2dc\ubcf4\ub4dc \uc0c1\uc5d0\uc11c\ub294 \ud655\uc778\ud558\uae30 \uc5b4\ub824\uc6b4 \"\uc2e4\uc81c \ub9ac\uc18c\uc2a4 \uc810\uc720 \ud604\ud669(Placement)\"\uacfc \"Flavor \ub0b4\ubd80 \uc124\uc815(Nova)\"\uc744 API\ub97c \ud1b5\ud574 \uc9c1\uc811 \uac80\uc99d\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/pci-placement/#50","title":"5.0. \ud658\uacbd \ubcc0\uc218 \uc124\uc815","text":"<p>\uac80\uc99d\uc5d0 \ud544\uc694\ud55c \ubcc0\uc218\ub4e4\uc744 \ubbf8\ub9ac \uc120\uc5b8\ud569\ub2c8\ub2e4. <code>&lt; &gt;</code>\ub85c \ud45c\uc2dc\ub41c \ubd80\ubd84\uc5d0 \uc2e4\uc81c \uac12\uc744 \uc785\ub825\ud558\uc138\uc694.</p> <pre><code># 1. \uc811\uc18d \uc815\ubcf4\nexport CONTROLLER_IP=$(openstack endpoint list --service keystone --interface public -c URL -f value | awk -F/ '{print $3}' | cut -d: -f1)\nexport PLACEMENT_PORT=$(openstack endpoint list --service placement --interface public -c URL -f value | awk -F: '{print $3}' | cut -d/ -f1)\nexport NOVA_PORT=$(openstack endpoint list --service compute --interface public -c URL -f value | awk -F: '{print $3}' | cut -d/ -f1)\n\n# 2. \uac80\uc99d \ub300\uc0c1 UUID (\uc0ac\uc804 \ud655\uc778 \ud544\uc694)\n# \uc0dd\uc131\ub41c \uc778\uc2a4\ud134\uc2a4\uc758 ID\nexport SERVER_ID=\"&lt;INSTANCE_ID&gt;\"\n# \uc0dd\uc131\ud55c GPU Flavor\uc758 ID\nexport FLAVOR_ID=\"&lt;FLAVOR_ID&gt;\"\n# GPU \uc790\uc6d0\uc744 \uac00\uc9c4 \ubb3c\ub9ac \ub178\ub4dc(\ud639\uc740 \uc790\uc2dd \ub178\ub4dc)\uc758 UUID\nexport RP_UUID=$(openstack resource provider allocation show $SERVER_ID -c resource_provider -c resources -f value | grep \"CUSTOM_\" | awk '{print $1}')\n</code></pre>"},{"location":"openstack/gpu/pci-placement/#51","title":"5.1. \uc778\uc99d \ud1a0\ud070 \ubc1c\uae09 (\ud1a0\ud070\uc774 \uc5c6\ub294 \uacbd\uc6b0)","text":"<pre><code># \uad00\ub9ac\uc790 \uad8c\ud55c \ub85c\ub4dc \ud6c4 \ud1a0\ud070 \ubc1c\uae09\nsource /etc/kolla/admin-openrc.sh\nexport OS_TOKEN=$(openstack token issue -c id -f value)\necho \"Token: $OS_TOKEN\"\n</code></pre>"},{"location":"openstack/gpu/pci-placement/#52-placement-api","title":"5.2. Placement API \uac80\uc99d (\ud558\ub4dc\uc6e8\uc5b4 \uad00\uc810)","text":"<p>GPU \uc790\uc6d0\uc774 \ubb3c\ub9ac\uc801\uc73c\ub85c \uc874\uc7ac\ud558\uba70, \uc0dd\uc131\ud55c \uc778\uc2a4\ud134\uc2a4\uac00 \uc774\ub97c \uc2e4\uc81c\ub85c \uc810\uc720\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/pci-placement/#1-resource-inventory","title":"1) Resource Inventory \uc870\ud68c (\uc7ac\uace0 \ud655\uc778)","text":"<pre><code>curl -s -X GET \"http://${CONTROLLER_IP}:${PLACEMENT_PORT}/resource_providers/${RP_UUID}/inventories\" \\\n  -H \"X-Auth-Token: ${OS_TOKEN}\" \\\n  -H \"OpenStack-API-Version: placement 1.28\" \\\n  -H \"Content-Type: application/json\" | json_pp\n</code></pre> <p>[\ud655\uc778 \ud3ec\uc778\ud2b8]</p> <ul> <li><code>total</code> \uac12\uc774 \uc2e4\uc81c \ubb3c\ub9ac GPU \uac1c\uc218\uc640 \uc77c\uce58\ud558\ub294\uc9c0 \ud655\uc778</li> <li>\ub9ac\uc18c\uc2a4 \ud074\ub798\uc2a4 \uc774\ub984\uc774 <code>CUSTOM_&lt;RESOURCE_NAME&gt;</code> (\ub610\ub294 \uc790\ub3d9 \uc0dd\uc131\ub41c \uc774\ub984)\uc778\uc9c0 \ud655\uc778</li> </ul>"},{"location":"openstack/gpu/pci-placement/#2-resource-allocations","title":"2) Resource Allocations \uc870\ud68c (\uc810\uc720 \ud655\uc778 \u2605\uc911\uc694)","text":"<pre><code>curl -s -X GET \"http://${CONTROLLER_IP}:${PLACEMENT_PORT}/resource_providers/${RP_UUID}/allocations\" \\\n  -H \"X-Auth-Token: ${OS_TOKEN}\" \\\n  -H \"OpenStack-API-Version: placement 1.28\" \\\n  -H \"Content-Type: application/json\" | json_pp\n</code></pre> <p>[\ud655\uc778 \ud3ec\uc778\ud2b8]</p> <ul> <li>\uc751\ub2f5 JSON\uc758 Key \uac12(Consumer UUID)\uc5d0 <code>&lt;INSTANCE_ID&gt;</code>\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc5b4\uc57c \ud568</li> <li>\ud574\ub2f9 \uc778\uc2a4\ud134\uc2a4\uac00 <code>CUSTOM_&lt;RESOURCE_NAME&gt;</code> \uc790\uc6d0\uc744 <code>1</code>\uac1c \uc0ac\uc6a9 \uc911\uc774\uc5b4\uc57c \ud568</li> </ul>"},{"location":"openstack/gpu/pci-placement/#53-nova-api","title":"5.3. Nova API \uac80\uc99d (\uc18c\ud504\ud2b8\uc6e8\uc5b4 \uad00\uc810)","text":"<p>\uc778\uc2a4\ud134\uc2a4\uac00 \uc62c\ubc14\ub978 Flavor\uc640 \uc2a4\ud399\uc73c\ub85c \uc0dd\uc131\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/gpu/pci-placement/#1-flavor-extra-specs","title":"1) Flavor \uc0c1\uc138 \uc2a4\ud399(Extra Specs) \uc870\ud68c","text":"<p>Flavor \uc870\ud68c \uc2dc \uae30\ubcf8 \uc815\ubcf4\uc5d0\ub294 GPU \uad00\ub828 \uc124\uc815\uc774 \ub098\uc624\uc9c0 \uc54a\uc73c\ubbc0\ub85c, <code>/os-extra_specs</code> \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \ud638\ucd9c\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>curl -s -X GET \"http://${CONTROLLER_IP}:${NOVA_PORT}/v2.1/flavors/${FLAVOR_ID}/os-extra_specs\" \\\n  -H \"X-Auth-Token: ${OS_TOKEN}\" \\\n  -H \"Content-Type: application/json\" | json_pp\n</code></pre> <p>[\ud655\uc778 \ud3ec\uc778\ud2b8]</p> <ul> <li><code>\"pci_passthrough:alias\": \"&lt;RESOURCE_NAME&gt;:1\"</code> \uc124\uc815 \uc874\uc7ac \uc5ec\ubd80</li> <li><code>\"resources:CUSTOM_&lt;RESOURCE_CLASS&gt;\": \"1\"</code> \uc124\uc815 \uc874\uc7ac \uc5ec\ubd80</li> <li><code>\"hw:pci_numa_affinity_policy\": \"preferred\"</code> \uc124\uc815 \uc874\uc7ac \uc5ec\ubd80</li> </ul>"},{"location":"openstack/gpu/pci-placement/#2-instance","title":"2) Instance \uc0c1\uc138 \uc815\ubcf4 \uc870\ud68c","text":"<pre><code>curl -s -X GET \"http://${CONTROLLER_IP}:${NOVA_PORT}/v2.1/servers/${SERVER_ID}\" \\\n  -H \"X-Auth-Token: ${OS_TOKEN}\" \\\n  -H \"Content-Type: application/json\" | json_pp\n</code></pre> <p>[\ud655\uc778 \ud3ec\uc778\ud2b8]</p> <ul> <li><code>status</code>: \"ACTIVE\"</li> <li><code>flavor.id</code>: \uc704\uc5d0\uc11c \uc870\ud68c\ud55c <code>&lt;FLAVOR_ID&gt;</code>\uc640 \uc77c\uce58\ud574\uc57c \ud568</li> </ul>"},{"location":"openstack/troubleshooting/k8s-network-error/","title":"OpenStack K8s \ub124\ud2b8\uc6cc\ud06c \ud1b5\uc2e0 \uc7a5\uc560 \ubc0f Harbor \ubc30\ud3ec \uc2e4\ud328","text":""},{"location":"openstack/troubleshooting/k8s-network-error/#1-issue-summary","title":"1. \uac1c\uc694 (Issue Summary)","text":"<ul> <li> <p>\uc99d\uc0c1:</p> </li> <li> <p>OpenStack \uae30\ubc18 Kubernetes \ud074\ub7ec\uc2a4\ud130 \uad6c\ucd95 \ud6c4, Pod \uac04 \ud1b5\uc2e0 \ubc0f Service IP(<code>ClusterIP</code>) \ud1b5\uc2e0 \ubd88\uac00.</p> </li> <li><code>nslookup</code> \ud0c0\uc784\uc544\uc6c3 \ubc0f Pod \ub0b4\ubd80\uc5d0\uc11c \uc678\ubd80 \uc778\ud130\ub137 \ud1b5\uc2e0 \ubd88\uac00.</li> <li> <p>\ub124\ud2b8\uc6cc\ud06c \uc7a5\uc560\ub85c \uc778\ud574 Harbor \uc124\uce58\uac00 \uc911\ub2e8\ub418\uc5c8\uc73c\uba70, <code>harbor-jobservice</code>\uac00 <code>harbor-core</code>\uc5d0 \uc5f0\uacb0\ud558\uc9c0 \ubabb\ud558\ub294 \uc624\ub958(<code>connection refused</code>) \ubc1c\uc0dd</p> </li> <li> <p>\uc601\ud5a5\ub3c4: \ud074\ub7ec\uc2a4\ud130 \ub0b4 \ubaa8\ub4e0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ud1b5\uc2e0 \ub450\uc808, \uc2e0\uaddc \uc194\ub8e8\uc158(Harbor) \ubc30\ud3ec \ubd88\uac00.</p> </li> </ul>"},{"location":"openstack/troubleshooting/k8s-network-error/#2-environment","title":"2. \ud658\uacbd \uc815\ubcf4 (Environment)","text":"<ul> <li>Infra: OpenStack Flamingo (2025.2)</li> <li>OS: Ubuntu 22.04 LTS</li> <li>Kubernetes: v1.33 (Master 1, Worker 3)</li> <li>CNI: Calico (Overlay Network)</li> <li>Application: Harbor Registry</li> </ul>"},{"location":"openstack/troubleshooting/k8s-network-error/#3-root-cause-analysis","title":"3. \uc6d0\uc778 \ubd84\uc11d (Root Cause Analysis)","text":""},{"location":"openstack/troubleshooting/k8s-network-error/#31-openstack-port-security","title":"3.1. \ud575\uc2ec \uc6d0\uc778: OpenStack Port Security","text":"<ul> <li>\ud604\uc0c1: Kubernetes CNI(Calico)\ub294 Pod\ub9c8\ub2e4 \uace0\uc720 IP \ub300\uc5ed(\uc608: <code>10.244.x.x</code>)\uc744 \ud560\ub2f9\ud568.</li> <li>\uc6d0\uc778: OpenStack Neutron\uc758 Port Security(\ud3ec\ud2b8 \ubcf4\uc548) \uae30\ub2a5\uc740 VM\uc758 \ub124\ud2b8\uc6cc\ud06c \uc778\ud130\ud398\uc774\uc2a4(Port)\uc5d0 \ud560\ub2f9\ub41c \uace0\uc815 IP(<code>Fixed IP</code>) \uc774\uc678\uc758 \ud2b8\ub798\ud53d\uc774 \uac10\uc9c0\ub418\uba74 \uc774\ub97c **IP \uc2a4\ud478\ud551(IP Spoofing) \uacf5\uaca9\uc73c\ub85c \uac04\uc8fc\ud558\uc5ec \ucc28\ub2e8(Drop)**\ud568.</li> <li>\uacb0\uacfc: Pod\uc5d0\uc11c \ub098\uac00\ub294 \ubaa8\ub4e0 \uc624\ubc84\ub808\uc774 \ud2b8\ub798\ud53d\uc774 OpenStack \ub124\ud2b8\uc6cc\ud06c \ub808\ubca8\uc5d0\uc11c \ucc28\ub2e8\ub428.</li> </ul>"},{"location":"openstack/troubleshooting/k8s-network-error/#32-clusterip","title":"3.2. \ubd80\ucc28\uc801 \ud63c\ub780: ClusterIP\uc758 \ud2b9\uc131","text":"<ul> <li>\ud604\uc0c1: \ub124\ud2b8\uc6cc\ud06c \uc870\uce58 \ud6c4\uc5d0\ub3c4 Service IP(<code>10.96.0.1</code>)\ub85c Ping\uc774 \ub418\uc9c0 \uc54a\uc544 \ud574\uacb0\ub418\uc9c0 \uc54a\uc740 \uac83\uc73c\ub85c \uc624\uc778.</li> <li>\uc6d0\uc778: K8s\uc758 ClusterIP\ub294 \uac00\uc0c1 IP(iptables/IPVS \uaddc\uce59)\uc774\uba70, \uae30\ubcf8\uc801\uc73c\ub85c ICMP(Ping) \ud504\ub85c\ud1a0\ucf5c\uc744 \ucc98\ub9ac\ud558\uc9c0 \uc54a\uc74c.</li> <li>\uacb0\uacfc: Ping \uc2e4\ud328\ub294 \uc815\uc0c1\uc774\uc9c0\ub9cc, \uc774\ub97c \ub124\ud2b8\uc6cc\ud06c \uc7a5\uc560\ub85c \uc624\ud310\ud560 \ubed4\ud568. (TCP/UDP \uc5f0\uacb0 \ud14c\uc2a4\ud2b8\ub85c \uac80\uc99d \ud544\uc694)</li> </ul>"},{"location":"openstack/troubleshooting/k8s-network-error/#33-harbor","title":"3.3. Harbor \uc124\uce58 \uc2e4\ud328 \uc6d0\uc778","text":"<ul> <li>\ucd08\uae30 \ub124\ud2b8\uc6cc\ud06c \ub2e8\uc808 \uc0c1\ud0dc\uc5d0\uc11c \uc124\uce58\ub97c \uc2dc\ub3c4\ud558\uc5ec \ucd08\uae30\ud654 Job\uc774 \uc2e4\ud328\ud568.</li> <li>Helm \ucc28\ud2b8 \uc124\uce58 \uc2dc \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \ubbf8\uc9c0\uc815\uc73c\ub85c \uc778\ud574 PVC\uac00 <code>default</code> \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \uc0dd\uc131\ub418\uc5b4, \uc7ac\uc124\uce58 \uc2dc\uc5d0\ub3c4 \uae30\uc874 \uc624\uc5fc\ub41c \ubcfc\ub968\uc744 \ucc38\uc870\ud558\ub294 \ubb38\uc81c \ubc1c\uc0dd.</li> </ul>"},{"location":"openstack/troubleshooting/k8s-network-error/#4-troubleshooting-steps","title":"4. \ud574\uacb0 \uacfc\uc815 (Troubleshooting Steps)","text":""},{"location":"openstack/troubleshooting/k8s-network-error/#41","title":"4.1. \ub124\ud2b8\uc6cc\ud06c \uc9c4\ub2e8","text":"<ol> <li>\ud14c\uc2a4\ud2b8 Pod \ubc30\ud3ec: <code>dns-test</code> \ubc0f <code>netshoot</code> Pod \ubc30\ud3ec.</li> <li>\uc99d\uc0c1 \ud655\uc778:<ul> <li><code>ping 10.96.0.1</code> (API Server) -&gt; \uc2e4\ud328 (\uc815\uc0c1 \ub3d9\uc791\uc784)</li> <li><code>nslookup kubernetes.default</code> -&gt; \uc2e4\ud328 (Timeout, \ube44\uc815\uc0c1)</li> <li><code>wget https://10.96.0.1:443</code> -&gt; \uc2e4\ud328 (Timeout, \ube44\uc815\uc0c1)</li> </ul> </li> <li>\uc870\uce58 \uc218\ud589 (OpenStack): \ub9c8\uc2a4\ud130 \ubc0f \uc6cc\ucee4 \ub178\ub4dc\uc758 OpenStack Port\uc5d0 \uc124\uc815\ub41c Port Security \ube44\ud65c\uc131\ud654 \ubc0f Security Group \uc81c\uac70.</li> <li>\uac80\uc99d:<ul> <li><code>nslookup kubernetes.default</code> -&gt; \uc131\uacf5 (DNS \uc751\ub2f5 \uc218\uc2e0)</li> <li><code>wget https://10.96.0.1:443</code> -&gt; TLS Handshake Error \ubc1c\uc0dd (\ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0 \uc131\uacf5 \uc758\ubbf8)</li> <li><code>nc -zv 10.96.0.1 443</code> -&gt; Open \ud655\uc778.</li> </ul> </li> </ol>"},{"location":"openstack/troubleshooting/k8s-network-error/#42-harbor","title":"4.2. Harbor \ubcf5\uad6c","text":"<ol> <li>\uae30\uc874 \uc124\uce58 \uc81c\uac70: <code>helm uninstall harbor -n harbor</code></li> <li>\uc794\uc874 \ub370\uc774\ud130 \uc0ad\uc81c (\uc911\uc694): <code>default</code> \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \uc798\ubabb \uc0dd\uc131\ub41c PVC \uc77c\uad04 \uc0ad\uc81c.</li> <li><code>kubectl delete pvc --all -n default</code> (Harbor \uad00\ub828)</li> <li>\uc7ac\uc124\uce58: \ub124\ud2b8\uc6cc\ud06c \uc815\uc0c1\ud654 \ud655\uc778 \ud6c4 Helm \uc7ac\ubc30\ud3ec.</li> </ol>"},{"location":"openstack/troubleshooting/k8s-network-error/#5-solution","title":"5. \ucd5c\uc885 \ud574\uacb0\ucc45 (Solution)","text":""},{"location":"openstack/troubleshooting/k8s-network-error/#51-openstack","title":"5.1. OpenStack \ub124\ud2b8\uc6cc\ud06c \uc124\uc815 \ubcc0\uacbd","text":"<p>K8s \ub178\ub4dc(VM)\uac00 \uc0ac\uc6a9\ud558\ub294 Port\uc5d0 \ub300\ud574 \uc544\ub798 \ub450 \uac00\uc9c0 \ubc29\ubc95 \uc911 \ud558\ub098 \uc801\uc6a9.</p> <p>\ubc29\ubc95 A: Port Security \ube44\ud65c\uc131\ud654 (\ube60\ub978 \ud574\uacb0) \ubcf4\uc548 \uadf8\ub8f9\uc744 \uc81c\uac70\ud558\uace0 \ud3ec\ud2b8 \ubcf4\uc548\uc744 \ub054\uc73c\ub85c\uc368 \ubaa8\ub4e0 \ud2b8\ub798\ud53d \ud5c8\uc6a9.</p> <pre><code>openstack port set --no-security-group --disable-port-security &lt;PORT_ID&gt;\n</code></pre> <p>\ubc29\ubc95 B: Allowed Address Pairs \uc124\uc815 (\uad8c\uc7a5, \ubcf4\uc548 \uac15\ud654) Port Security\ub97c \ucf1c\ub450\ub418, Pod/Service \ub300\uc5ed\uc744 \uc608\uc678\ub85c \ud5c8\uc6a9.</p> <pre><code># 1. Pod \ubc0f Service CIDR \ud5c8\uc6a9\nopenstack port set --allowed-address ip_address=10.244.0.0/16 &lt;PORT_ID&gt;\nopenstack port set --allowed-address ip_address=10.96.0.0/12 &lt;PORT_ID&gt;\n\n# 2. \ubcf4\uc548 \uadf8\ub8f9\uc5d0 IPIP/VXLAN/BGP \ub4f1 \ud544\uc218 \ud504\ub85c\ud1a0\ucf5c \ud5c8\uc6a9 \uaddc\uce59 \ucd94\uac00\n# 3. Port Security \ud65c\uc131\ud654\nopenstack port set --enable-port-security &lt;PORT_ID&gt;\n</code></pre>"},{"location":"openstack/troubleshooting/k8s-network-error/#52-harbor","title":"5.2. \uc560\ud50c\ub9ac\ucf00\uc774\uc158(Harbor) \uc7ac\ubc30\ud3ec","text":"<p>\ub124\ud2b8\uc6cc\ud06c\uac00 \ubcf5\uad6c\ub41c \ud6c4, \uae30\uc874\uc758 \uc2e4\ud328\ud55c \ub9ac\uc18c\uc2a4(\ud2b9\ud788 PVC)\ub97c \uc644\uc804\ud788 \uc815\ub9ac\ud558\uace0 \uc7ac\uc124\uce58\ud558\uc5ec DB \ucd08\uae30\ud654 \ud504\ub85c\uc138\uc2a4\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc218\ud589\ub418\ub3c4\ub85d \ud568.</p>"},{"location":"openstack/troubleshooting/k8s-network-error/#6-lessons-learned","title":"6. \uad50\ud6c8 \ubc0f \ucc38\uace0 (Lessons Learned)","text":"<ol> <li>OpenStack + K8s: OpenStack \uc704\uc5d0 K8s\ub97c \uc62c\ub9b4 \ub54c\ub294 \ubc18\ub4dc\uc2dc Port Security \uc124\uc815\uacfc Allowed Address Pairs\ub97c \uc0ac\uc804\uc5d0 \uacc4\ud68d\ud574\uc57c \ud55c\ub2e4.</li> <li>ClusterIP Ping: Kubernetes Service IP(<code>ClusterIP</code>)\ub294 Ping\uc774 \uc548 \ub418\ub294 \uac83\uc774 \uc815\uc0c1\uc774\ub2e4. \ub124\ud2b8\uc6cc\ud06c \ud14c\uc2a4\ud2b8\ub294 \ubc18\ub4dc\uc2dc <code>curl</code>, <code>wget</code>, <code>nc</code>, <code>nslookup</code>\uc744 \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.</li> <li>Clean Re-install: Stateful\ud55c \uc560\ud50c\ub9ac\ucf00\uc774\uc158(DB \ud3ec\ud568) \uc124\uce58 \uc2e4\ud328 \uc2dc, \ub2e8\uc21c\ud788 Pod\ub9cc \uc7ac\uc2dc\uc791\ud558\uc9c0 \ub9d0\uace0 PVC\ub97c \ud3ec\ud568\ud55c \ubaa8\ub4e0 \ub370\uc774\ud130\ub97c \uc0ad\uc81c \ud6c4 \uc7ac\uc124\uce58\ud558\ub294 \uac83\uc774 \uac00\uc7a5 \ube60\ub974\uace0 \ud655\uc2e4\ud55c \ud574\uacb0\ucc45\uc774\ub2e4.</li> </ol>"},{"location":"openstack/utils/golden-image/","title":"OpenStack \uace8\ub4e0 \uc774\ubbf8\uc9c0(Golden Image) \uc0dd\uc131 \uac00\uc774\ub4dc","text":"<p>OpenStack \ud658\uacbd(Nova, Glance)\uc5d0\uc11c \uc778\uc2a4\ud134\uc2a4 \ubc30\ud3ec \uc2dc \uc989\uc2dc \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uae68\ub057\ud55c Cloud Image\ub97c \ub9cc\ub4e4\uae30 \uc704\ud55c \uc808\ucc28\uc785\ub2c8\ub2e4.</p> <p>\ud544\uc218 \uc804\uc81c \uc870\uac74:</p> <ul> <li>\uc791\uc5c5\uc740 \ub85c\uceec KVM/QEMU \ud658\uacbd\uc774\ub098 OpenStack \ub0b4 \uc784\uc2dc \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c \uc218\ud589\ud569\ub2c8\ub2e4.</li> <li>\ubaa8\ub4e0 \uba85\ub839\uc740 root \uad8c\ud55c\uc73c\ub85c \uc2e4\ud589\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"openstack/utils/golden-image/#1","title":"1. \ubca0\uc774\uc2a4 \uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc","text":"<p>\ud074\ub77c\uc6b0\ub4dc\uc6a9\uc73c\ub85c \ubbf8\ub9ac \ube4c\ub4dc\ub41c Cloud Image(qcow2, img)\ub97c \ubc1b\uc2b5\ub2c8\ub2e4.</p> <pre><code>mkdir -p ~/golden-image-work\ncd ~/golden-image-work\n</code></pre> <p>1. Ubuntu 24.04 LTS (Noble):</p> <pre><code>wget https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img -O ubuntu-24.04-base.qcow2\n</code></pre> <p>2. Rocky Linux 9:</p> <pre><code>wget https://dl.rockylinux.org/pub/rocky/9/images/x86_64/Rocky-9-GenericCloud-Base.latest.x86_64.qcow2 -O rocky-9-base.qcow2\n</code></pre> <p>3. AlmaLinux 9:</p> <pre><code>wget https://repo.almalinux.org/almalinux/9/cloud/x86_64/images/AlmaLinux-9-GenericCloud-latest.x86_64.qcow2 -O AlmaLinux-9-base.qcow2\n</code></pre> <p>4. CentOS Stream 9:</p> <pre><code>wget https://cloud.centos.org/centos/9-stream/x86_64/images/CentOS-Stream-GenericCloud-9-latest.x86_64.qcow2 -O CentOS-Stream-9-base.qcow2\n</code></pre> <p>5. Debian 12:</p> <pre><code>wget https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-generic-amd64.qcow2 -O debian-12-base.qcow2\n</code></pre> <pre><code># `unable to resolve host addree` \uc624\ub958 \ubc1c\uc0dd \uc2dc, dns \uc11c\ubc84 \ucd94\uac00\necho \"nameserver 8.8.8.8\" | sudo tee -a /etc/resolv.conf\n</code></pre>"},{"location":"openstack/utils/golden-image/#2","title":"2. \uc774\ubbf8\uc9c0 \uc811\uadfc \uad8c\ud55c \uc124\uc815","text":"<p>Cloud Image\ub294 \uae30\ubcf8\uc801\uc73c\ub85c root \ube44\ubc00\ubc88\ud638\uc640 SSH \uc811\uc18d\uc774 \ub9c9\ud600\uc788\uc2b5\ub2c8\ub2e4.</p> <p>\ub530\ub77c\uc11c \ub85c\uceec KVM\uc5d0\uc11c \ubd80\ud305 \ubc0f \uc791\uc5c5\uc744 \uc704\ud574 <code>libguestfs-tools</code> \uc640 <code>virt-customize</code> \ub3c4\uad6c\ub97c \uc124\uce58\ud558\uc5ec \ube44\ubc00\ubc88\ud638\ub97c \uac15\uc81c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4.</p> <pre><code># \ub3c4\uad6c \uc124\uce58 (Ubuntu \uae30\uc900)\nsudo apt update\nsudo apt install -y libguestfs-tools qemu-kvm virt-manager\n\n# \uc774\ubbf8\uc9c0\uc5d0 root \ube44\ubc00\ubc88\ud638 \uc124\uc815 (\uc608: root1234)\n# \uc8fc\uc758: \uc774 \ube44\ubc00\ubc88\ud638\ub294 \ub098\uc911\uc5d0 \uc2a4\ud06c\ub9bd\ud2b8 \uc2e4\ud589 \ud6c4 \uc81c\uac70\ud560 \uac83\uc785\ub2c8\ub2e4.\nsudo virt-customize -a ubuntu-24.04-base.qcow2 --root-password password:root1234\n</code></pre>"},{"location":"openstack/utils/golden-image/#3-kvm-vm","title":"3. KVM\uc73c\ub85c VM \ubd80\ud305 \ubc0f \uc811\uc18d","text":""},{"location":"openstack/utils/golden-image/#31-ubuntudebian","title":"3.1 Ubuntu/Debian","text":"<pre><code># Ubuntu\ub294 \uae30\ubcf8 \uc6a9\ub7c9\uc774 \uc801\uc5b4 \uc6a9\ub7c9\uc744 \ub298\ub824\uc90d\ub2c8\ub2e4.\nqemu-img resize ubuntu-24.04-base.qcow2 +10G\n\n# KVM\uc73c\ub85c \ubd80\ud305 (\uba54\ubaa8\ub9ac 4G, CPU 2 Core)\nsudo kvm -m 2048 -smp 2 -hda ubuntu-24.04-base.qcow2 -net nic -net user,hostfwd=tcp::2222-:22 -nographic\n</code></pre> <p>\uc704\uc5d0\uc11c <code>login:</code> \ud654\uba74\uc774 \ub728\uba74 \uc704\uc5d0\uc11c \uc124\uc815\ud55c \ube44\ubc00\ubc88\ud638\ub85c \uc811\uc18d\ud569\ub2c8\ub2e4.</p> <p>\ud3b8\ud558\uac8c \ubd99\uc5ec\ub123\uae30 \uc704\ud574\uc11c ssh \uc811\uc18d \uc124\uc815\uc744 \ud65c\uc131\ud654\ud574\uc90d\ub2c8\ub2e4. (\uae30\uc874 \ud130\ubbf8\ub110\uc740 \uae00\uc790\uac00 \ubc00\ub9bd\ub2c8\ub2e4.)</p> <p>\uae30\ubcf8 \uc774\ubbf8\uc9c0\uc5d0 \ud0a4\uac00 \uc5c6\ub294 \uacbd\uc6b0\uac00 \uc788\uc5b4\uc11c \ud0a4\ubd80\ud130 \uc0dd\uc131\ud569\ub2c8\ub2e4.</p> <pre><code># \ucd9c\ub825 \uacb0\uacfc\uac00 \uc5c6\ub2e4\uba74 \ud0a4\ub97c \ub9cc\ub4e4\uc5b4\uc918\uc57c \ud569\ub2c8\ub2e4.\nls -l /etc/ssh/ssh_host_*\n</code></pre> <pre><code># \ud0a4 \uc0dd\uc131\nssh-keygen -A\n\n# sshd \uc124\uc815 \uc911 \uc544\ub798 \ub450 \ud56d\ubaa9\uc744 yes\ub85c \ubcc0\uacbd\nvi /etc/ssh/sshd_config\n...\nPermitRootLogin yes\nPasswordAuthentication yes\n...\n\n# Override \ud558\ub294 \uc124\uc815 \ud30c\uc77c \uc81c\uac70\nrm -f /etc/ssh/sshd_config.d/60-cloudimg-settings.conf\n\n# ssh \uc7ac\uc2dc\uc791\nsystemctl restart ssh\n\n# \uc124\uc815 \ud655\uc778\nsshd -T | grep passwordauthentication\n</code></pre> <pre><code># \uc0c1\ud0dc \ud655\uc778\nsystemctl status ssh\n\n# \ud639\uc2dc disable\uc774\ub77c\uba74 enable\ub85c \ubcc0\uacbd\nsystemctl enable ssh\n</code></pre> <p>\uc544\ub798 \uba85\ub839 \uc2e4\ud589 \uc2dc, ens3\uacfc \uac19\uc740 \ub124\ud2b8\uc6cc\ud06c\uac00 DOWN \uc0c1\ud0dc\ub77c\uba74 \uc544\ub798 \uc870\uce58\ub97c \ucde8\ud569\ub2c8\ub2e4.</p> <pre><code>ip a\n</code></pre> <p>ens3\uc740 \uc2e4\uc81c \ub124\ud2b8\uc6cc\ud06c \uc774\ub984\uc73c\ub85c \ubcc0\uacbd\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code># \uc778\ud130\ud398\uc774\uc2a4 \ucf1c\uae30\nip link set ens3 up\n\n# IP \uc8fc\uc18c \ud560\ub2f9(10.0.2.15\ub294 KVM \uae30\ubcf8 IP)\nip addr add 10.0.2.15/24 dev ens3\n\n# \uac8c\uc774\ud2b8\uc6e8\uc774 \uc5f0\uacb0\nip route add default via 10.0.2.2\n\n# DNS \uc124\uc815\necho \"nameserver 8.8.8.8\" &gt; /etc/resolv.conf\n</code></pre> <pre><code># \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0 \ud655\uc778\nping -c 3 8.8.8.8\n</code></pre>"},{"location":"openstack/utils/golden-image/#32-rockyrhel","title":"3.2 Rocky/RHEL","text":"<p>Rocky\ub294 CPU\uc758 \uc5ec\ub7ec \uae30\ub2a5\uc744 \uc694\uad6c\ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c \uc544\ub798\uc640 \uac19\uc774 \ud638\uc2a4\ud2b8 CPU\ub97c \uadf8\ub300\ub85c VM\uc5d0 \uc804\ub2ec\ud558\ub3c4\ub85d <code>-cpu host</code> \uc635\uc158\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>sudo kvm -m 4096 -smp 2 -cpu host -hda rocky-9-base.qcow2 -net nic -net user,hostfwd=tcp::2222-:22 -nographic\n</code></pre> <p>ssh \uc811\uc18d\uc744 \uc704\ud574 \uc124\uc815\uc744 \ubcc0\uacbd\ud569\ub2c8\ub2e4.</p> <pre><code># sshd \uc124\uc815 \uc911 \uc544\ub798 \ub450 \ud56d\ubaa9\uc744 yes\ub85c \ubcc0\uacbd\nvi /etc/ssh/sshd_config\n\n...\nPermitRootLogin yes\nPasswordAuthentication yes\n...\n\n# ssh \uc7ac\uc2dc\uc791\nsystemctl restart sshd\n</code></pre> <p>\uc0c8\ub85c\uc6b4 \ud130\ubbf8\ub110\uc744 \uc5f4\uc5b4 ssh\ub85c \uc811\uc18d\ud569\ub2c8\ub2e4.</p> <pre><code>ssh root@localhost -p 2222\n</code></pre> <p>\uc791\uc5c5 \uc911 VM\uc744 \uba48\ucd94\uac70\ub098 \uc885\ub8cc\ud558\uace0 \uc2f6\ub2e4\uba74 <code>Ctrl + A</code> \ud0a4\ub97c  \ub20c\ub800\ub2e4\uac00 \ub5bc\uace0, \ubc14\ub85c <code>x</code> \ud0a4\ub97c \ub204\ub974\uba74 KVM\uc774 \uac15\uc81c \uc885\ub8cc\ub429\ub2c8\ub2e4.</p>"},{"location":"openstack/utils/golden-image/#kvm","title":"KVM \uad00\ub828 \uc624\ub958","text":""},{"location":"openstack/utils/golden-image/#1-lock","title":"1 ) <code>Lock</code> \uc624\ub958","text":"<p>KVM \ubd80\ud305 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uac70\ub098, <code>lock</code> \uc624\ub958\uac00 \ubc1c\uc0dd\ud55c\ub2e4\uba74 \ud504\ub85c\uc138\uc2a4\ub97c \uc8fd\uc774\uace0 \ub2e4\uc2dc \uc704 \uacfc\uc815\uc744 \uc9c4\ud589\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code># \uc2e4\ud589 \uc911\uc778 kvm \ud504\ub85c\uc138\uc2a4 \ud655\uc778\nps -ef | grep kvm\n</code></pre> <pre><code># 'ubuntu-24.04-base.qcow2'\uac00 \ud3ec\ud568\ub41c \ubaa8\ub4e0 \ud504\ub85c\uc138\uc2a4 \uac15\uc81c \uc885\ub8cc\npkill -f ubuntu-24.04-base.qcow2\n\n# \ub9cc\uc57d \uc704\uc5d0 \uba85\ub839\uc774 \uc2e4\ud589\ub418\uc9c0 \uc54a\ub294\ub2e4\uba74\npkill -9 &lt;PID&gt;\n</code></pre>"},{"location":"openstack/utils/golden-image/#2-kvm-vm","title":"2) KVM \uc6a9\ub7c9\uc744 \ub298\ub824\ub3c4 VM \uc6a9\ub7c9\uc774 \ub3d9\uc77c\ud55c \uacbd\uc6b0","text":"<p>\ud604\uc7ac \uc544\ub798 \uba85\ub839\uc744 \ud1b5\ud574 <code>sda</code> \ub294 \ub298\ub9b0 \uc6a9\ub7c9\uc778\ub370, <code>sda1</code> \uc774 \uc5ec\uc804\ud788 \uadf8\ub300\ub85c\uc778 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code># \ud604\uc7ac \uc0c1\ud669 \ud655\uc778\nlsblk\n</code></pre> <p>\uc6b0\uc120 \ud30c\ud2f0\uc158\uc744 \ub514\uc2a4\ud06c \ub05d\uae4c\uc9c0 \ub298\ub9bd\ub2c8\ub2e4.</p> <pre><code>growpart /dev/sda 1\n</code></pre> <p>\ub298\uc5b4\ub09c \ud30c\ud2f0\uc158\uc5d0 \ub9de\ucdb0\uc11c \ud30c\uc77c\uc2dc\uc2a4\ud15c\uc744 \ud655\uc7a5\ud569\ub2c8\ub2e4.</p> <pre><code>resize2fs /dev/sda1\n</code></pre> <p>\uc6a9\ub7c9\uc774 \ub298\uc5b4\ub0ac\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p> <pre><code>df -h\n</code></pre>"},{"location":"openstack/utils/golden-image/#4-vm","title":"4. VM \ub0b4\ubd80 \uc124\uc815 \ubcc0\uacbd","text":"<p>OpenStack\uc758 Horizon \ucf58\uc194 \ub85c\uadf8 \ud655\uc778 \ubc0f \ud558\uc774\ud37c\ubc14\uc774\uc800 \ud1b5\uc2e0\uc744 \uc704\ud574 \uc544\ub798 \uc124\uc815\uc774 \ubaa8\ub4e0 \uc774\ubbf8\uc9c0\uc5d0 \uc801\uc6a9\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/utils/golden-image/#41-serial-console-openstack","title":"4.1 Serial Console \ud65c\uc131\ud654 (OpenStack \ud544\uc218)","text":"<p>OpenStack \ub300\uc2dc\ubcf4\ub4dc\uc5d0\uc11c \ub85c\uadf8\ub97c \ubcf4\ub824\uba74 \ucee4\ub110 \ud30c\ub77c\ubbf8\ud130 \uc218\uc815\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.</p> <p>Ubuntu/Debian:</p> <pre><code># /etc/default/grub \ud30c\uc77c \uc218\uc815\nsed -i 's/^GRUB_CMDLINE_LINUX_DEFAULT.*/GRUB_CMDLINE_LINUX_DEFAULT=\"console=tty0 console=ttyS0,115200n8 earlyprintk=ttyS0,115200 rootdelay=300\"/' /etc/default/grub\n\n# \uc218\uc815 \ub0b4\uc6a9 \uc801\uc6a9\nupdate-grub\n</code></pre> <p>RHEL/Rocky/CentOS:</p> <pre><code># /etc/default/grub \ud30c\uc77c \uc218\uc815\ncat &gt; /etc/default/grub &lt;&lt; 'EOF'\nGRUB_TIMEOUT=1\nGRUB_DISTRIBUTOR=\"$(sed 's, release .*$,,g' /etc/system-release)\"\nGRUB_DEFAULT=saved\nGRUB_DISABLE_SUBMENU=true\nGRUB_TERMINAL_OUTPUT=\"console\"\nGRUB_CMDLINE_LINUX=\"crashkernel=auto console=tty1 console=ttyS0,115200n8\"\nGRUB_DISABLE_RECOVERY=\"true\"\nGRUB_ENABLE_BLSCFG=true\nEOF\n\n# \uc218\uc815 \ub0b4\uc6a9 \uc801\uc6a9\ngrub2-mkconfig -o /boot/grub2/grub.cfg\n</code></pre>"},{"location":"openstack/utils/golden-image/#42","title":"4.2 \uae30\ubcf8 \ud328\ud0a4\uc9c0 \uc124\uce58","text":"<p>VMware Tools \ub300\uc2e0 QEMU Guest Agent\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <p>Ubuntu/Debian:</p> <pre><code># DNS \uc11c\ubc84 \uc218\ub3d9 \ub4f1\ub85d\necho \"nameserver 8.8.8.8\" &gt; /etc/resolv.conf\n\n# \ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58\napt update\napt install -y qemu-guest-agent cloud-init\n</code></pre> <p>Rocky/RHEL:</p> <pre><code># DNS \uc11c\ubc84 \uc218\ub3d9 \ub4f1\ub85d\necho \"nameserver 8.8.8.8\" &gt; /etc/resolv.conf\n\n# \ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58\nyum install -y qemu-guest-agent cloud-init\n</code></pre>"},{"location":"openstack/utils/golden-image/#5","title":"5. \uc635\uc158 \uc18c\ud504\ud2b8\uc6e8\uc5b4 \uc124\uce58","text":""},{"location":"openstack/utils/golden-image/#51-docker","title":"5.1 \uc635\uc158: Docker \uc124\uce58","text":"<p>Docker\ub97c \ud3ec\ud568\ud558\ub294 \uacbd\uc6b0\uc5d0\ub9cc \uc774 \ub2e8\uacc4\ub97c \uc218\ud589\ud558\uc138\uc694.</p> <p>Ubuntu/Debian:</p> <pre><code># 1. \ud544\uc218 \ud328\ud0a4\uc9c0 \ubc0f GPG Key \uc124\uc815\napt-get install -y ca-certificates curl\ninstall -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\nchmod a+r /etc/apt/keyrings/docker.asc\n\n# 2. \uc800\uc7a5\uc18c \ucd94\uac00\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\n  $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\\n  tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\napt-get update\n\n# 3. Docker \uc124\uce58\napt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# 4. \ud65c\uc131\ud654\nsystemctl enable --now docker\n\n# -------------------------------------------------------\n# [GPU \uc774\ubbf8\uc9c0\uc778 \uacbd\uc6b0\ub9cc] NVIDIA Container Toolkit \uc124\uce58\n# -------------------------------------------------------\n\n# 5. \uc800\uc7a5\uc18c \ucd94\uac00 \ubc0f \uc124\uce58\ncurl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \\\n  &amp;&amp; curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \\\n    sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \\\n    tee /etc/apt/sources.list.d/nvidia-container-toolkit.list\n\napt-get update\napt-get install -y nvidia-container-toolkit\n\n# 6. Docker \uc124\uc815 \ubc0f \uc7ac\uc2dc\uc791\nnvidia-ctk runtime configure --runtime=docker\nsystemctl restart docker\n</code></pre> <p>Rocky/RHEL:</p> <pre><code># 1. Docker \uc800\uc7a5\uc18c \ucd94\uac00\ndnf config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n\n# 2. Docker \uc5d4\uc9c4 \uc124\uce58\ndnf install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# \uc635\uc158. Rocky 10\uc758 \uacbd\uc6b0 \uc544\ub798 \ud328\ud0a4\uc9c0\ub3c4 \uc124\uce58\ndnf install -y iptables-nft iptables-services\n\n# 3. Docker \uc2e4\ud589 \ubc0f \uc790\ub3d9 \uc2dc\uc791 \uc124\uc815\nsystemctl enable --now docker\n\n# -------------------------------------------------------\n# [GPU \uc774\ubbf8\uc9c0\uc778 \uacbd\uc6b0\ub9cc] NVIDIA Container Toolkit \uc124\uce58\n# (Docker\uac00 GPU\ub97c \uc4f0\uac8c \ud574\uc8fc\ub294 \ud544\uc218 \ub3c4\uad6c\uc785\ub2c8\ub2e4)\n# -------------------------------------------------------\n\n# 4. NVIDIA Toolkit \uc800\uc7a5\uc18c \ucd94\uac00\ncurl -s -L https://nvidia.github.io/libnvidia-container/stable/rpm/nvidia-container-toolkit.repo | \\\n  tee /etc/yum.repos.d/nvidia-container-toolkit.repo\n\n# 5. Toolkit \uc124\uce58\ndnf install -y nvidia-container-toolkit\n\n# 6. Docker\uac00 NVIDIA Runtime\uc744 \uc4f0\ub3c4\ub85d \uc124\uc815 (\uc911\uc694!)\n# \uc774 \uba85\ub839\uc5b4\uac00 /etc/docker/daemon.json \ud30c\uc77c\uc744 \uc790\ub3d9\uc73c\ub85c \uc218\uc815\ud574\uc90d\ub2c8\ub2e4.\nnvidia-ctk runtime configure --runtime=docker\n\n# 7. \uc801\uc6a9\uc744 \uc704\ud574 Docker \uc7ac\uc2dc\uc791\nsystemctl restart docker\n</code></pre>"},{"location":"openstack/utils/golden-image/#52-nvidia-gpu","title":"5.2 \uc635\uc158: NVIDIA GPU \ub4dc\ub77c\uc774\ubc84 \uc124\uce58","text":"<p>GPU \ubc84\uc804 \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud560 \ub54c\ub9cc \uc774 \ub2e8\uacc4\ub97c \uc218\ud589\ud558\uc138\uc694. CPU \uc804\uc6a9 \uc774\ubbf8\uc9c0\ub294 \uc774 \ub2e8\uacc4\ub97c \uac74\ub108\ub701\ub2c8\ub2e4.</p> <p>\uc804\uc81c: \uc778\uc2a4\ud134\uc2a4\uc5d0 \uc774\ubbf8 NVIDIA GPU\uac00 Passthrough \ub418\uc5b4 \uc788\uac70\ub098, \ub85c\uceec\uc5d0\uc11c \ub4dc\ub77c\uc774\ubc84 \ube4c\ub4dc \ud658\uacbd\uc774 \uac16\ucdb0\uc838\uc57c \ud569\ub2c8\ub2e4.</p> <p>Ubuntu/Debian:</p> <pre><code># 1. Nouveau \ube14\ub799\ub9ac\uc2a4\ud2b8 \ucc98\ub9ac\ncat &lt;&lt;EOF &gt; /etc/modprobe.d/blacklist-nouveau.conf\nblacklist nouveau\noptions nouveau modeset=0\nEOF\n\n# \uc635\uc158. RTX \uacc4\uc5f4\uc758 \uac1c\uc778 GPU \uc0ac\uc6a9 \uc2dc MSI \ube44\ud65c\uc131\ud654\necho \"options nvidia NVreg_EnableMSI=0\" | sudo tee /etc/modprobe.d/nvidia.conf\n\n# 2. \ubcc0\uacbd \uc0ac\ud56d \ucee4\ub110\uc5d0 \uc801\uc6a9\nupdate-initramfs -u\n\n# 3. \ube4c\ub4dc \uc758\uc874\uc131 \ud328\ud0a4\uc9c0 \uc124\uce58\napt-get install -y build-essential linux-headers-$(uname -r) pkg-config libglvnd-dev\n\n# 4. NVIDIA \ub4dc\ub77c\uc774\ubc84 \ub2e4\uc6b4\ub85c\ub4dc\ncd /root\nwget https://us.download.nvidia.com/XFree86/Linux-x86_64/550.127.05/NVIDIA-Linux-x86_64-550.127.05.run\nchmod +x NVIDIA-Linux-x86_64-*.run\n\n# 5. \ub4dc\ub77c\uc774\ubc84 \uc124\uce58 (\ud558\ub4dc\uc6e8\uc5b4 \uc5c6\uc774 \uc124\uce58)\n# \ub098\uc911\uc5d0 \ub85c\uadf8\uc778\ud574\uc11c 'install-gpu'\ub9cc \uce58\uba74 \uc124\uce58\ub418\ub3c4\ub85d \uc124\uc815\necho \"alias install-gpu='/root/NVIDIA-Linux-x86_64-*.run --silent --dkms &amp;&amp; echo \\\"\uc124\uce58 \uc644\ub8cc! nvidia-smi\ub97c \uc785\ub825\ud574\ubcf4\uc138\uc694.\\\"' \" &gt;&gt; /root/.bashrc\n</code></pre> <p>Rocky/RHEL:</p> <pre><code># 1. Nouveau(\uc624\ud508\uc18c\uc2a4 \ub4dc\ub77c\uc774\ubc84) \ube14\ub799\ub9ac\uc2a4\ud2b8 \ucc98\ub9ac\ncat &lt;&lt;EOF &gt; /etc/modprobe.d/blacklist-nouveau.conf\nblacklist nouveau\noptions nouveau modeset=0\nEOF\n\n# \uc635\uc158. RTX \uacc4\uc5f4\uc758 \uac1c\uc778 GPU \uc0ac\uc6a9 \uc2dc MSI \ube44\ud65c\uc131\ud654\necho \"options nvidia NVreg_EnableMSI=0\" | sudo tee /etc/modprobe.d/nvidia.conf\n\n# 2. \ubcc0\uacbd \uc0ac\ud56d \ucee4\ub110\uc5d0 \uc801\uc6a9 (initramfs \uac31\uc2e0)\ndracut --force\n\n# 3. \ube4c\ub4dc \uc758\uc874\uc131 \ud328\ud0a4\uc9c0 \uc124\uce58\n# (\ub4dc\ub77c\uc774\ubc84 \ucef4\ud30c\uc77c\uc744 \uc704\ud574 gcc, make, kernel source \ub4f1\uc774 \ud544\uc694\ud568)\nyum groupinstall -y \"Development Tools\"\nyum install -y epel-release\nyum update -y  # \ucee4\ub110 \ucd5c\uc2e0\ud654 (\uc911\uc694)\nyum install -y kernel-devel kernel-headers dkms gcc make wget pciutils\n\n# \ub4dc\ub77c\uc774\ubc84 \ub2e4\uc6b4\ub85c\ub4dc\ncd /root\nwget https://us.download.nvidia.com/XFree86/Linux-x86_64/550.127.05/NVIDIA-Linux-x86_64-550.127.05.run\nchmod +x NVIDIA-Linux-x86_64-*.run\n\n# 5. \ub4dc\ub77c\uc774\ubc84 \uc124\uce58 (\ud558\ub4dc\uc6e8\uc5b4 \uc5c6\uc774 \uc124\uce58)\n# --silent: \ubb34\uc778 \uc124\uce58\n# \ub098\uc911\uc5d0 \ub85c\uadf8\uc778\ud574\uc11c 'install-gpu'\ub9cc \uce58\uba74 \uc124\uce58\ub418\ub3c4\ub85d \uc124\uc815\necho \"alias install-gpu='/root/NVIDIA-Linux-x86_64-*.run --silent --dkms &amp;&amp; echo \\\"\uc124\uce58 \uc644\ub8cc! nvidia-smi\ub97c \uc785\ub825\ud574\ubcf4\uc138\uc694.\\\"' \" &gt;&gt; /root/.bashrc\n</code></pre>"},{"location":"openstack/utils/golden-image/#6-vm","title":"6. VM \uc815\ub9ac \uc791\uc5c5","text":"<p><code>Cloud-init</code> \uc774 \uc815\uc0c1\uc801\uc73c\ub85c \uc791\ub3d9\ud558\ub3c4\ub85d \uc124\uc815\ub4e4\uc744 \ucd08\uae30\ud654 \ud569\ub2c8\ub2e4.</p> <p>Ubuntu/Debian:</p> <pre><code># 1. DataSource \uc124\uc815\ncat &gt; /etc/cloud/cloud.cfg.d/90_datasource.cfg &lt;&lt; 'EOF'\ndatasource_list: [ OpenStack, ConfigDrive, None ]\nEOF\n\n# 2. SSH \ubcf4\uc548 \uc124\uc815\n# (Ubuntu\ub294 \uc11c\ube44\uc2a4\uba85\uc774 'ssh' \uc785\ub2c8\ub2e4)\nsed -i 's/^#*PermitRootLogin.*/PermitRootLogin prohibit-password/' /etc/ssh/sshd_config\nsed -i 's/^#*PasswordAuthentication.*/PasswordAuthentication no/' /etc/ssh/sshd_config\nsystemctl restart ssh\n\n# 3. \ub124\ud2b8\uc6cc\ud06c \uc124\uc815 \ucd08\uae30\ud654\n# Netplan \uc124\uc815 \uc0ad\uc81c\nrm -f /etc/netplan/*.yaml\n# \uad6c\ubc84\uc804 \uc778\ud130\ud398\uc774\uc2a4 \uc124\uc815 \uc0ad\uc81c\nrm -f /etc/network/interfaces.d/*\n\n# 4. \uace0\uc720 \uc2dd\ubcc4\uc790 \ubc0f Cloud-init \ucd08\uae30\ud654\nrm -f /etc/udev/rules.d/70-persistent-net.rules\nrm -f /etc/ssh/ssh_host_*key*\ntruncate -s 0 /etc/machine-id\nrm -f /var/lib/dbus/machine-id\n\n# Cloud-init \ub370\uc774\ud130 \uc0ad\uc81c\nrm -rf /var/lib/cloud/*\nrm -rf /var/log/cloud-init*\n\n# 5. \ud328\ud0a4\uc9c0 \uce90\uc2dc \uc815\ub9ac\napt-get clean\nrm -rf /var/lib/apt/lists/*\n</code></pre> <p>Rocky/RHEL:</p> <pre><code># 1. DataSource \uc124\uc815 (OpenStack \ucd5c\uc6b0\uc120)\ncat &gt; /etc/cloud/cloud.cfg.d/90_datasource.cfg &lt;&lt; 'EOF'\ndatasource_list: [ OpenStack, ConfigDrive, None ]\nEOF\n\n# 2. SSH \ubcf4\uc548 \uc124\uc815 (\ud074\ub77c\uc6b0\ub4dc \ud45c\uc900: \ud328\uc2a4\uc6cc\ub4dc \uc778\uc99d \ube44\ud65c\uc131\ud654)\n# (Root \ub85c\uadf8\uc778\uc740 \ubcf4\uc548 \uc815\ucc45\uc5d0 \ub530\ub77c 'prohibit-password' \ub610\ub294 'yes'\ub85c \uc124\uc815)\nsed -i 's/^#*PermitRootLogin.*/PermitRootLogin prohibit-password/' /etc/ssh/sshd_config\nsed -i 's/^#*PasswordAuthentication.*/PasswordAuthentication no/' /etc/ssh/sshd_config\nsystemctl restart sshd\n\n# 2.1 cloud-init \ub2e8\uacc4\uc5d0\uc11c\ub3c4 root \ub85c\uadf8\uc778 \ucc28\ub2e8\necho \"disable_root: true\" &gt;&gt; /etc/cloud/cloud.cfg\n\n# 3. \ub124\ud2b8\uc6cc\ud06c \uc124\uc815 \ucd08\uae30\ud654 (\uae30\uc874 IP \uc815\ubcf4 \uc0ad\uc81c)\n# NetworkManager \uc5f0\uacb0 \uc815\ubcf4 \uc0ad\uc81c\nrm -f /etc/NetworkManager/system-connections/*.nmconnection\n# \uad6c\ubc84\uc804 \uc2a4\ud06c\ub9bd\ud2b8\uac00 \uc788\ub2e4\uba74 \uc0ad\uc81c (ifcfg-lo \uc81c\uc678)\nrm -f /etc/sysconfig/network-scripts/ifcfg-e*\n\n# 4. \uace0\uc720 \uc2dd\ubcc4\uc790 \ubc0f Cloud-init \ucd08\uae30\ud654\nrm -f /etc/udev/rules.d/70-persistent-net.rules\nrm -f /etc/ssh/ssh_host_*key*\ntruncate -s 0 /etc/machine-id\nrm -f /var/lib/dbus/machine-id\n\n# Cloud-init \ub370\uc774\ud130 \uc0ad\uc81c (\uc7ac\ubd80\ud305 \uc2dc \uc0c8\ub85c \ubc1b\uae30 \uc704\ud568)\nrm -rf /var/lib/cloud/*\nrm -rf /var/log/cloud-init*\n\n# 5. \ud328\ud0a4\uc9c0 \uce90\uc2dc \uc815\ub9ac\nyum clean all\nrm -rf /var/cache/yum\n</code></pre>"},{"location":"openstack/utils/golden-image/#7","title":"7. \ucd5c\uc885 \uc815\ub9ac \ubc0f \uc774\ubbf8\uc9c0 \ubcc0\ud658","text":"<p>\ubaa8\ub4e0 \uc124\uc815\uc774 \ub05d\ub0ac\uc73c\uba74 \ub9c8\uc9c0\ub9c9\uc73c\ub85c cloud-init\uc744 \ucd08\uae30\ud654\ud558\uace0 VM\uc744 \uc885\ub8cc\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/utils/golden-image/#71","title":"7.1 \ucd5c\uc885 \uba85\ub839\uc5b4","text":"<pre><code># \ub85c\uadf8 \ud30c\uc77c \ube44\uc6b0\uae30\nfind /var/log -type f -exec truncate -s 0 {} \\;\n\n# cloud-init \uc815\ub9ac (\uac00\uc7a5 \uc911\uc694)\ncloud-init clean --logs\n\n# history \uc0ad\uc81c\nhistory -c\n\n# \uc2dc\uc2a4\ud15c \uc885\ub8cc (\uc7ac\ubd80\ud305 \ud558\uc9c0 \ub9c8\uc138\uc694!)\nshutdown -h now\n</code></pre>"},{"location":"openstack/utils/golden-image/#72-glance-openstack-cli","title":"7.2 Glance \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc (OpenStack CLI)","text":"<p>VM \uc774\ubbf8\uc9c0 \ud30c\uc77c(qcow2 \ub4f1)\uc744 OpenStack Glance\uc5d0 \uc5c5\ub85c\ub4dc\ud569\ub2c8\ub2e4.</p> <pre><code># 1. \uc774\ubbf8\uc9c0 \uc555\ucd95 (Shrink)\n# \uc6d0\ubcf8(base) -&gt; \ucd5c\uc885\ubcf8(golden)\nqemu-img convert -c -O qcow2 ubuntu-24.04-base.qcow2 ubuntu-24.04-golden.qcow2\n\n# 2. \uc6a9\ub7c9 \ud655\uc778 (\ud655 \uc904\uc5b4\ub4e4\uc5c8\ub294\uc9c0 \ud655\uc778)\nls -lh ubuntu-24.04-golden.qcow2\n</code></pre> <p>CPU \uc804\uc6a9 \uc774\ubbf8\uc9c0:</p> <pre><code>openstack image create \"Ubuntu-24.04-Golden\" \\\n  --file ubuntu-24.04-golden.qcow2 \\\n  --disk-format qcow2 \\\n  --container-format bare \\\n  --public \\\n  --property hw_machine_type=q35 \\\n  --property hw_qemu_guest_agent=yes\n</code></pre> <p>GPU \ud3ec\ud568 \uc774\ubbf8\uc9c0 (\uba54\ud0c0\ub370\uc774\ud130 \uc911\uc694): OpenStack Nova\uac00 GPU\ub97c \uc801\uc808\ud788 \uc2a4\ucf00\uc904\ub9c1\ud558\ub3c4\ub85d \uba54\ud0c0\ub370\uc774\ud130\ub97c \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>openstack image create \"Ubuntu-24.04-Golden-GPU\" \\\n  --file ubuntu-24.04-golden.qcow2 \\\n  --disk-format qcow2 \\\n  --container-format bare \\\n  --public \\\n  --property hw_video_model=vga \\\n  --property hw_machine_type=q35 \\\n  --property hw_qemu_guest_agent=yes\n</code></pre> <p>\ub9cc\uc57d RTX \uacc4\uc5f4\uc758 \uac1c\uc778\uc6a9 GPU \uc0ac\uc6a9\ud55c\ub2e4\uba74 \uc774\ubbf8\uc9c0 \ud639\uc740 flavor\uc5d0 <code>--property hw:kvm_hidden=true</code> \uac12\uc744 \ub123\uc5b4\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/utils/golden-image/#8-gpu","title":"8. \uc635\uc158: GPU \ub4dc\ub77c\uc774\ubc84 \uc124\uce58","text":"<p>GPU \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131\ud558\uace0, \ud50c\ub85c\ud305 IP\ub97c \uc5f0\uacb0\ud558\uc5ec VM \ub0b4\ubd80\uc5d0 \uc811\uc18d\ud55c \ub4a4, \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\uc2dc\ud0b5\ub2c8\ub2e4.</p> <pre><code># root \uacc4\uc815 \uc0ac\uc6a9\nsudo su -\n</code></pre> <pre><code># \uc0ac\uc804\uc5d0 \ubc1b\uc544\ub454 nvidia \ub4dc\ub77c\uc774\ubc84 \uc124\uce58\ninstall-gpu\n</code></pre>"},{"location":"openstack/utils/golden-image/#rtx-gpu-reset-bug","title":"RTX \uacc4\uc5f4 GPU \uc0ac\uc6a9 \uc2dc \ubb38\uc81c\uc810(Reset Bug)","text":"<p>RTX \uacc4\uc5f4\uacfc \uac19\uc740 \uc18c\ube44\uc790\uc6a9 GPU\ub294 \uac00\uc0c1\ud654 \ud658\uacbd\uc744 \uace0\ub824\ud558\uc9c0 \uc54a\uae30\uc5d0 FLR(Function Level Reset) \uae30\ub2a5\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub530\ub77c\uc11c GPU \uc778\uc2a4\ud134\uc2a4\ub97c \uc885\ub8cc\ud558\uac70\ub098 \uc7ac\ubd80\ud305\ud558\uba74, GPU \ud558\ub4dc\uc6e8\uc5b4\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uace0 Stuck \uc0c1\ud0dc\ub85c \ub0a8\uc544 \ub370\uc774\ud130 \ucc0c\uaebc\uae30\ub97c \uac00\uc9c0\uace0 \uc788\ub2e4\uac00 VM\uc758 \ub2e4\uc74c \ub3d9\uc791\uc744 \ubc29\ud574\ud558\uace0, \uc774\ub97c \ud638\uc2a4\ud2b8\uac00 \uc751\ub2f5\uc774 \uc5c6\ub294 \uac83\uc73c\ub85c \uc778\uc2dd\ud558\uace0 \uc778\uc2a4\ud134\uc2a4\ub97c PAUSED \uc0c1\ud0dc\ub85c \uac15\uc81c \uc815\uc9c0\uc2dc\ucf1c\ubc84\ub9bd\ub2c8\ub2e4.</p> <p>\uc704\uc5d0\uc11c RTX \uacc4\uc5f4 GPU\ub97c \uc704\ud55c \uc124\uc815\uc744 \ucd94\uac00\ud588\uc9c0\ub9cc, \uc774\uac83\ub9cc\uc73c\ub85c \ubb38\uc81c\ub97c \ub9c9\uc744 \uc218\ub294 \uc5c6\uc2b5\ub2c8\ub2e4. FLR \uae30\ub2a5\uc774 \uc5c6\ub294 \ud55c \uc7ac\ubd80\ud305 \ud639\uc740 \uc0ad\uc81c \uc2dc \ub192\uc740 \ud655\ub960\ub85c \ud558\ub4dc\uc6e8\uc5b4 \ub9ac\uc14b \uc2e4\ud328\uac00 \ubc1c\uc0dd\ud558\uae30\uc5d0 RTX \uacc4\uc5f4 GPU\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uac83\uc744 \uad8c\uc7a5\ud569\ub2c8\ub2e4.</p> <p>\ud14c\uc2a4\ud2b8 \uc6a9\ub3c4\ub85c \uc0ac\uc6a9 \uc608\uc815 \uc2dc, FLR \ub3d9\uc791 \uc784\uc2dc \uc801\uc6a9\ubc95\uc744 \ucc38\uace0\ubc14\ub78d\ub2c8\ub2e4.</p>"},{"location":"ubuntu/init-ubuntu-env/","title":"Ubuntu \uae30\ubcf8 \uc138\ud305","text":"<ul> <li>Ubuntu 24.04 \uae30\uc900</li> </ul>"},{"location":"ubuntu/init-ubuntu-env/#index","title":"Index","text":"<ul> <li>Oh My Zsh \uc124\uce58</li> <li>npm \uc124\uce58</li> </ul>"},{"location":"ubuntu/init-ubuntu-env/#oh-my-zsh","title":"Oh My Zsh \uc124\uce58","text":""},{"location":"ubuntu/init-ubuntu-env/#1-oh-my-zsh","title":"1. Oh My Zsh \uc124\uce58","text":"<pre><code># zsh \uc124\uce58\nsudo apt install zsh\n</code></pre> <pre><code># oh-my-zsh \uc124\uce58\nsh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/#2-powerlevel10k","title":"2. Powerlevel10k \ubc0f \ud50c\ub7ec\uadf8\uc778 \uc124\uce58","text":"<pre><code># Powerlevel10k\ngit clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/themes/powerlevel10k\n\n# zsh-autosuggestions\ngit clone https://github.com/zsh-users/zsh-autosuggestions.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions\n\n# zsh-syntax-highlighting\ngit clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/#3-zshrc","title":"3. ~/.zshrc \ud30c\uc77c \uc218\uc815","text":"<pre><code># ZSH_THEME=\"robbyrussell\"\nZSH_THEME=\"powerlevel10k/powerlevel10k\"\n\nplugins=(\n    git\n    zsh-autosuggestions\n    zsh-syntax-highlighting\n)\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/#4","title":"4. \uc178 \uc0c8\ub85c\uace0\uce68","text":"<pre><code>source ~/.zshrc\n</code></pre> <p>\uc124\uc815: source ~/.zshrc\ub97c \uc2e4\ud589\ud558\uba74, \uc124\uc815 \ub9c8\ubc95\uc0ac(p10k configure)\uac00 \uc790\ub3d9\uc73c\ub85c \uc2e4\ud589\ub429\ub2c8\ub2e4. \uc9c8\ubb38\uc5d0 \ub2f5\ud558\uba74\uc11c \uc6d0\ud558\ub294 \uc544\uc774\ucf58\uacfc \ubaa8\uc591\uc744 \uc120\ud0dd\ud558\uba74 \ub429\ub2c8\ub2e4. \ud544\uc218: \uc774 \ud14c\ub9c8\ub97c \uc81c\ub300\ub85c \uc0ac\uc6a9\ud558\ub824\uba74 Nerd Fonts (\uc608: MesloLGS NF)\ub97c Tabby \ud130\ubbf8\ub110\uc758 \uae00\uaf34\ub85c \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.</p>"},{"location":"ubuntu/init-ubuntu-env/#npm","title":"npm \uc124\uce58","text":""},{"location":"ubuntu/init-ubuntu-env/#1-nvm","title":"1. NVM \uc124\uce58","text":"<pre><code># NVM \uc124\uce58\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\n\n# NVM \ud65c\uc131\ud654\nsource ~/.zshrc\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/#2-nodejs","title":"2. Node.js \uc124\uce58","text":"<pre><code># Node.js LTS \ubc84\uc804 \uc124\uce58\nnvm install --lts\n</code></pre> <pre><code># \uc124\uce58 \ud655\uc778\nnode -v\nnpm -v\n</code></pre>"},{"location":"ubuntu/wsl/wsl-network-setting/","title":"WSL \uc18d\ub3c4 \ud5a5\uc0c1 \uc124\uc815","text":""},{"location":"ubuntu/wsl/wsl-network-setting/#1-dns","title":"\ud83d\ude80 \ud574\uacb0 \ubc29\ubc95 1: DNS \uc11c\ubc84 \uc218\ub3d9 \uace0\uc815 (\uac00\uc7a5 \ud6a8\uacfc\uc801 \u2b50)","text":"<p>WSL2\uac00 \uc708\ub3c4\uc6b0 \ud638\uc2a4\ud2b8\ub97c \uac70\uccd0\uc11c DNS\ub97c \uc870\ud68c\ud558\ub294 \uacfc\uc815\uc774 \ub290\ub9ac\uae30 \ub54c\ubb38\uc5d0, \uad6c\uae00(8.8.8.8)\uc774\ub098 \ud074\ub77c\uc6b0\ub4dc\ud50c\ub808\uc5b4(1.1.1.1) DNS\ub97c \uc9c1\uc811 \ubc14\ub77c\ubcf4\uac8c \uc124\uc815\ud558\uba74 \uc18d\ub3c4\uac00 \ube44\uc57d\uc801\uc73c\ub85c \ube68\ub77c\uc9d1\ub2c8\ub2e4.</p>"},{"location":"ubuntu/wsl/wsl-network-setting/#1-etcwslconf","title":"1. \uc790\ub3d9 \uc0dd\uc131 \uc124\uc815 \ub044\uae30 (<code>/etc/wsl.conf</code>)","text":"<p>WSL \ub0b4\ubd80 \ud130\ubbf8\ub110\uc5d0\uc11c \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc785\ub825\ud574 \uc124\uc815 \ud30c\uc77c\uc744 \ub9cc\ub4ed\ub2c8\ub2e4.</p> <pre><code># wsl.conf \ud30c\uc77c \uc0dd\uc131/\uc218\uc815\nsudo nano /etc/wsl.conf\n</code></pre> <p>\uc544\ub798 \ub0b4\uc6a9\uc744 \ubcf5\uc0ac\ud574\uc11c \ubd99\uc5ec\ub123\uc73c\uc138\uc694. (\uc774\ubbf8 \ub0b4\uc6a9\uc774 \uc788\ub2e4\uba74 <code>[network]</code> \ubd80\ubd84\uc5d0 \ucd94\uac00)</p> <pre><code>[network]\ngenerateResolvConf = false\n</code></pre> <p>(<code>Ctrl + O</code> \uc800\uc7a5, <code>Enter</code>, <code>Ctrl + X</code> \uc885\ub8cc)</p>"},{"location":"ubuntu/wsl/wsl-network-setting/#2-dns-etcresolvconf","title":"2. DNS \ud30c\uc77c \uc9c1\uc811 \uc218\uc815 (<code>/etc/resolv.conf</code>)","text":"<p>\uae30\uc874\uc758 \uc2ec\ubcfc\ub9ad \ub9c1\ud06c\ub97c \ub04a\uace0 \uc9c1\uc811 DNS\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.</p> <pre><code># \uae30\uc874 \ud30c\uc77c \uc0ad\uc81c (\uc2ec\ubcfc\ub9ad \ub9c1\ud06c\uc784)\nsudo rm /etc/resolv.conf\n\n# \uc0c8 \ud30c\uc77c \uc0dd\uc131 \ubc0f DNS \uc785\ub825\nsudo bash -c 'echo \"nameserver 8.8.8.8\" &gt; /etc/resolv.conf'\nsudo bash -c 'echo \"nameserver 1.1.1.1\" &gt;&gt; /etc/resolv.conf'\n</code></pre>"},{"location":"ubuntu/wsl/wsl-network-setting/#3-wsl-powershell","title":"3. WSL \uc7ac\uc2dc\uc791 (PowerShell\uc5d0\uc11c)","text":"<pre><code>wsl --shutdown\n</code></pre> <p>\ub2e4\uc2dc WSL\uc744 \ucf1c\uc11c <code>apt update</code> \ub4f1\uc744 \ud574\ubcf4\uba74 \ud6e8\uc52c \ube68\ub77c\uc9c4 \uac83\uc744 \ub290\ub084 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ubuntu/wsl/wsl-network-setting/#2-mirrored-windows-11","title":"\ud83d\ude80 \ud574\uacb0 \ubc29\ubc95 2: \"Mirrored\" \ubaa8\ub4dc \uc0ac\uc6a9 (Windows 11 \ud544\uc218 \u2b50\u2b50)","text":"<p>\ucd5c\uc2e0 Windows 11(22H2 \uc774\uc0c1)\uacfc \ucd5c\uc2e0 WSL \ubc84\uc804\uc744 \uc4f0\uace0 \uacc4\uc2dc\ub2e4\uba74, **\"\ubbf8\ub7ec\ub9c1 \ubaa8\ub4dc\"**\ub97c \ucf1c\ub294 \uac83\uc774 \uac8c\uc784 \uccb4\uc778\uc800\uc785\ub2c8\ub2e4. NAT\ub97c \uac70\uce58\uc9c0 \uc54a\uace0 \ud638\uc2a4\ud2b8(Windows)\uc758 \ub124\ud2b8\uc6cc\ud06c \uc778\ud130\ud398\uc774\uc2a4\ub97c \uadf8\ub300\ub85c \uacf5\uc720\ud558\ubbc0\ub85c \uc18d\ub3c4\uac00 \ub124\uc774\ud2f0\ube0c \uae09\uc73c\ub85c \ube68\ub77c\uc9d1\ub2c8\ub2e4.</p>"},{"location":"ubuntu/wsl/wsl-network-setting/#1","title":"1. \uc708\ub3c4\uc6b0 \uc0ac\uc6a9\uc790 \ud3f4\ub354\uc5d0 \uc124\uc815 \ud30c\uc77c \uc0dd\uc131","text":"<p>\uc708\ub3c4\uc6b0 \ud0d0\uc0c9\uae30 \uc8fc\uc18c\ucc3d\uc5d0 <code>%UserProfile%</code>\uc744 \uc785\ub825\ud558\uace0 \uc5d4\ud130\ub97c \uce69\ub2c8\ub2e4. \uc5ec\uae30\uc5d0 <code>.wslconfig</code> \ub77c\ub294 \ud30c\uc77c\uc744 \ub9cc\ub4e4\uace0(\uba54\ubaa8\uc7a5 \uc774\uc6a9) \uc544\ub798 \ub0b4\uc6a9\uc744 \ub123\uc73c\uc138\uc694.</p> <pre><code>[wsl2]\nnetworkingMode=mirrored\ndnsTunneling=true\nfirewall=true\nautoProxy=true\n</code></pre> <ul> <li><code>networkingMode=mirrored</code>: NAT\ub97c \uc5c6\uc560\uace0 \uc708\ub3c4\uc6b0 IP\ub97c \uadf8\ub300\ub85c \uc501\ub2c8\ub2e4. (\uc18d\ub3c4 \ub300\ud3ed \ud5a5\uc0c1)</li> <li><code>dnsTunneling=true</code>: DNS \uc694\uccad\uc744 \uac00\uc0c1\ud654 \uacc4\uce35 \ub300\uc2e0 \ud130\ub110\ub9c1\uc73c\ub85c \ucc98\ub9ac\ud574 \ub51c\ub808\uc774\ub97c \uc904\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ubuntu/wsl/wsl-network-setting/#2","title":"2. \uc801\uc6a9","text":"<p>PowerShell\uc5d0\uc11c <code>wsl --shutdown</code> \ud6c4 \ub2e4\uc2dc \uc2dc\uc791.</p>"},{"location":"ubuntu/wsl/wsl-network-setting/#3-ipv6","title":"\ud83d\ude80 \ud574\uacb0 \ubc29\ubc95 3: IPv6 \ube44\ud65c\uc131\ud654 (\ud2b9\uc815 \ud1b5\uc2e0\uc0ac/\ud658\uacbd\uc6a9)","text":"<p><code>apt-get</code>\uc774\ub098 <code>curl</code>\uc774 \ucc98\uc74c\uc5d0 \uba48\uce6b\ud558\ub2e4\uac00 \uc9c4\ud589\ub418\ub294 \uacbd\uc6b0, IPv6 \uc5f0\uacb0\uc744 \uc2dc\ub3c4\ud558\ub2e4\uac00 \ud0c0\uc784\uc544\uc6c3\uc774 \ub098\uc11c IPv4\ub85c \ub118\uc5b4\uac00\ub294 \ub51c\ub808\uc774\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>WSL \ub0b4\ubd80\uc5d0\uc11c \uc2e4\ud589:</p> <pre><code>sudo sysctl -w net.ipv6.conf.all.disable_ipv6=1\nsudo sysctl -w net.ipv6.conf.default.disable_ipv6=1\n</code></pre> <p>(\uc774\uac8c \ud6a8\uacfc\uac00 \uc788\ub2e4\uba74 <code>/etc/sysctl.conf</code>\uc5d0 \uc601\uad6c \ub4f1\ub85d\ud558\uc138\uc694.)</p>"},{"location":"ubuntu/wsl/wsl-network-setting/#_1","title":"\ucd94\uac00 \uc815\ubcf4","text":"<ol> <li>Windows 11 \uc0ac\uc6a9\uc790\ub77c\uba74 **[\ubc29\ubc95 2 (Mirrored Mode)]**\uac00 \uac00\uc7a5 \uae54\ub054\ud558\uace0 \uc131\ub2a5\uc774 \uc88b\uc2b5\ub2c8\ub2e4. (<code>apt</code> \uc18d\ub3c4\ubfd0\ub9cc \uc544\ub2c8\ub77c \ub85c\uceec\ud638\uc2a4\ud2b8 \uc811\uc18d \ubb38\uc81c\ub3c4 \ud574\uacb0\ub428)</li> <li>Windows 10 \uc0ac\uc6a9\uc790\uac70\ub098 Mirrored \ubaa8\ub4dc\uac00 \ubd88\uc548\uc815\ud558\ub2e4\uba74 **[\ubc29\ubc95 1 (DNS \uace0\uc815)]**\ub9cc \uc801\uc6a9\ud574\ub3c4 \ucda9\ubd84\ud788 \ube68\ub77c\uc9d1\ub2c8\ub2e4.</li> </ol>"}]}