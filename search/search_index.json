{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":[" "],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\ude80 Infra Cheatsheets","text":"<p>DevOps \uc2e4\ubb34\ub97c \uc704\ud55c \uac1c\uc778 \uc9c0\uc2dd \uc800\uc7a5\uc18c (Knowledge Base) &gt; \uc78a\uc5b4\ubc84\ub9ac\uae30 \uc26c\uc6b4 \uba85\ub839\uc5b4, \uc124\uce58 \uc808\ucc28, \ud2b8\ub7ec\ube14\uc288\ud305 \uac00\uc774\ub4dc\ub97c \ubaa8\uc544\ub450\uc5c8\uc2b5\ub2c8\ub2e4.</p>"},{"location":"#topics","title":"\ud83d\udcda Topics","text":"<p>\ucd94\ud6c4 \ucc44\uc6cc\uc9c8 \uc608\uc815\uc785\ub2c8\ub2e4.</p>"},{"location":"#quick-links","title":"\ud83d\udd25 Quick Links","text":"<p>\ucd94\ud6c4 \ucc44\uc6cc\uc9c8 \uc608\uc815\uc785\ub2c8\ub2e4.</p>"},{"location":"#tip","title":"Tip","text":"<p>\uc0c1\ub2e8 \uac80\uc0c9\ucc3d(Search)\uc744 \uc774\uc6a9\ud558\uba74 \uba85\ub839\uc5b4 \ub2e8\uc704\ub85c \uac80\uc0c9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. <code>Ctrl + K</code> (\ub610\ub294 <code>Cmd + K</code>)\ub97c \ub20c\ub7ec\ubcf4\uc138\uc694!</p>"},{"location":"k8s/token-check/","title":"K8s Admin \ud1a0\ud070 \ub9cc\ub8cc \ud655\uc778","text":"<p>\uc778\uc99d\uc11c \ub9cc\ub8cc\uc77c\uc744 \ud655\uc778\ud558\ub294 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4.</p> <pre><code>kubeadm certs check-expiration\n</code></pre> <p>!! warning \"\uc8fc\uc758\uc0ac\ud56d\" \uc778\uc99d\uc11c\ub294 1\ub144\ub9c8\ub2e4 \uac31\uc2e0\ud574\uc57c \ud569\ub2c8\ub2e4!</p>"},{"location":"openstack/openstack-golden-image/","title":"OpenStack \uace8\ub4e0 \uc774\ubbf8\uc9c0(Golden Image) \uc0dd\uc131 \uac00\uc774\ub4dc","text":"<p>OpenStack \ud658\uacbd(Nova, Glance)\uc5d0\uc11c \uc778\uc2a4\ud134\uc2a4 \ubc30\ud3ec \uc2dc \uc989\uc2dc \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uae68\ub057\ud55c Cloud Image\ub97c \ub9cc\ub4e4\uae30 \uc704\ud55c \uc808\ucc28\uc785\ub2c8\ub2e4.</p> <p>\ud544\uc218 \uc804\uc81c \uc870\uac74:</p> <ul> <li>\uc791\uc5c5\uc740 \ub85c\uceec KVM/QEMU \ud658\uacbd\uc774\ub098 OpenStack \ub0b4 \uc784\uc2dc \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c \uc218\ud589\ud569\ub2c8\ub2e4.</li> <li>\ubaa8\ub4e0 \uba85\ub839\uc740 root \uad8c\ud55c\uc73c\ub85c \uc2e4\ud589\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"openstack/openstack-golden-image/#_1","title":"\ud83d\udccb \ubaa9\ucc28","text":"<ol> <li>\uacf5\ud1b5: \ud544\uc218 \uc124\uc815 (\ud328\ud0a4\uc9c0 &amp; \ucf58\uc194)</li> <li>\uc635\uc158: NVIDIA GPU \ub4dc\ub77c\uc774\ubc84 \uc124\uce58</li> <li>OS\ubcc4 \uad6c\uc131: Ubuntu / Debian</li> <li>OS\ubcc4 \uad6c\uc131: RHEL / Rocky / CentOS</li> <li>\uacf5\ud1b5: \ucd5c\uc885 \uc815\ub9ac \ubc0f \uc774\ubbf8\uc9c0 \ubcc0\ud658</li> </ol>"},{"location":"openstack/openstack-golden-image/#1","title":"1. \uacf5\ud1b5: \ud544\uc218 \uc124\uc815 (\ud328\ud0a4\uc9c0 &amp; \ucf58\uc194)","text":"<p>OpenStack\uc758 Horizon \ucf58\uc194 \ub85c\uadf8 \ud655\uc778 \ubc0f \ud558\uc774\ud37c\ubc14\uc774\uc800 \ud1b5\uc2e0\uc744 \uc704\ud574 \uc544\ub798 \uc124\uc815\uc774 \ubaa8\ub4e0 \uc774\ubbf8\uc9c0\uc5d0 \uc801\uc6a9\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/openstack-golden-image/#11-serial-console-openstack","title":"1.1 Serial Console \ud65c\uc131\ud654 (OpenStack \ud544\uc218)","text":"<p>OpenStack \ub300\uc2dc\ubcf4\ub4dc\uc5d0\uc11c \ub85c\uadf8\ub97c \ubcf4\ub824\uba74 \ucee4\ub110 \ud30c\ub77c\ubbf8\ud130 \uc218\uc815\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.</p> <p>Ubuntu/Debian:</p> <pre><code># /etc/default/grub \ud30c\uc77c \uc218\uc815\nsed -i 's/GRUB_CMDLINE_LINUX_DEFAULT=\".*\"/GRUB_CMDLINE_LINUX_DEFAULT=\"console=tty1 console=ttyS0,115200n8\"/' /etc/default/grub\nupdate-grub\n</code></pre> <p>RHEL/Rocky/CentOS:</p> <pre><code># /etc/default/grub \ud30c\uc77c \uc218\uc815\nsed -i 's/GRUB_CMDLINE_LINUX=\".*\"/GRUB_CMDLINE_LINUX=\"crashkernel=auto console=tty1 console=ttyS0,115200n8\"/' /etc/default/grub\ngrub2-mkconfig -o /boot/grub2/grub.cfg\n</code></pre>"},{"location":"openstack/openstack-golden-image/#12","title":"1.2 \uae30\ubcf8 \ud328\ud0a4\uc9c0 \uc124\uce58","text":"<p>VMware Tools \ub300\uc2e0 QEMU Guest Agent\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <ul> <li>Ubuntu: <code>apt install -y qemu-guest-agent cloud-init</code></li> <li>Rocky/RHEL: <code>yum install -y qemu-guest-agent cloud-init</code></li> </ul>"},{"location":"openstack/openstack-golden-image/#2-nvidia-gpu","title":"2. \uc635\uc158: NVIDIA GPU \ub4dc\ub77c\uc774\ubc84 \uc124\uce58","text":"<p>GPU \ubc84\uc804 \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud560 \ub54c\ub9cc \uc774 \ub2e8\uacc4\ub97c \uc218\ud589\ud558\uc138\uc694. CPU \uc804\uc6a9 \uc774\ubbf8\uc9c0\ub294 \uc774 \ub2e8\uacc4\ub97c \uac74\ub108\ub701\ub2c8\ub2e4.</p> <p>\uc804\uc81c: \uc778\uc2a4\ud134\uc2a4\uc5d0 \uc774\ubbf8 NVIDIA GPU\uac00 Passthrough \ub418\uc5b4 \uc788\uac70\ub098, \ub85c\uceec\uc5d0\uc11c \ub4dc\ub77c\uc774\ubc84 \ube4c\ub4dc \ud658\uacbd\uc774 \uac16\ucdb0\uc838\uc57c \ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/openstack-golden-image/#21","title":"2.1 \uc124\uce58 \uc808\ucc28","text":"<ol> <li>Nouveau \ub4dc\ub77c\uc774\ubc84 \ube44\ud65c\uc131\ud654 (\ud544\uc218)</li> <li>\ube4c\ub4dc \uc758\uc874\uc131 \uc124\uce58</li> <li>\ub4dc\ub77c\uc774\ubc84 \uc124\uce58 (CUDA Toolkit \ud3ec\ud568 \uad8c\uc7a5)</li> <li>Persistence Mode \ud65c\uc131\ud654</li> </ol>"},{"location":"openstack/openstack-golden-image/#22","title":"2.2 \uc2e4\ud589 \uba85\ub839\uc5b4 (\uacf5\ud1b5)","text":"<pre><code># 1. Nouveau \ube14\ub799\ub9ac\uc2a4\ud2b8 \ucc98\ub9ac\ncat &lt;&lt;EOF &gt; /etc/modprobe.d/blacklist-nouveau.conf\nblacklist nouveau\noptions nouveau modeset=0\nEOF\ndracut --force  # \ub610\ub294 update-initramfs -u (Ubuntu)\n\n# 2. \uc758\uc874\uc131 \uc124\uce58\n# Ubuntu\napt-get install -y build-essential linux-headers-$(uname -r) pkg-config libglvnd-dev\n# Rocky/RHEL\nyum groupinstall -y \"Development Tools\"\nyum install -y kernel-devel-$(uname -r) kernel-headers-$(uname -r) epel-release dkms\n\n# 3. NVIDIA \ub4dc\ub77c\uc774\ubc84 \uc124\uce58 (Runfile \ubc29\uc2dd \uad8c\uc7a5 - \ubc84\uc804 \uc81c\uc5b4 \uc6a9\uc774)\n# (\ubbf8\ub9ac \ub2e4\uc6b4\ub85c\ub4dc \ubc1b\uc740 .run \ud30c\uc77c\uc774 \uc788\ub2e4\uace0 \uac00\uc815)\nwget https://us.download.nvidia.com/XFree86/Linux-x86_64/535.129.03/NVIDIA-Linux-x86_64-535.129.03.run\nchmod +x NVIDIA-Linux-x86_64-*.run\n./NVIDIA-Linux-x86_64-*.run --silent --dkms\n\n# 4. Persistence Daemon \ud65c\uc131\ud654 (\ubd80\ud305 \uc2dc \ub85c\ub4dc \uc18d\ub3c4 \ud5a5\uc0c1)\nnvidia-smi -pm 1\nsystemctl enable nvidia-persistenced\n</code></pre>"},{"location":"openstack/openstack-golden-image/#3-os-ubuntu-debian","title":"3. OS\ubcc4 \uad6c\uc131: Ubuntu / Debian","text":"<p>\ub300\uc0c1: Ubuntu 20.04, 22.04, 24.04 LTS</p>"},{"location":"openstack/openstack-golden-image/#31","title":"3.1 \uc791\uc5c5 \uc21c\uc11c","text":"<ol> <li>DataSource\ub97c OpenStack\uc73c\ub85c \uace0\uc815</li> <li>SSH \uc124\uc815</li> <li>\ub124\ud2b8\uc6cc\ud06c/\uc2dd\ubcc4\uc790 \ucd08\uae30\ud654 (VMware \uac00\uc774\ub4dc \ucc38\uc870\ud558\uc5ec \uc218\uc815)</li> </ol>"},{"location":"openstack/openstack-golden-image/#32","title":"3.2 \uc2e4\ud589 \uba85\ub839\uc5b4","text":"<pre><code># 1. DataSource\ub97c OpenStack\uc73c\ub85c \uc124\uc815\n# VMware\uc640 \ub2ec\ub9ac OpenStack\uc744 \ucd5c\uc6b0\uc120\uc73c\ub85c \ub461\ub2c8\ub2e4.\ncat &gt; /etc/cloud/cloud.cfg.d/90_datasource.cfg &lt;&lt; 'EOF'\ndatasource_list: [ OpenStack, ConfigDrive, Ec2, None ]\nEOF\n\n# 2. SSH \uc124\uc815 (root \ub85c\uadf8\uc778 \ud5c8\uc6a9\uc740 \ubcf4\uc548 \uc815\ucc45\uc5d0 \ub530\ub77c \uacb0\uc815, \uc5ec\uae30\uc120 \ud0a4 \uae30\ubc18 \uc811\uc18d \uad8c\uc7a5)\n# \ud074\ub77c\uc6b0\ub4dc \uc774\ubbf8\uc9c0\ub294 \ubcf4\ud1b5 cloud-user\ub97c \uc0ac\uc6a9\ud558\ubbc0\ub85c root \uc9c1\uc811 \uc811\uc18d\uc740 \ub9c9\ub294 \uac83\uc774 \ud45c\uc900\uc785\ub2c8\ub2e4.\nsed -i 's/^#*PermitRootLogin.*/PermitRootLogin prohibit-password/' /etc/ssh/sshd_config\nsed -i 's/^#*PasswordAuthentication.*/PasswordAuthentication no/' /etc/ssh/sshd_config\nsystemctl restart ssh\n\n# 3. \ub124\ud2b8\uc6cc\ud06c \ubc0f \uc2dd\ubcc4\uc790 \ucd08\uae30\ud654\n# (VMware \uac00\uc774\ub4dc\uc758 \uc815\ub9ac \ub85c\uc9c1\uc744 OpenStack\uc6a9\uc73c\ub85c \uc801\uc6a9)\nrm -f /etc/netplan/*.yaml\nrm -f /etc/network/interfaces.d/*\nrm -f /etc/udev/rules.d/70-persistent-net.rules\nrm -f /etc/ssh/ssh_host_*key*\ntruncate -s 0 /etc/machine-id\n\n# \ud074\ub77c\uc6b0\ub4dc \uc124\uc815 \ucd08\uae30\ud654\nrm -rf /var/lib/cloud/*\nrm -rf /var/log/cloud-init*\n\n# \ud328\ud0a4\uc9c0 \uc815\ub9ac\napt-get clean\nrm -rf /var/lib/apt/lists/*\n</code></pre>"},{"location":"openstack/openstack-golden-image/#4-os-rhel-rocky-centos","title":"4. OS\ubcc4 \uad6c\uc131: RHEL / Rocky / CentOS","text":"<p>\ub300\uc0c1: Rocky Linux 8/9, CentOS Stream 8/9</p>"},{"location":"openstack/openstack-golden-image/#41","title":"4.1 \uc791\uc5c5 \uc21c\uc11c","text":"<ol> <li>DataSource \uc124\uc815</li> <li>SELinux \uc124\uc815 (\ud544\uc694\uc2dc Permissive)</li> <li>\ub124\ud2b8\uc6cc\ud06c \uc124\uc815 \ud30c\uc77c \uc0ad\uc81c</li> </ol>"},{"location":"openstack/openstack-golden-image/#42","title":"4.2 \uc2e4\ud589 \uba85\ub839\uc5b4","text":"<pre><code># 1. DataSource \uc124\uc815\ncat &gt; /etc/cloud/cloud.cfg.d/90_datasource.cfg &lt;&lt; 'EOF'\ndatasource_list: [ OpenStack, ConfigDrive, Ec2, None ]\nEOF\n\n# 2. \ub124\ud2b8\uc6cc\ud06c \ub9e4\ub2c8\uc800 \uc124\uc815 \uc815\ub9ac\n# (VMware \uac00\uc774\ub4dc\uc758 \uc815\ub9ac \ub85c\uc9c1 \uc801\uc6a9)\nrm -f /etc/sysconfig/network-scripts/ifcfg-e*\nrm -f /etc/NetworkManager/system-connections/*.nmconnection\n\n# 3. \uc2dd\ubcc4\uc790 \ucd08\uae30\ud654\nrm -f /etc/udev/rules.d/70-persistent-net.rules\nrm -f /etc/ssh/ssh_host_*key*\ntruncate -s 0 /etc/machine-id\n\n# 4. \ud788\uc2a4\ud1a0\ub9ac \ubc0f \ub85c\uadf8 \uc815\ub9ac\nhistory -c\nrm -rf /var/lib/cloud/*\nyum clean all\n</code></pre>"},{"location":"openstack/openstack-golden-image/#5","title":"5. \uacf5\ud1b5: \ucd5c\uc885 \uc815\ub9ac \ubc0f \uc774\ubbf8\uc9c0 \ubcc0\ud658","text":"<p>\ubaa8\ub4e0 \uc124\uc815\uc774 \ub05d\ub0ac\uc73c\uba74 \ub9c8\uc9c0\ub9c9\uc73c\ub85c cloud-init\uc744 \ucd08\uae30\ud654\ud558\uace0 VM\uc744 \uc885\ub8cc\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/openstack-golden-image/#51","title":"5.1 \ucd5c\uc885 \uba85\ub839\uc5b4","text":"<pre><code># \ub85c\uadf8 \ud30c\uc77c \ube44\uc6b0\uae30\nfind /var/log -type f -exec truncate -s 0 {} \\;\n\n# cloud-init \uc815\ub9ac (\uac00\uc7a5 \uc911\uc694)\ncloud-init clean --logs\n\n# \uc2dc\uc2a4\ud15c \uc885\ub8cc (\uc7ac\ubd80\ud305 \ud558\uc9c0 \ub9c8\uc138\uc694!)\nshutdown -h now\n</code></pre>"},{"location":"openstack/openstack-golden-image/#52-glance-openstack-cli","title":"5.2 Glance \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc (OpenStack CLI)","text":"<p>VM \uc774\ubbf8\uc9c0 \ud30c\uc77c(qcow2 \ub4f1)\uc744 OpenStack Glance\uc5d0 \uc5c5\ub85c\ub4dc\ud569\ub2c8\ub2e4.</p> <p>CPU \uc804\uc6a9 \uc774\ubbf8\uc9c0:</p> <pre><code>openstack image create \"Ubuntu-22.04-Base\" \\\n  --file ubuntu-22.04-base.qcow2 \\\n  --disk-format qcow2 \\\n  --container-format bare \\\n  --public\n</code></pre> <p>GPU \ud3ec\ud568 \uc774\ubbf8\uc9c0 (\uba54\ud0c0\ub370\uc774\ud130 \uc911\uc694): OpenStack Nova\uac00 GPU\ub97c \uc801\uc808\ud788 \uc2a4\ucf00\uc904\ub9c1\ud558\ub3c4\ub85d \uba54\ud0c0\ub370\uc774\ud130\ub97c \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>openstack image create \"Rocky-9-NVIDIA-GPU\" \\\n  --file rocky-9-gpu.qcow2 \\\n  --disk-format qcow2 \\\n  --container-format bare \\\n  --property hw_video_model=vga \\\n  --property hw_qemu_guest_agent=yes \\\n  --public\n</code></pre>"},{"location":"openstack/openstack-golden-image/#devops","title":"\ud83d\udca1 DevOps \uc5d4\uc9c0\ub2c8\uc5b4\uc758 \uc870\uc5b8","text":"<ol> <li>\uc774\ubbf8\uc9c0 \uc6a9\ub7c9 \ucd5c\uc801\ud654: <code>qemu-img convert -O qcow2 -c input.qcow2 output.qcow2</code> \uba85\ub839\uc5b4\ub97c \uc0ac\uc6a9\ud558\uc5ec \ucd5c\uc885 \uc774\ubbf8\uc9c0\ub97c \uc555\ucd95(<code>-c</code>)\ud558\uba74 \uc2a4\ud1a0\ub9ac\uc9c0 \ud6a8\uc728\uc774 \uc88b\uc544\uc9d1\ub2c8\ub2e4.</li> <li>CI/CD \ud30c\uc774\ud504\ub77c\uc778: \uc774 \uacfc\uc815\uc744 \uc218\ub3d9\uc73c\ub85c \ud558\uae30\ubcf4\ub2e4 Packer\ub97c \uc0ac\uc6a9\ud558\uc5ec '\ucf54\ub4dc\ub85c\uc11c\uc758 \uc774\ubbf8\uc9c0(Image as Code)'\ub97c \uad6c\ud604\ud558\ub294 \uac83\uc744 \uac15\ub825\ud788 \uad8c\uc7a5\ud569\ub2c8\ub2e4.<ul> <li>Packer OpenStack Builder\ub97c \uc0ac\uc6a9\ud558\uba74 \uc704 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ud504\ub85c\ube44\uc800\ub108\ub85c \uc2e4\ud589\ud558\uc5ec \uc790\ub3d9\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> </li> </ol>"},{"location":"openstack/openstack2024.2_pci_placement/","title":"PCI Passthrougu + Placement API \uc801\uc6a9","text":""},{"location":"openstack/openstack2024.2_pci_placement/#0","title":"0. \uc0ac\uc804 \ud655\uc778 \uc0ac\ud56d","text":"<ul> <li>Ubuntu 24.04 + Openstack 2024.1 \ud658\uacbd\uc5d0\uc11c \uc9c4\ud589</li> <li>GPU \ub178\ub4dc\uc5d0 IOMMU \ucee4\ub110 \uc124\uc815 \ud655\uc778</li> <li>GPU \uad00\ub9ac\uc790\uac00 VFIO\uc778\uc9c0 \ud655\uc778</li> </ul>"},{"location":"openstack/openstack2024.2_pci_placement/#1-nova-gpu","title":"1. Nova \uc124\uc815 \uc624\ubc84\ub77c\uc774\ub529 (GPU \uc778\uc2dd\uc2dc\ud0a4\uae30)","text":"<p>Kolla-Ansible\uc740 <code>/etc/kolla/config/nova/nova.conf</code> \ud30c\uc77c\uc744 \uc6b0\uc120\uc21c\uc704\ub85c \uc801\uc6a9\ud569\ub2c8\ub2e4. \uc5ec\uae30\uc5d0 GPU \uc815\ubcf4\ub97c \ubc15\uc81c\ud569\ub2c8\ub2e4.</p> <pre><code># \uc0ac\uc6a9\ud560 PCI \uc7a5\ube44\uc758 \uc774\ub984 \uc0dd\uc131\n# CUSTOM_ \uc811\ub450\uc0ac\ub294 \ud544\uc218\ub85c \ub4e4\uc5b4\uac00\uc57c \ud568\nopenstack resource class create CUSTOM_&lt;RESOURCE_NAME&gt;\n</code></pre> <pre><code># \uc124\uc815 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131\nsudo mkdir -p /etc/kolla/config/nova\n\n# \uc124\uc815 \ud30c\uc77c \uc791\uc131\nsudo nano /etc/kolla/config/nova/nova.conf\n</code></pre> <pre><code>[pci]\n# 1. [Compute \ub178\ub4dc\uc6a9] \ubb3c\ub9ac \uc11c\ubc84\uc758 PCI \uc7a5\uce58 \ud654\uc774\ud2b8\ub9ac\uc2a4\ud2b8\n# 10de(NVIDIA)\uc758 20b7 \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\uaca0\ub2e4\uace0 \uc120\uc5b8\ndevice_spec = [{\"vendor_id\": \"&lt;VENDOR_ID&gt;\", \"product_id\": \"&lt;PRODUCT_ID&gt;\"}]\n\n# 2. [API \ub178\ub4dc\uc6a9] Flavor\uc5d0\uc11c \uc0ac\uc6a9\ud560 \ubcc4\uce6d(Alias) \uc815\uc758\n# name\uc740 \ub098\uc911\uc5d0 Flavor \ub9cc\ub4e4 \ub54c \uc501\ub2c8\ub2e4. (\uc5ec\uae30\uc11c\ub294 'nvidia-gpu'\ub85c \uc815\ud568)\n# nova\uac00 \uc7a5\uce58\ub97c \ubabb \ucc3e\uaca0\ub2e4 \ud560 \ub54c, type-PCI \ubcc0\uacbd \ud544\uc694\nalias = {\"vendor_id\": \"&lt;VENDOR_ID&gt;\", \"product_id\": \"&lt;PRODUCT_ID&gt;\", \"device_type\": \"type-PCI\", \"name\": \"&lt;RESOURCE_NAME&gt;\"}\n\n# 3. PCI\ub97c placement\uc5d0 \ud1b5\ud569\nreport_in_placement = true\n\n[filter_scheduler]\n# 3. [Scheduler \ub178\ub4dc\uc6a9] PCI \ud544\ud130 \ud65c\uc131\ud654 (\uae30\uc874 \ud544\ud130 \ub4a4\uc5d0 \ucd94\uac00)\navailable_filters = nova.scheduler.filters.all_filters\nenabled_filters = ComputeFilter,ImagePropertiesFilter,PciPassthroughFilter\n\n# \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc635\uc158\uc778\uc9c0 \ud655\uc778 \ud544\uc694\npci_in_placement = true\n</code></pre> <p>(\uc800\uc7a5: <code>Ctrl+O</code> -&gt; \uc5d4\ud130 -&gt; <code>Ctrl+X</code>)</p>"},{"location":"openstack/openstack2024.2_pci_placement/#2-reconfigure","title":"2. \uc124\uc815 \uc801\uc6a9 (Reconfigure)","text":"<p>\uae30\uc874 \uc624\ud508\uc2a4\ud0dd\uc744 \ub044\uc9c0 \uc54a\uace0 \uc124\uc815\ub9cc \uc5c5\ub370\uc774\ud2b8\ud569\ub2c8\ub2e4.</p> <pre><code># \uac00\uc0c1\ud658\uacbd \ud65c\uc131\ud654 \ud544\uc218\nsource ~/kolla-venv/bin/activate\n\n# \uc7ac\uc124\uc815 \uc801\uc6a9 (Nova \uc11c\ube44\uc2a4\ub4e4\ub9cc \uc7ac\uc2dc\uc791\ub428)\nkolla-ansible reconfigure -i multinode --tags nova\n</code></pre> <p>(\uc804\uccb4\ub97c \ub2e4 \ub3cc\ub9ac\uba74 \uc624\ub798 \uac78\ub9ac\ub2c8 <code>--tags nova</code>\ub85c \uc2dc\uac04 \ub2e8\ucd95 \uac00\ub2a5\ud569\ub2c8\ub2e4.)</p>"},{"location":"openstack/openstack2024.2_pci_placement/#3-placement","title":"3. Placement \ub4f1\ub85d \uac80\uc99d","text":"<p>Nova\uac00 GPU\ub97c \uac10\uc9c0\ud558\uace0 Placement\uc5d0 \"\ub098 GPU \uc788\uc5b4!\"\ub77c\uace0 \ubcf4\uace0\ud588\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"openstack/openstack2024.2_pci_placement/#31-compute-node-uuid","title":"3.1. \ubb3c\ub9ac \uc11c\ubc84(Compute Node) UUID \ud655\uc778","text":"<pre><code>openstack resource provider list\n</code></pre> <ul> <li>\uc5ec\uae30\uc11c GPU \ub178\ub4dc\uc758 \uc790\uc2dd <code>ID</code> (UUID)\ub97c \ubcf5\uc0ac\ud558\uc138\uc694.</li> </ul>"},{"location":"openstack/openstack2024.2_pci_placement/#32","title":"3.2. \uc778\ubca4\ud1a0\ub9ac \uc870\ud68c","text":"<pre><code># [UUID] \uc790\ub9ac\uc5d0 \ubcf5\uc0ac\ud55c ID\ub97c \ub123\uc73c\uc138\uc694\nopenstack resource provider inventory list [UUID]\n</code></pre> <p>[\uc131\uacf5 \ud310\ub3c5] \ucd9c\ub825 \uacb0\uacfc\uc5d0 \uc544\ub798\uc640 \ube44\uc2b7\ud55c \ud56d\ubaa9\uc774 \ubcf4\uc5ec\uc57c \ud569\ub2c8\ub2e4.</p> <ul> <li><code>PCI_DEVICE</code>: <code>total: 1</code> (\ub610\ub294 GPU \uac1c\uc218\ub9cc\ud07c)</li> <li>\ub610\ub294 <code>CUSTOM_PCI_10DE_20B7</code>: <code>total: ...</code></li> </ul>"},{"location":"openstack/openstack2024.2_pci_placement/#4-external-network","title":"4. \uc678\ubd80 \ub124\ud2b8\uc6cc\ud06c(External Network) \ub6ab\uae30","text":"<p>\uc778\uc2a4\ud134\uc2a4\uac00 \uc678\ubd80(\uc778\ud130\ub137)\uc640 \ud1b5\uc2e0\ud558\ub824\uba74 **\"\ubb3c\ub9ac \uc11c\ubc84\uc758 \ube48 \uae61\ud1b5 \uc778\ud130\ud398\uc774\uc2a4(\uc608: eno2)\"**\uc640 \uc5f0\uacb0\ub41c \uac00\uc0c1 \ub124\ud2b8\uc6cc\ud06c\ub97c \ub9cc\ub4e4\uc5b4\uc57c \ud569\ub2c8\ub2e4.</p> <p>\uc804\uc81c \uc870\uac74:</p> <ul> <li><code>globals.yml</code>\uc5d0 <code>neutron_external_interface: \"eno2\"</code> (\ubb3c\ub9ac\uc11c\ubc84\uc758 \uc678\ubd80\uc6a9 \ud3ec\ud2b8)\uac00 \uc124\uc815\ub418\uc5b4 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.</li> <li>\ud574\ub2f9 \ud3ec\ud2b8\ub294 \uc2a4\uc704\uce58\uc5d0\uc11c \uc778\ud130\ub137\uc774 \ub418\ub294 VLAN(\ub610\ub294 Untagged)\uc5d0 \uaf42\ud600 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"openstack/openstack2024.2_pci_placement/#41-flat","title":"4.1. \ub124\ud2b8\uc6cc\ud06c \uc0dd\uc131 (Flat \ud0c0\uc785)","text":"<p>\uc0ac\ub0b4\ub9dd IP \ub300\uc5ed\uc744 \uadf8\ub300\ub85c \uc4f0\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. (\uc608: \uc0ac\ub0b4\ub9dd\uc774 <code>192.168.0.0/24</code>\ub77c\uace0 \uac00\uc815)</p> <pre><code># 1. Provider Network \uc0dd\uc131 (\uc774\ub984: public)\n# physnet1\uc740 kolla \uae30\ubcf8 \ubb3c\ub9ac \ub124\ud2b8\uc6cc\ud06c \uc774\ub984\uc785\ub2c8\ub2e4.\nopenstack network create --share --external \\\n  --provider-physical-network physnet1 \\\n  --provider-network-type flat \\\n  public\n\n# 2. Subnet \uc0dd\uc131 (\uc5ec\uae30\uc5d0 \uc2e4\uc81c \uc0ac\ub0b4\ub9dd \uc815\ubcf4\ub97c \ub123\uc5b4\uc57c \ud568!)\n# gateway: \uc0ac\ub0b4\ub9dd \uac8c\uc774\ud2b8\uc6e8\uc774 (\uc608: 192.168.0.1)\n# allocation-pool: DHCP\ub85c \uc4f8 \ubc94\uc704 (\uc608: 100~200\ubc88)\nopenstack subnet create --network public \\\n  --allocation-pool start=192.168.0.100,end=192.168.0.200 \\\n  --dns-nameserver 8.8.8.8 \\\n  --gateway 192.168.0.1 \\\n  --subnet-range 192.168.0.0/24 \\\n  public_subnet\n</code></pre> <pre><code># 3. \ub124\ud2b8\uc6cc\ud06c \uad00\ub828 \uc124\uc815(MTU \uc870\uc808)\n# VM \uc548\uc5d0\uc11c \uc2e4\ud589 (\ud5e4\ub354 \ud06c\uae30 \uac10\uc548\ud574\uc11c 1450\uc73c\ub85c \ud551)\nping -M do -s 1422 8.8.8.8  # (1422 + 28\ud5e4\ub354 = 1450) -&gt; \uc798 \ub420 \uac81\ub2c8\ub2e4.\nping -M do -s 1472 8.8.8.8  # (1472 + 28\ud5e4\ub354 = 1500) -&gt; \uc2e4\ud328\ud558\uac70\ub098 \ud0c0\uc784\uc544\uc6c3 \ub0a0 \uac81\ub2c8\ub2e4.\n\n# 3-1. 1472 \ud551\uc5d0\uc11c \uc624\ub958 \ubc1c\uc0dd \uc2dc\n# /etc/kolla/globals.yml\nnetwork_mtu: 1450 # (\uae30\ubcf8\uac12 1500 -&gt; 1450 \ucd95\uc18c)\n\n# 3-2. \uc218\uc815 \ud6c4 \uc7ac\ubc30\ud3ec\nkolla-ansible reconfigure -i multinode\n</code></pre>"},{"location":"openstack/openstack2024.2_pci_placement/#mtu","title":"MTU \uad00\ub828 \uc18d\ub3c4 \uc9c0\uc5f0\uc774 \uc0dd\uae30\ub294 \uc774\uc720","text":"<p>1) \uae30\ubcf8 \ud328\ud0b7 \ud06c\uae30 \uc81c\ud55c\uc774 1500 byte, \uc624\ud508\uc2a4\ud0dd \ub0b4\ubd80\uc5d0\uc11c\ub294 \ud328\ud0b7\uc5d0 \uc624\ubc84\ud5e4\ub4dc(VXLAN, UDP, IP, Ethernet \ud5e4\ub354 -&gt; \ucd1d 50 byte)\ub97c \ubd99\uc5ec\uc11c \ud3ec\uc7a5 \ud6c4 \uc804\uc1a1 2) \ub530\ub77c\uc11c vm\uc774 1500 byte \ub370\uc774\ud130\ub97c \uc804\uc1a1 \uc2dc, vm\uc5d0\uc11c 50 byte\ucd94\uac00\ub418\uc5b4 1550 byte \uc804\uc1a1 \uc694\uccad 3) \ubb3c\ub9ac \ub79c\uce74\ub4dc\uc5d0\uc11c \ud328\ud0b7 \ud06c\uae30 \ucd08\uacfc \uc778\uc9c0 -&gt; \ud328\ud0b7 \ud3d0\uae30 \ub610\ub294 \ucabc\uac1c\uae30 4) \ud328\ud0b7 \uc190\uc2e4 \ud639\uc740 \uc7ac\uc804\uc1a1\uc774 \ubc1c\uc0dd\ud558\uba70 \ub124\ud2b8\uc6cc\ud06c \uc18d\ub3c4 \uc800\ud558(\ud2b9\ud788 HTTPS \uc811\uc18d\uc774\ub098 \ub300\uc6a9\ub7c9 \ub2e4\uc6b4\ub85c\ub4dc \uc2dc)</p>"},{"location":"openstack/openstack2024.2_pci_placement/#5","title":"5. \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 \ud14c\uc2a4\ud2b8","text":"<p>\uc774\uc81c \"GPU\uac00 \ub2ec\ub9b0 + \uc778\ud130\ub137\uc774 \ub418\ub294\" \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4ed\ub2c8\ub2e4.</p>"},{"location":"openstack/openstack2024.2_pci_placement/#51-gpu-flavor","title":"5.1. GPU Flavor \uc0dd\uc131","text":"<p>\uc544\uae4c <code>nova.conf</code>\uc5d0\uc11c \uc815\ud55c alias \uc774\ub984(<code>nvidia-gpu</code>)\uc744 \uc501\ub2c8\ub2e4.</p> <pre><code>openstack flavor create --ram 8192 --disk 50 --vcpus 4 gpu.flavor\nopenstack flavor set \\\n  --property \"pci_passthrough:alias\"=\"&lt;RESOURCE_NAME&gt;:1\" \\\n  --property \"resources:&lt;CUSTOM_RESOURCE_CLASS&gt;=1\" \\\n  --property \"hw:pci_numa_affinity_policy\"=\"preferred\" \\\n  gpu-flavor\n</code></pre>"},{"location":"openstack/openstack2024.2_pci_placement/#52","title":"5.2. \uc778\uc2a4\ud134\uc2a4 \uc2dc\uc791","text":"<pre><code>openstack server create --flavor gpu.flavor \\\n  --image \"Ubuntu 24.04\" \\\n  --network internal \\\n  my-gpu-vm\n</code></pre>"},{"location":"openstack/openstack2024.2_pci_placement/#53","title":"5.3. \ucd5c\uc885 \ud655\uc778","text":"<p>VM \uc811\uc18d \ud6c4:</p> <ul> <li><code>lspci</code>: NVIDIA \uc7a5\uce58\uac00 \ubcf4\uc774\ub294\uc9c0?</li> <li><code>ping 8.8.8.8</code>: \uc778\ud130\ub137\uc774 \ub418\ub294\uc9c0?</li> <li><code>nvidia-smi</code>: \ub4dc\ub77c\uc774\ubc84 \uc124\uce58 \ud6c4 GPU\uac00 \uc7a1\ud788\ub294\uc9c0?</li> </ul>"},{"location":"openstack/install/openstack2025.1-install/","title":"\ud83d\udee0\ufe0f OpenStack 2025.1 (Epoxy) GPU/PCI Passthrough \uc124\uce58 \uac00\uc774\ub4dc","text":""},{"location":"openstack/install/openstack2025.1-install/#0","title":"0. \uc0ac\uc804 \ud658\uacbd \uac00\uc815","text":"<ul> <li>OS: Ubuntu 24.04 LTS (\ubaa8\ub4e0 \ub178\ub4dc \ub3d9\uc77c)</li> <li>Control Node IP: <code>10.10.10.60</code></li> <li>Compute Node IP: <code>10.10.10.62</code> (GPU \uc7a5\ucc29)</li> <li>Target GPU: NVIDIA (Vendor: <code>10de</code>, Product: <code>20b7</code>)</li> </ul>"},{"location":"openstack/install/openstack2025.1-install/#1","title":"1. [\ubaa8\ub4e0 \ub178\ub4dc] \uacf5\ud1b5 \uae30\ubcf8 \uc124\uc815","text":"<p>\ub300\uc0c1: Control Node(Master), Compute Node \ub4f1 \ubaa8\ub4e0 \uc11c\ubc84 \uad8c\ud55c: Root (<code>sudo -i</code>)</p> <pre><code># 1. Root \uad8c\ud55c \ud68d\ub4dd\nsudo -i\n\n# 2. \ud55c\uad6d \ud45c\uc900\uc2dc \uc124\uc815\ntimedatectl set-timezone Asia/Seoul\n\n# 3. \ud328\ud0a4\uc9c0 \uc5c5\ub370\uc774\ud2b8 \ubc0f \ud544\uc218 \uc720\ud2f8\ub9ac\ud2f0 \uc124\uce58\napt update &amp;&amp; apt install -y git python3-dev libffi-dev gcc libssl-dev python3-venv net-tools\n\n# 4. \ud638\uc2a4\ud2b8 \ub4f1\ub85d (DNS\uac00 \uc5c6\uc744 \uacbd\uc6b0 /etc/hosts \ub4f1\ub85d \ud544\uc218)\n# (\uc544\ub798 IP\uc640 \ud638\uc2a4\ud2b8\uba85\uc740 \ubcf8\uc778 \ud658\uacbd\uc5d0 \ub9de\uac8c \uc218\uc815\ud558\uc138\uc694)\necho \"10.10.10.60 control\" &gt;&gt; /etc/hosts\necho \"10.10.10.62 compute\" &gt;&gt; /etc/hosts\n</code></pre>"},{"location":"openstack/install/openstack2025.1-install/#2-compute-gpu","title":"2. [Compute \ub178\ub4dc] GPU \uaca9\ub9ac \ubc0f \ud558\ub4dc\uc6e8\uc5b4 \uc124\uc815","text":"<p>\ub300\uc0c1: GPU\uac00 \uc7a5\ucc29\ub41c Compute Node (<code>10.10.10.62</code>) \ubaa9\uc801: \ucee4\ub110 \ub808\ubca8\uc5d0\uc11c GPU\ub97c \uaca9\ub9ac\ud558\uc5ec VM\uc5d0 \ud560\ub2f9\ud560 \uc900\ube44\ub97c \ud569\ub2c8\ub2e4.</p> <pre><code># 1. IOMMU \ud65c\uc131\ud654 (GRUB \uc124\uc815 \uc218\uc815)\n# \uae30\uc874 \uc124\uc815\uc744 \ubc31\uc5c5 \ud6c4 intel_iommu=on iommu=pt \ucd94\uac00 (AMD CPU\uc778 \uacbd\uc6b0 intel_iommu \ub300\uc2e0 amd_iommu \uc0ac\uc6a9)\ncp /etc/default/grub /etc/default/grub.bak\nsed -i 's/GRUB_CMDLINE_LINUX_DEFAULT=\"/GRUB_CMDLINE_LINUX_DEFAULT=\"intel_iommu=on iommu=pt /' /etc/default/grub\nupdate-grub\n\n# 2. VFIO \ubaa8\ub4c8 \ub85c\ub4dc \uc124\uc815\ncat &lt;&lt;EOF &gt; /etc/modules-load.d/vfio.conf\nvfio\nvfio_iommu_type1\nvfio_pci\nEOF\n\n# 3. GPU \uc7a5\uce58 \ubc14\uc778\ub529 (vfio-pci)\n# [\uc8fc\uc758] 10de:20b7 \ubd80\ubd84\uc740 'lspci -nn | grep NVIDIA'\ub85c \ud655\uc778\ub41c \ubcf8\uc778\uc758 ID\ub85c \ubc18\ub4dc\uc2dc \ubcc0\uacbd\ud558\uc138\uc694.\necho \"options vfio-pci ids=10de:20b7\" &gt; /etc/modprobe.d/vfio.conf\n\n# 4. \uc124\uc815 \uc801\uc6a9\uc744 \uc704\ud574 initramfs \uac31\uc2e0 \ubc0f \uc7ac\ubd80\ud305\nupdate-initramfs -u\nreboot\n\n# --- \uc7ac\ubd80\ud305 \ud6c4 \ud655\uc778 \uba85\ub839\uc5b4 ---\n# lspci -nnk -d 10de:20b7\n# \uacb0\uacfc\uc5d0 \"Kernel driver in use: vfio-pci\"\uac00 \ucd9c\ub825\ub418\uc5b4\uc57c \uc131\uacf5\n</code></pre>"},{"location":"openstack/install/openstack2025.1-install/#3-control-kolla-ansible","title":"3. [Control \ub178\ub4dc] Kolla-Ansible \uc124\uce58 \ubc0f \uc900\ube44","text":"<p>\ub300\uc0c1: Control Node (<code>10.10.10.60</code>) \ubaa9\uc801: \ubc30\ud3ec \ub3c4\uad6c \uc124\uce58 \ubc0f \uae30\ubcf8 \uc124\uc815</p> <pre><code># 1. Python \uac00\uc0c1\ud658\uacbd \uc0dd\uc131 (\uc2dc\uc2a4\ud15c \ud328\ud0a4\uc9c0 \ucda9\ub3cc \ubc29\uc9c0)\npython3 -m venv $HOME/kolla-venv\nsource $HOME/kolla-venv/bin/activate\n\n# 2. pip \ubc0f Ansible \uc124\uce58\npip install -U pip\npip install 'ansible-core&gt;=2.16,&lt;2.18'\n\n# docker\ub294 \uae30\ubcf8 \uc2dc\uc2a4\ud15c \uacbd\ub85c\uc5d0 \uc124\uce58\n/root/kolla-venv/bin/python3.12 -m pip install docker\n\n\n# 3. Kolla-Ansible 2025.1 \uc124\uce58\npip install git+https://opendev.org/openstack/kolla-ansible@stable/2025.1\n\n# 4. \uc124\uc815 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131 \ubc0f \uc608\uc81c \ud30c\uc77c \ubcf5\uc0ac\nsudo mkdir -p /etc/kolla\nsudo chown $USER:$USER /etc/kolla\ncp -r $HOME/kolla-venv/share/kolla-ansible/etc_examples/kolla/* /etc/kolla/\ncp $HOME/kolla-venv/share/kolla-ansible/ansible/inventory/* .\n\n# 5. \uc758\uc874\uc131 \uc124\uce58 \ubc0f \ud328\uc2a4\uc6cc\ub4dc \uc0dd\uc131\nkolla-ansible install-deps\nkolla-genpwd\n\n# 6. SSH \ud0a4 \ubc30\ud3ec (Control -&gt; Compute \uc811\uc18d\uc6a9)\n# (\uc774\ubbf8 \ub418\uc5b4 \uc788\ub2e4\uba74 \uc0dd\ub7b5 \uac00\ub2a5)\nssh-keygen -t rsa -N \"\" -f ~/.ssh/id_rsa\nssh-copy-id root@10.10.10.62\n\n# 7. \uc778\ubca4\ud1a0\ub9ac \ud30c\uc77c \uc218\uc815\n# vi multinode \uba85\ub839\uc73c\ub85c \uc544\ub798 \ub0b4\uc6a9 \ubc18\uc601\n# [control]\n# 10.10.10.60\n# [compute]\n# 10.10.10.62\n</code></pre>"},{"location":"openstack/install/openstack2025.1-install/#4-control-placement-pci","title":"4. [Control \ub178\ub4dc] Placement &amp; PCI \uc5f0\ub3d9 \uc124\uc815 (\u2605\uc911\uc694\u2605)","text":"<p>\ub300\uc0c1: Control Node (<code>10.10.10.60</code>) \uc124\uba85: \ubc30\ud3ec \uc2dc \uc801\uc6a9\ub420 Nova \uc124\uc815 \ud30c\uc77c\uc744 \ubbf8\ub9ac \uc791\uc131\ud569\ub2c8\ub2e4.</p> <pre><code># \uc124\uc815 \ud30c\uc77c \uc800\uc7a5 \uacbd\ub85c \uc0dd\uc131\nmkdir -p /etc/kolla/config/nova\n\n# -------------------------------------------------------\n# 4-1. Nova Compute \uc124\uc815 (Compute \ub178\ub4dc\uc5d0 \uc801\uc6a9\ub420 \uc124\uc815)\n# -------------------------------------------------------\ncat &lt;&lt;EOF &gt; /etc/kolla/config/nova/nova-compute.conf\n[pci]\n# Placement API\uc5d0 PCI \uc7a5\uce58\ub97c \ubcf4\uace0\ud558\ub3c4\ub85d \uc124\uc815 (\ucd5c\uc2e0 \ud45c\uc900)\nreport_in_placement = True\n\n# PCI \uc7a5\uce58 \uc815\uc758 (device_spec)\n# resource_class\ub294 \ubc18\ub4dc\uc2dc 'CUSTOM_'\uc73c\ub85c \uc2dc\uc791\ud558\uace0 \ub300\ubb38\uc790\uc5ec\uc57c \ud568\ndevice_spec = { \"vendor_id\": \"10de\", \"product_id\": \"20b7\", \"resource_class\": \"CUSTOM_GPU_NVIDIA\", \"name\": \"nvidia-gpu\" }\nEOF\n\n# -------------------------------------------------------\n# 4-2. Nova API \uc124\uc815 (API \uc11c\ube44\uc2a4\uac00 \uc54c\uac8c \ub420 \ubcc4\uce6d)\n# -------------------------------------------------------\ncat &lt;&lt;EOF &gt; /etc/kolla/config/nova/nova-api.conf\n[pci]\n# Flavor \uc0dd\uc131 \uc2dc \uc0ac\uc6a9\ud560 \ubcc4\uce6d \uc815\uc758\nalias = { \"name\": \"gpu-alias\", \"device_type\": \"type-PF\", \"custom_resource_class\": \"CUSTOM_GPU_NVIDIA\" }\nEOF\n\n# -------------------------------------------------------\n# 4-3. Nova Scheduler \uc124\uc815\n# -------------------------------------------------------\ncat &lt;&lt;EOF &gt; /etc/kolla/config/nova/nova-scheduler.conf\n[filter_scheduler]\n# PciPassthroughFilter \ud65c\uc131\ud654\nenabled_filters = PciPassthroughFilter, ComputeFilter, AvailabilityZoneFilter, ImagePropertiesFilter, ValidationFilter\nEOF\n</code></pre>"},{"location":"openstack/install/openstack2025.1-install/#5-control","title":"5. [Control \ub178\ub4dc] \ubc30\ud3ec \uc2e4\ud589","text":"<p>\ub300\uc0c1: Control Node (<code>10.10.10.60</code>)</p> <pre><code># 1. \uac00\uc0c1\ud658\uacbd \ud65c\uc131\ud654 (\ud544\uc218)\nsource $HOME/kolla-venv/bin/activate\n\n# 2. \uc5f0\uacb0 \ud14c\uc2a4\ud2b8\nansible -i multinode all -m ping\n\n# 3. OpenStack \ubc30\ud3ec (\uc21c\uc11c\ub300\ub85c \uc2e4\ud589)\nkolla-ansible bootstrap-servers -i multinode\nkolla-ansible prechecks -i multinode\nkolla-ansible deploy -i multinode\n\n# 4. \ud074\ub77c\uc774\uc5b8\ud2b8 \ub3c4\uad6c \uc124\uce58 (\ubc30\ud3ec \uc644\ub8cc \ud6c4)\npip install python-openstackclient\n</code></pre>"},{"location":"openstack/install/openstack2025.1-install/#6-control-flavor","title":"6. [Control \ub178\ub4dc] \uac80\uc99d \ubc0f Flavor \uc0dd\uc131","text":"<p>\ub300\uc0c1: Control Node (<code>10.10.10.60</code>) \uc124\uba85: \ubc30\ud3ec \ud6c4 GPU \uc790\uc6d0\uc774 \uc815\uc0c1\uc801\uc73c\ub85c Placement\uc5d0 \ub4f1\ub85d\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\uace0 Flavor\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p> <pre><code># 1. Admin \ud658\uacbd \ubcc0\uc218 \ub85c\ub4dc\nsource /etc/kolla/admin-openrc.sh\n\n# 2. Placement \uc790\uc6d0 \ud655\uc778 (\uac00\uc7a5 \uc911\uc694\ud55c \uac80\uc99d \ub2e8\uacc4)\n# Compute \ub178\ub4dc\uac00 GPU\ub97c 'CUSTOM_GPU_NVIDIA'\ub77c\ub294 \uc790\uc6d0\uc73c\ub85c \ubcf4\uace0\ud588\ub294\uc9c0 \ud655\uc778\n# \uc544\ub798 \uba85\ub839 \uacb0\uacfc\uc5d0\uc11c USAGE / CAPACITY \ud655\uc778\nopenstack resource provider list\nopenstack resource provider inventory list &lt;COMPUTE_NODE_UUID&gt;\n\n# 3. GPU Flavor \uc0dd\uc131 (Placement \ubb38\ubc95 \uc0ac\uc6a9)\n# --property resources:\uc790\uc6d0\ud074\ub798\uc2a4\uba85=\uac1c\uc218\nopenstack flavor create --vcpus 8 --ram 16384 --disk 100 gpu.flavor\nopenstack flavor set --property \"resources:CUSTOM_GPU_NVIDIA=1\" gpu.flavor\n\n# 4. \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 \ud14c\uc2a4\ud2b8\nopenstack server create --flavor gpu.flavor --image &lt;IMAGE_NAME&gt; --network &lt;NETWORK_NAME&gt; gpu-test-vm\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/","title":"Ubuntu \uae30\ubcf8 \uc138\ud305","text":"<ul> <li>Ubuntu 24.04 \uae30\uc900</li> </ul>"},{"location":"ubuntu/init-ubuntu-env/#index","title":"Index","text":"<ul> <li>Oh My Zsh \uc124\uce58</li> <li>npm \uc124\uce58</li> </ul>"},{"location":"ubuntu/init-ubuntu-env/#oh-my-zsh","title":"Oh My Zsh \uc124\uce58","text":""},{"location":"ubuntu/init-ubuntu-env/#1-oh-my-zsh","title":"1. Oh My Zsh \uc124\uce58","text":"<pre><code># zsh \uc124\uce58\nsudo apt install zsh\n</code></pre> <pre><code># oh-my-zsh \uc124\uce58\nsh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/#2-powerlevel10k","title":"2. Powerlevel10k \ubc0f \ud50c\ub7ec\uadf8\uc778 \uc124\uce58","text":"<pre><code># Powerlevel10k\ngit clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/themes/powerlevel10k\n\n# zsh-autosuggestions\ngit clone https://github.com/zsh-users/zsh-autosuggestions.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions\n\n# zsh-syntax-highlighting\ngit clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/#3-zshrc","title":"3. ~/.zshrc \ud30c\uc77c \uc218\uc815","text":"<pre><code># ZSH_THEME=\"robbyrussell\"\nZSH_THEME=\"powerlevel10k/powerlevel10k\"\n\nplugins=(\n    git\n    zsh-autosuggestions\n    zsh-syntax-highlighting\n)\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/#4","title":"4. \uc178 \uc0c8\ub85c\uace0\uce68","text":"<pre><code>source ~/.zshrc\n</code></pre> <p>\uc124\uc815: source ~/.zshrc\ub97c \uc2e4\ud589\ud558\uba74, \uc124\uc815 \ub9c8\ubc95\uc0ac(p10k configure)\uac00 \uc790\ub3d9\uc73c\ub85c \uc2e4\ud589\ub429\ub2c8\ub2e4. \uc9c8\ubb38\uc5d0 \ub2f5\ud558\uba74\uc11c \uc6d0\ud558\ub294 \uc544\uc774\ucf58\uacfc \ubaa8\uc591\uc744 \uc120\ud0dd\ud558\uba74 \ub429\ub2c8\ub2e4. \ud544\uc218: \uc774 \ud14c\ub9c8\ub97c \uc81c\ub300\ub85c \uc0ac\uc6a9\ud558\ub824\uba74 Nerd Fonts (\uc608: MesloLGS NF)\ub97c Tabby \ud130\ubbf8\ub110\uc758 \uae00\uaf34\ub85c \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.</p>"},{"location":"ubuntu/init-ubuntu-env/#npm","title":"npm \uc124\uce58","text":""},{"location":"ubuntu/init-ubuntu-env/#1-nvm","title":"1. NVM \uc124\uce58","text":"<pre><code># NVM \uc124\uce58\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\n\n# NVM \ud65c\uc131\ud654\nsource ~/.zshrc\n</code></pre>"},{"location":"ubuntu/init-ubuntu-env/#2-nodejs","title":"2. Node.js \uc124\uce58","text":"<pre><code># Node.js LTS \ubc84\uc804 \uc124\uce58\nnvm install --lts\n</code></pre> <pre><code># \uc124\uce58 \ud655\uc778\nnode -v\nnpm -v\n</code></pre>"}]}